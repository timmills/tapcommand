INFO:     Will watch for changes in these directories: ['/home/coastal/smartvenue/backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [584697] using WatchFiles
/home/coastal/smartvenue/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [584731]
INFO:     Waiting for application startup.
2025-10-07 14:41:35,206 - app.main - INFO - Starting SmartVenue backend...
2025-10-07 14:41:35,212 - app.main - INFO - Database tables created
2025-10-07 14:41:35,234 - app.main - INFO - Database initialized with seed data
2025-10-07 14:41:35,235 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-07 14:41:35,236 - app.services.discovery - INFO - Device discovery started
2025-10-07 14:41:35,236 - app.main - INFO - Device discovery started
2025-10-07 14:41:35,236 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-07 14:41:35,236 - app.main - INFO - Device health monitoring started
2025-10-07 14:41:35,236 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-07 14:41:35,236 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-07 14:41:35,236 - app.main - INFO - Command queue processor started
2025-10-07 14:41:35,236 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-07 14:41:35,236 - app.main - INFO - History cleanup service started
2025-10-07 14:41:35,237 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-07 14:41:35,238 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-07 14:41:35,240 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-07 14:41:35,240 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-07 14:41:35,240 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-07 14:41:35,240 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-07 14:41:35,241 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-07 14:41:35,241 - apscheduler.scheduler - INFO - Scheduler started
2025-10-07 14:41:35,241 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-07 14:41:35,241 - app.main - INFO - Schedule processor started
2025-10-07 14:41:35,241 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-07 14:41:35,241 - app.main - INFO - Device status monitoring started
2025-10-07 14:41:35,241 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-07 14:41:35,241 - app.main - INFO - TV status polling service started
2025-10-07 14:41:35,242 - app.services.queue_processor - INFO - Worker 0 started
2025-10-07 14:41:35,246 - app.services.queue_processor - INFO - Worker 1 started
2025-10-07 14:41:35,247 - app.services.queue_processor - INFO - Worker 2 started
2025-10-07 14:41:35,248 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-08 03:00:00 (in 12.3 hours)
2025-10-07 14:41:35,255 - app.services.device_status_checker - INFO - Checking status of 3 devices
INFO:     Application startup complete.
Template seeding complete; using dynamic IR library system.
INFO:     100.98.57.42:63104 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     127.0.0.1:35534 - "GET /api/v1/management/discovered HTTP/1.1" 200 OK
INFO:     100.98.57.42:62061 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:56939 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app/api/device_management.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-07 14:42:32,101 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-07 14:42:32,101 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-07 14:42:32,101 - app.main - INFO - TV status polling service stopped
2025-10-07 14:42:32,101 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-07 14:42:32,101 - app.main - INFO - Device status monitoring stopped
2025-10-07 14:42:32,101 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-07 14:42:32,101 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-07 14:42:32,101 - app.main - INFO - Schedule processor stopped
2025-10-07 14:42:32,102 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-07 14:42:32,102 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-07 14:42:32,102 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-07 14:42:32,102 - app.main - INFO - History cleanup service stopped
2025-10-07 14:42:32,102 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-07 14:42:32,102 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-07 14:42:32,102 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-07 14:42:32,102 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-07 14:42:32,102 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-07 14:42:32,102 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-07 14:42:32,102 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-07 14:42:32,102 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-07 14:42:32,102 - app.main - INFO - Command queue processor stopped
2025-10-07 14:42:32,102 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-07 14:42:32,102 - app.main - INFO - Device health monitoring stopped
2025-10-07 14:42:32,102 - app.services.discovery - INFO - Stopping device discovery...
2025-10-07 14:42:32,102 - app.services.discovery - INFO - Device discovery stopped
2025-10-07 14:42:32,102 - app.main - INFO - Device discovery stopped
INFO:     Application shutdown complete.
INFO:     Finished server process [584731]
/home/coastal/smartvenue/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [584843]
INFO:     Waiting for application startup.
2025-10-07 14:42:33,719 - app.main - INFO - Starting SmartVenue backend...
2025-10-07 14:42:33,724 - app.main - INFO - Database tables created
2025-10-07 14:42:33,745 - app.main - INFO - Database initialized with seed data
2025-10-07 14:42:33,745 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-07 14:42:33,746 - app.services.discovery - INFO - Device discovery started
2025-10-07 14:42:33,746 - app.main - INFO - Device discovery started
2025-10-07 14:42:33,746 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-07 14:42:33,746 - app.main - INFO - Device health monitoring started
2025-10-07 14:42:33,746 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-07 14:42:33,746 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-07 14:42:33,746 - app.main - INFO - Command queue processor started
2025-10-07 14:42:33,746 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-07 14:42:33,746 - app.main - INFO - History cleanup service started
2025-10-07 14:42:33,746 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-07 14:42:33,748 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-07 14:42:33,749 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-07 14:42:33,749 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-07 14:42:33,749 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-07 14:42:33,749 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-07 14:42:33,750 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-07 14:42:33,750 - apscheduler.scheduler - INFO - Scheduler started
2025-10-07 14:42:33,750 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-07 14:42:33,750 - app.main - INFO - Schedule processor started
2025-10-07 14:42:33,750 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-07 14:42:33,750 - app.main - INFO - Device status monitoring started
2025-10-07 14:42:33,750 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-07 14:42:33,750 - app.main - INFO - TV status polling service started
2025-10-07 14:42:33,750 - app.services.queue_processor - INFO - Worker 0 started
2025-10-07 14:42:33,755 - app.services.queue_processor - INFO - Worker 1 started
2025-10-07 14:42:33,755 - app.services.queue_processor - INFO - Worker 2 started
2025-10-07 14:42:33,756 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-08 03:00:00 (in 12.3 hours)
2025-10-07 14:42:33,762 - app.services.device_status_checker - INFO - Checking status of 3 devices
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/discovery.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-07 14:43:05,569 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-07 14:43:05,569 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
202INFO:     Waiting for application shutdown.
2025-10-07 14:43:05,652 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-07 14:43:05,652 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-07 14:43:05,652 - app.main - INFO - TV status polling service stopped
2025-10-07 14:43:05,653 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-07 14:43:05,653 - app.main - INFO - Device status monitoring stopped
2025-10-07 14:43:05,653 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-07 14:43:05,653 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-07 14:43:05,653 - app.main - INFO - Schedule processor stopped
2025-10-07 14:43:05,653 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-07 14:43:05,653 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-07 14:43:05,653 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-07 14:43:05,653 - app.main - INFO - History cleanup service stopped
2025-10-07 14:43:05,653 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-07 14:43:05,653 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-07 14:43:05,653 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-07 14:43:05,653 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-07 14:43:05,653 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-07 14:43:05,653 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-07 14:43:05,653 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-07 14:43:05,653 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-07 14:43:05,653 - app.main - INFO - Command queue processor stopped
2025-10-07 14:43:05,653 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-07 14:43:05,653 - app.main - INFO - Device health monitoring stopped
2025-10-07 14:43:05,653 - app.services.discovery - INFO - Stopping device discovery...
2025-10-07 14:43:05,654 - app.services.discovery - INFO - Dev/home/coastal/smartvenue/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `/home/coastal/smartvenue/venv/lib/python3.12/site-packages/pyINFO:     Started server process [584885]
INFO:     Waiting for application startup.
2025-10-07 14:43:07,249 - app.main - INFO - Starting SmartVenue backend...
2025-10-07 14:43:07,254 - app.main - INFO - Database tables createdINFO:     Started server process [584887]
INFO:     Waiting for application startup.
2025-10-07 14:43:07,335 - app.main - INFO - Starting SmartVenue backend...
2025-10-07 14:43:07,341 - app.main - INFO - Database tables created
2025-10-07 14:43:07,362 - app.main - INFO - Database initialized with seed data
2025-10-07 14:43:07,362 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-07 14:43:07,363 - app.services.discovery - INFO - Device discovery started
2025-10-07 14:43:07,363 - app.main - INFO - Device discovery started
2025-10-07 14:43:07,363 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-07 14:43:07,363 - app.main - INFO - Device health monitoring started
2025-10-07 14:43:07,363 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-07 14:43:07,363 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-07 14:43:07,363 - app.main - INFO - Command queue processor started
2025-10-07 14:43:07,363 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-07 14:43:07,363 - app.main - INFO - History cleanup service started
2025-10-07 14:43:07,363 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-07 14:43:07,364 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-07 14:43:07,366 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-07 14:43:07,366 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-07 14:43:07,366 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-07 14:43:07,366 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-07 14:43:07,367 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-07 14:43:07,367 - apscheduler.scheduler - INFO - Scheduler started
2025-10-07 14:43:07,367 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-07 14:43:07,367 - app.main - INFO - Schedule processor started
2025-10-07 14:43:07,367 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-07 14:43:07,367 - app.main - INFO - Device status monitoring started
2025-10-07 14:43:07,367 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-07 14:43:07,367 - app.main - INFO - TV status polling service started
2025-10-07 14:43:07,367 - app.services.queue_processor - INFO - Worker 0 started
2025-10-07 14:43:07,371 - app.services.queue_processor - INFO - Worker 1 started
2025-10-07 14:43:07,372 - app.services.queue_processor - INFO - Worker 2 started
2025-10INFO:     Application startup complete.
2025-10-07 14:48:07,283 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 14:48:07,288 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 14:48:09,345 - app.services.device_status_checker - INFO - Checking status of 3 devices
2025-10-07 14:48:11,417 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 14:48:16,553 - app.services.esphome_client - WARNING - Timed out waiting for capabilities from ir-dcf89f
2025-10-07 14:48:26,553 - aioesphomeapi.connection - ERROR - 192.168.101.146: disconnect request failed: Timeou2025-10-07 14:48:51,510 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: [Errno 104] Connection reset by peer
2025-10-07 14:48:51,510 - app.services.esphome_client - ERROR - Error retrieving capabilities from ir-dcf89f: ReTemplate seeding complete; using dynamic IR library system.
INFO:     100.98.57.42:50685 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:50685 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
IWARNING:  WatchFiles detected changes in 'app/api/device_management.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-07 14:51:40,287 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-07 14:51:40,287 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-07 14:51:40,287 - app.main - INFO - TV status polling service stopped
2025-10-07 14:51:40,287 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-07 14:51:40,287 - app.main - INFO - Device status monitoring stopped
2025-10-07 14:51:40,287 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-07 14:51:40,287 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-07 14:51:40,287 - app.main - INFO - Schedule processor stopped
2025-10-07 14:51:40,287 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-07 14:51:40,287 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-07 14:51:40,287 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-07 14:51:40,288 - app.main - INFO - History cleanup service stopped
2025-10-07 14:51:40,288 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-07 14:51:40,288 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-07 14:51:40,288 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-07 14:51:40,288 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-07 14:51:40,288 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-07 14:51:40,288 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-07 14:51:40,288 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-07 14:51:40,288 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-07 14:51:40,288 - app.main - INFO - Command queue processor stopped
2025-10-07 14:51:40,288 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-07 14:51:40,288 - app.main - INFO - Device health monitoring stopped
2025-10-07 14:51:40,288 - app.services.discovery - INFO - Stopping device discovery...
2025-10-07 14:51:40,288 - app.services.discovery - INFO - Device discovery stopped
2025-10-07 14:51:40,288 - app.main - INFO - Device discovery stopped
INFO:     Application shutdown complete.
INFO:     Finished server process [584887]
Template seeding complete; using dynamic IR library system.
/home/coastal/smartvenue/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [585002]
INFO:     Waiting for application startup.
2025-10-07 14:51:41,953 - app.main - INFO - Starting SmartVenue backend...
2025-10-07 14:51:41,958 - app.main - INFO - Database tables created
2025-10-07 14:51:41,979 - app.main - INFO - Database initialized with seed data
2025-10-07 14:51:41,979 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-07 14:51:41,980 - app.services.discovery - INFO - Device discovery started
2025-10-07 14:51:41,980 - app.main - INFO - Device discovery started
2025-10-07 14:51:41,980 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-07 14:51:41,980 - app.main - INFO - Device health monitoring started
2025-10-07 14:51:41,980 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-07 14:51:41,980 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-07 14:51:41,980 - app.main - INFO - Command queue processor started
2025-10-07 14:51:41,981 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-07 14:51:41,981 - app.main - INFO - History cleanup service started
2025-10-07 14:51:41,981 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-07 14:51:41,982 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-07 14:51:41,983 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-07 14:51:41,983 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-07 14:51:41,984 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-07 14:51:41,984 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-07 14:51:41,984 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-07 14:51:41,984 - apscheduler.scheduler - INFO - Scheduler started
2025-10-07 14:51:41,984 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-07 14:51:41,984 - app.main - INFO - Schedule processor started
2025-10-07 14:51:41,984 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-07 14:51:41,984 - app.main - INFO - Device status monitoring started
2025-10-07 14:51:41,984 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-07 14:51:41,984 - app.main - INFO - TV status polling service started
2025-10-07 14:51:41,984 - app.services.queue_processor - INFO - Worker 0 started
2025-10-07 14:51:41,989 - app.services.queue_processor - INFO - Worker 1 started
2025-10-07 14:51:41,989 - app.services.queue_processor - INFO - Worker 2 started
2025-10-07 14:51:41,990 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-08 03:00:00 (in 12.1 hours)
2025-10-07 14:51:41,996 - app.services.device_status_checker - INFO - Checking status of 3 devices
INFO:     Application startup complete.
2025-10-07 14:56:41,985 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 14:56:41,990 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 14:56:44,047 - app.services.device_status_checker - INFO - Checking status of 3 devices
2025-10-07 14:56:46,118 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 14:57:26,122 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: [Errno 104] Connection reset by peer
2025-10-07 14:57:26,122 - app.services.esphome_client - ERROR - Error retrieving capabilities from ir-dcf89f: Read failed
2025-10-07 14:57:26,122 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 14:57:26,125 - app.services.device_health - INFO - Health check complete: 1/1 devices online
2025-10-07 15:01:46,085 - app.services.device_status_checker - INFO - Checking status of 3 devices
2025-10-07 15:02:26,126 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 15:02:26,126 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 15:02:28,572 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 15:02:28,766 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 15:02:28,773 - app.services.device_health - INFO - Health check complete: 1/1 devices online
2025-10-07 15:06:48,123 - app.services.device_status_checker - INFO - Checking status of 3 devices
2025-10-07 15:07:28,774 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 15:07:28,774 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 15:07:31,436 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 15:07:31,637 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 15:07:31,641 - app.services.device_health - INFO - Health check complete: 1/1 devices online
2025-10-07 15:11:50,160 - app.services.device_status_checker - INFO - Checking status of 3 devices
2025-10-07 15:12:31,641 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 15:12:31,642 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 15:12:34,349 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 15:12:34,556 - aioesphomeapi.connection - ERROR - 192.168.101.146: disconnect request failed: 192.168.101.146: EOF received
2025-10-07 15:12:34,556 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 15:12:34,560 - app.services.device_health - INFO - Health check complete: 1/1 devices online
2025-10-07 15:16:52,213 - app.services.device_status_checker - INFO - Checking status of 3 devices
2025-10-07 15:17:34,560 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 15:17:34,560 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 15:17:37,227 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 15:17:37,440 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 15:17:37,444 - app.services.device_health - INFO - Health check complete: 1/1 devices online
2025-10-07 15:21:54,252 - app.services.device_status_checker - INFO - Checking status of 3 devices
2025-10-07 15:22:37,445 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 15:22:37,445 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 15:22:39,939 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 15:22:40,133 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 15:22:40,137 - app.services.device_health - INFO - Health check complete: 1/1 devices online
2025-10-07 15:26:56,290 - app.services.device_status_checker - INFO - Checking status of 3 devices
2025-10-07 15:27:40,136 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 15:27:40,137 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 15:27:42,803 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 15:27:43,015 - aioesphomeapi.connection - ERROR - 192.168.101.146: disconnect request failed: 192.168.101.146: EOF received
2025-10-07 15:27:43,015 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 15:27:43,019 - app.services.device_health - INFO - Health check complete: 1/1 devices online
2025-10-07 15:31:58,328 - app.services.device_status_checker - INFO - Checking status of 3 devices
2025-10-07 15:32:43,019 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 15:32:43,020 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 15:32:45,678 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 15:32:45,884 - aioesphomeapi.connection - ERROR - 192.168.101.146: disconnect request failed: 192.168.101.146: EOF received
2025-10-07 15:32:45,884 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 15:32:45,889 - app.services.device_health - INFO - Health check complete: 1/1 devices online
2025-10-07 15:37:00,366 - app.services.device_status_checker - INFO - Checking status of 3 devices
2025-10-07 15:37:45,888 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 15:37:45,889 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 15:37:49,171 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 15:37:49,389 - aioesphomeapi.connection - ERROR - 192.168.101.146: disconnect request failed: 192.168.101.146: EOF received
2025-10-07 15:37:49,389 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 15:37:49,393 - app.services.device_health - INFO - Health check complete: 1/1 devices online
WARNING:  WatchFiles detected changes in 'app/services/discovery.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-07 15:40:39,351 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-07 15:40:39,351 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-07 15:40:39,351 - app.main - INFO - TV status polling service stopped
2025-10-07 15:40:39,351 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-07 15:40:39,351 - app.main - INFO - Device status monitoring stopped
2025-10-07 15:40:39,351 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-07 15:40:39,351 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-07 15:40:39,351 - app.main - INFO - Schedule processor stopped
2025-10-07 15:40:39,351 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-07 15:40:39,352 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-07 15:40:39,352 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-07 15:40:39,352 - app.main - INFO - History cleanup service stopped
2025-10-07 15:40:39,352 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-07 15:40:39,352 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-07 15:40:39,352 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-07 15:40:39,352 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-07 15:40:39,352 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-07 15:40:39,352 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-07 15:40:39,352 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-07 15:40:39,352 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-07 15:40:39,352 - app.main - INFO - Command queue processor stopped
2025-10-07 15:40:39,352 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-07 15:40:39,352 - app.main - INFO - Device health monitoring stopped
2025-10-07 15:40:39,352 - app.services.discovery - INFO - Stopping device discovery...
2025-10-07 15:40:39,352 - app.services.discovery - INFO - Device discovery stopped
2025-10-07 15:40:39,352 - app.main - INFO - Device discovery stopped
INFO:     Application shutdown complete.
INFO:     Finished server process [585002]
Template seeding complete; using dynamic IR library system.
/home/coastal/smartvenue/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [587266]
INFO:     Waiting for application startup.
2025-10-07 15:40:41,043 - app.main - INFO - Starting SmartVenue backend...
2025-10-07 15:40:41,048 - app.main - INFO - Database tables created
2025-10-07 15:40:41,070 - app.main - INFO - Database initialized with seed data
2025-10-07 15:40:41,070 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-07 15:40:41,071 - app.services.discovery - INFO - Device discovery started
2025-10-07 15:40:41,071 - app.main - INFO - Device discovery started
2025-10-07 15:40:41,071 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-07 15:40:41,071 - app.main - INFO - Device health monitoring started
2025-10-07 15:40:41,072 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-07 15:40:41,072 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-07 15:40:41,072 - app.main - INFO - Command queue processor started
2025-10-07 15:40:41,072 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-07 15:40:41,072 - app.main - INFO - History cleanup service started
2025-10-07 15:40:41,072 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-07 15:40:41,073 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-07 15:40:41,075 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-07 15:40:41,075 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-07 15:40:41,075 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-07 15:40:41,075 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-07 15:40:41,076 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-07 15:40:41,076 - apscheduler.scheduler - INFO - Scheduler started
2025-10-07 15:40:41,076 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-07 15:40:41,076 - app.main - INFO - Schedule processor started
2025-10-07 15:40:41,076 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-07 15:40:41,076 - app.main - INFO - Device status monitoring started
2025-10-07 15:40:41,076 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-07 15:40:41,076 - app.main - INFO - TV status polling service started
2025-10-07 15:40:41,076 - app.services.queue_processor - INFO - Worker 0 started
2025-10-07 15:40:41,081 - app.services.queue_processor - INFO - Worker 1 started
2025-10-07 15:40:41,082 - app.services.queue_processor - INFO - Worker 2 started
2025-10-07 15:40:41,082 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-08 03:00:00 (in 11.3 hours)
2025-10-07 15:40:41,088 - app.services.device_status_checker - INFO - Checking status of 3 devices
INFO:     Application startup complete.
2025-10-07 15:40:43,186 - app.services.discovery - INFO - mDNS service discovered: ir._esphomelib._tcp.local.
2025-10-07 15:40:43,187 - app.services.discovery - INFO - Processing mDNS device: ir at 192.168.101.146:6053
2025-10-07 15:40:43,187 - app.services.discovery - INFO - Discovered ESPHome device: ir (192.168.101.146)
2025-10-07 15:40:43,187 - app.main - INFO - New device discovered: ir (192.168.101.146)
2025-10-07 15:40:43,243 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 15:40:43,243 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 15:40:43,243 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 15:40:43,243 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 15:40:43,286 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 15:40:43,286 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 15:40:43,286 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 15:40:43,286 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 15:40:43,310 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 15:40:43,311 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 15:40:43,311 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 15:40:43,311 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 15:40:43,342 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 15:40:43,342 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 15:40:43,342 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 15:40:43,342 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 15:40:43,342 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 15:40:43,343 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 15:40:43,343 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 15:40:43,343 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 15:40:44,198 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 15:40:44,198 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 15:40:44,198 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 15:40:44,198 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 15:40:44,203 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 15:40:44,203 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 15:40:44,203 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 15:40:44,203 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 15:40:44,355 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 15:40:44,356 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 15:40:44,356 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 15:40:44,356 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 15:40:57,388 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 15:40:57,389 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 15:40:57,389 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 15:40:57,389 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 15:40:57,454 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 15:40:57,454 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 15:40:57,455 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 15:40:57,455 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 15:40:57,490 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 15:40:57,491 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 15:40:57,491 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 15:40:57,491 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 15:43:36,435 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 15:43:36,435 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 15:43:36,435 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 15:43:36,435 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 15:45:41,077 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 15:45:41,082 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 15:45:43,140 - app.services.device_status_checker - INFO - Checking status of 3 devices
2025-10-07 15:45:51,084 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error while finishing connection: Finishing connection cancelled
2025-10-07 15:45:51,084 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dcf89f
2025-10-07 15:45:51,084 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: Connection lost
2025-10-07 15:45:54,146 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-07 15:45:57,218 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-07 15:45:58,150 - app.services.discovery - INFO - mDNS service discovered: ir._esphomelib._tcp.local.
2025-10-07 15:45:58,150 - app.services.discovery - INFO - Processing mDNS device: ir at 192.168.101.146:6053
2025-10-07 15:45:58,150 - app.services.discovery - INFO - Discovered ESPHome device: ir (192.168.101.146)
2025-10-07 15:45:58,150 - app.main - INFO - New device discovered: ir (192.168.101.146)
2025-10-07 15:46:00,290 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-07 15:46:03,362 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-07 15:46:06,434 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-07 15:46:09,506 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-07 15:46:09,568 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-07 15:46:12,642 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-07 15:46:15,714 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-07 15:46:18,786 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-07 15:46:21,232 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 15:46:21,244 - app.services.device_health - INFO - Found device ir-dcf89f at new IP: 192.168.101.146
2025-10-07 15:46:21,421 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 15:46:21,428 - app.services.device_health - INFO - Health check complete: 1/1 devices online
2025-10-07 15:50:45,179 - app.services.device_status_checker - INFO - Checking status of 3 devices
2025-10-07 15:51:21,429 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 15:51:21,429 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 15:51:24,260 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 15:51:24,475 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 15:51:24,491 - app.services.device_health - INFO - Health check complete: 1/1 devices online
2025-10-07 15:54:47,178 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 15:54:47,178 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 15:54:47,178 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 15:54:47,178 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 15:54:47,211 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 15:54:47,211 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 15:54:47,211 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 15:54:47,211 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 15:55:47,217 - app.services.device_status_checker - INFO - Checking status of 3 devices
2025-10-07 15:56:24,492 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 15:56:24,492 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 15:56:27,214 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 15:56:27,427 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 15:56:27,431 - app.services.device_health - INFO - Health check complete: 1/1 devices online
2025-10-07 16:00:49,256 - app.services.device_status_checker - INFO - Checking status of 3 devices
2025-10-07 16:01:27,431 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 16:01:27,431 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 16:01:30,110 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 16:01:30,340 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 16:01:30,344 - app.services.device_health - INFO - Health check complete: 1/1 devices online
2025-10-07 16:01:51,916 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 16:01:51,917 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 16:01:51,917 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 16:01:51,917 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 16:02:27,546 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 16:02:27,546 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 16:02:27,546 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 16:02:27,546 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 16:05:51,317 - app.services.device_status_checker - INFO - Checking status of 3 devices
2025-10-07 16:06:30,344 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 16:06:30,345 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 16:06:33,049 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 16:06:33,263 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 16:06:33,267 - app.services.device_health - INFO - Health check complete: 1/1 devices online
2025-10-07 16:07:34,774 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 16:07:34,774 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 16:07:34,774 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 16:07:34,774 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 16:08:51,024 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 16:08:51,024 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 16:08:51,024 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 16:08:51,024 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 16:08:51,093 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 16:08:51,093 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 16:08:51,094 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 16:08:51,094 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 16:10:53,355 - app.services.device_status_checker - INFO - Checking status of 3 devices
2025-10-07 16:11:04,771 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 16:11:04,771 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 16:11:04,771 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 16:11:04,772 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 16:11:33,267 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 16:11:33,267 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 16:11:35,748 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 16:11:35,964 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 16:11:35,968 - app.services.device_health - INFO - Health check complete: 1/1 devices online
WARNING:  WatchFiles detected changes in 'app/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-07 16:15:48,358 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-07 16:15:48,358 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-07 16:15:48,358 - app.main - INFO - TV status polling service stopped
2025-10-07 16:15:48,358 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-07 16:15:48,358 - app.main - INFO - Device status monitoring stopped
2025-10-07 16:15:48,358 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-07 16:15:48,358 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-07 16:15:48,358 - app.main - INFO - Schedule processor stopped
2025-10-07 16:15:48,358 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-07 16:15:48,358 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-07 16:15:48,358 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-07 16:15:48,358 - app.main - INFO - History cleanup service stopped
2025-10-07 16:15:48,358 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-07 16:15:48,358 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-07 16:15:48,359 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-07 16:15:48,359 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-07 16:15:48,359 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-07 16:15:48,359 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-07 16:15:48,359 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-07 16:15:48,359 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-07 16:15:48,359 - app.main - INFO - Command queue processor stopped
2025-10-07 16:15:48,359 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-07 16:15:48,359 - app.main - INFO - Device health monitoring stopped
2025-10-07 16:15:48,359 - app.services.discovery - INFO - Stopping device discovery...
2025-10-07 16:15:48,359 - app.services.discovery - INFO - Device discovery stopped
2025-10-07 16:15:48,359 - app.main - INFO - Device discovery stopped
INFO:     Application shutdown complete.
INFO:     Finished server process [587266]
Template seeding complete; using dynamic IR library system.
/home/coastal/smartvenue/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [592491]
INFO:     Waiting for application startup.
2025-10-07 16:15:50,030 - app.main - INFO - Starting SmartVenue backend...
2025-10-07 16:15:50,036 - app.main - INFO - Database tables created
2025-10-07 16:15:50,058 - app.main - INFO - Database initialized with seed data
2025-10-07 16:15:50,058 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-07 16:15:50,059 - app.services.discovery - INFO - Device discovery started
2025-10-07 16:15:50,059 - app.main - INFO - Device discovery started
2025-10-07 16:15:50,059 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-07 16:15:50,059 - app.main - INFO - Device health monitoring started
2025-10-07 16:15:50,059 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-07 16:15:50,059 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-07 16:15:50,059 - app.main - INFO - Command queue processor started
2025-10-07 16:15:50,059 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-07 16:15:50,059 - app.main - INFO - History cleanup service started
2025-10-07 16:15:50,059 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-07 16:15:50,060 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-07 16:15:50,062 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-07 16:15:50,062 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-07 16:15:50,062 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-07 16:15:50,063 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-07 16:15:50,063 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-07 16:15:50,063 - apscheduler.scheduler - INFO - Scheduler started
2025-10-07 16:15:50,063 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-07 16:15:50,063 - app.main - INFO - Schedule processor started
2025-10-07 16:15:50,063 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-07 16:15:50,063 - app.main - INFO - Device status monitoring started
2025-10-07 16:15:50,063 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-07 16:15:50,063 - app.main - INFO - TV status polling service started
2025-10-07 16:15:50,064 - app.services.queue_processor - INFO - Worker 0 started
2025-10-07 16:15:50,068 - app.services.queue_processor - INFO - Worker 1 started
2025-10-07 16:15:50,069 - app.services.queue_processor - INFO - Worker 2 started
2025-10-07 16:15:50,069 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-08 03:00:00 (in 10.7 hours)
2025-10-07 16:15:50,076 - app.services.device_status_checker - INFO - Checking status of 3 devices
INFO:     Application startup complete.
2025-10-07 16:15:52,287 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 16:15:52,288 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 16:15:52,288 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 16:15:52,288 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 16:15:52,299 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 16:15:52,326 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 16:15:52,326 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 16:15:52,326 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 16:15:52,326 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 16:15:52,331 - app.main - ERROR - Error saving discovered device to database: (sqlite3.IntegrityError) UNIQUE constraint failed: device_discoveries.hostname
[SQL: INSERT INTO device_discoveries (hostname, mac_address, ip_address, friendly_name, device_type, firmware_version, discovery_properties, is_managed) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, first_discovered, last_seen, created_at, updated_at]
[parameters: ('light-kitchen-right', 'right', '192.168.101.96', 'light-kitchen-right', 'universal', '2025.9.1', '{"friendly_name": "light-kitchen-right", "version": "2025.9.1", "mac": "c482e1bf8785", "platform": "BK7231T", "board": "generic-bk7231t-qfn32-tuya", "network": "wifi"}', 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-07 16:15:52,357 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 16:15:52,357 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 16:15:52,357 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 16:15:52,357 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 16:15:52,361 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 16:15:52,444 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 16:15:52,444 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 16:15:52,444 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 16:15:52,444 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 16:15:52,448 - app.main - ERROR - Error saving discovered device to database: (sqlite3.IntegrityError) UNIQUE constraint failed: device_discoveries.hostname
[SQL: INSERT INTO device_discoveries (hostname, mac_address, ip_address, friendly_name, device_type, firmware_version, discovery_properties, is_managed) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, first_discovered, last_seen, created_at, updated_at]
[parameters: ('light-kitchen-left', 'left', '192.168.101.114', 'light-kitchen-left', 'universal', '2025.9.1', '{"friendly_name": "light-kitchen-left", "version": "2025.9.1", "mac": "c482e1bf96d6", "platform": "BK7231T", "board": "generic-bk7231t-qfn32-tuya", "network": "wifi"}', 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-07 16:15:52,477 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 16:15:52,477 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 16:15:52,477 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 16:15:52,477 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 16:15:52,481 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 16:15:53,252 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 16:15:53,253 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 16:15:53,253 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 16:15:53,253 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 16:15:53,256 - app.main - INFO - Saved ir-dca09e to DeviceDiscovery table
2025-10-07 16:15:53,302 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 16:15:53,302 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 16:15:53,302 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 16:15:53,302 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 16:15:53,305 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 16:15:53,305 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 16:15:53,305 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 16:15:53,305 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 16:15:53,306 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 16:15:53,309 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 16:15:53,356 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 16:15:53,356 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 16:15:53,356 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 16:15:53,356 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 16:15:53,362 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-07 16:15:53,415 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 16:15:53,415 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 16:15:53,416 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 16:15:53,416 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 16:15:53,419 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 16:15:53,425 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 16:15:53,426 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 16:15:53,426 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 16:15:53,426 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 16:15:53,428 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 16:15:53,488 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 16:15:53,488 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 16:15:53,488 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 16:15:53,488 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 16:15:53,491 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 16:16:07,417 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 16:16:07,418 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 16:16:07,418 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 16:16:07,418 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 16:16:07,421 - app.main - INFO - Saved ir-dc4516 to DeviceDiscovery table
2025-10-07 16:20:50,064 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 16:20:50,065 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 16:20:52,128 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 16:20:54,167 - app.services.device_status_checker - INFO - Device nw-b85a97 status changed: online=True, power=on
2025-10-07 16:20:54,189 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 16:21:00,067 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error while finishing connection: Finishing connection cancelled
2025-10-07 16:21:00,067 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dcf89f
2025-10-07 16:21:00,067 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: Connection lost
2025-10-07 16:21:03,138 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-07 16:21:06,210 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-07 16:21:09,282 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-07 16:21:12,354 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-07 16:21:15,426 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-07 16:21:18,498 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-07 16:21:18,543 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-07 16:21:21,634 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-07 16:21:24,706 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-07 16:21:27,778 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-07 16:21:31,117 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 16:21:31,129 - app.services.device_health - INFO - Found device ir-dcf89f at new IP: 192.168.101.146
2025-10-07 16:21:31,365 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 16:21:31,580 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 16:21:31,585 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 16:21:43,376 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 16:21:43,376 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 16:21:43,376 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 16:21:43,376 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 16:21:43,382 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 16:25:54,171 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 16:26:31,586 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 16:26:31,586 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 16:26:34,047 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 16:26:41,587 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error while finishing connection: Finishing connection cancelled
2025-10-07 16:26:41,587 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dcf89f
2025-10-07 16:26:41,587 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: Connection lost
2025-10-07 16:26:44,642 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-07 16:26:47,714 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-07 16:26:48,598 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 16:26:48,598 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 16:26:48,598 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 16:26:48,598 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 16:26:48,602 - app.main - INFO - Saved ir-dc4516 to DeviceDiscovery table
2025-10-07 16:26:50,786 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-07 16:26:53,858 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-07 16:26:56,930 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-07 16:27:00,002 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-07 16:27:00,053 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-07 16:27:03,138 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-07 16:27:06,210 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-07 16:27:09,282 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-07 16:27:11,992 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 16:27:12,015 - app.services.device_health - INFO - Found device ir-dcf89f at new IP: 192.168.101.146
2025-10-07 16:27:12,233 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 16:27:12,418 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 16:27:12,422 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 16:29:56,212 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 16:29:56,212 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 16:29:56,212 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 16:29:56,212 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 16:29:56,219 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 16:29:56,232 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 16:29:56,233 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 16:29:56,233 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 16:29:56,233 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 16:29:56,236 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 16:30:56,214 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 16:32:12,423 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 16:32:12,423 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 16:32:15,139 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 16:32:15,195 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 16:32:15,430 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 16:32:15,614 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 16:32:15,618 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 16:35:58,255 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 16:37:15,618 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 16:37:15,619 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 16:37:18,342 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 16:37:18,358 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 16:37:18,576 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 16:37:18,766 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 16:37:18,771 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 16:39:54,153 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 16:39:54,153 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 16:39:54,153 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 16:39:54,153 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 16:39:54,156 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 16:41:00,295 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 16:42:18,771 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 16:42:18,771 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 16:42:20,707 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 16:42:20,707 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 16:42:20,708 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dcf89f
2025-10-07 16:42:21,463 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 16:42:23,714 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-07 16:42:26,786 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-07 16:42:29,858 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-07 16:42:32,930 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-07 16:42:36,002 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-07 16:42:39,074 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-07 16:42:39,078 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-07 16:42:42,146 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-07 16:42:45,218 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-07 16:42:48,290 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-07 16:42:50,077 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 16:42:50,078 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 16:42:53,154 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-07 16:42:56,226 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-07 16:42:59,298 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-07 16:43:02,370 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-07 16:43:05,442 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-07 16:43:08,514 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-07 16:43:08,515 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-07 16:43:11,586 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-07 16:43:21,587 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error while starting connection: Starting connection cancelled
2025-10-07 16:43:24,642 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-07 16:43:24,862 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 16:43:24,867 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 16:44:00,126 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 16:44:00,126 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 16:44:00,126 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 16:44:00,126 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 16:44:00,129 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 16:44:00,177 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 16:44:00,177 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 16:44:00,177 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 16:44:00,177 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 16:44:00,184 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 16:46:02,336 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 16:46:31,028 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 16:46:31,028 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 16:46:31,028 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 16:46:31,028 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 16:46:31,034 - app.main - INFO - Saved ir-dca09e to DeviceDiscovery table
2025-10-07 16:48:24,866 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 16:48:24,867 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 16:48:26,475 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 16:48:26,475 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 16:48:26,475 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dcf89f
2025-10-07 16:48:27,883 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 16:48:29,474 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-07 16:48:32,547 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-07 16:48:35,618 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-07 16:48:38,690 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-07 16:48:41,762 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-07 16:48:44,834 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-07 16:48:44,870 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-07 16:48:47,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-07 16:48:51,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-07 16:48:54,114 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-07 16:48:56,380 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 16:48:56,380 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 16:48:59,490 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-07 16:49:02,562 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-07 16:49:05,634 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-07 16:49:08,706 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-07 16:49:11,778 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-07 16:49:13,581 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 16:49:13,581 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 16:49:13,581 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 16:49:13,581 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 16:49:13,588 - app.main - INFO - Saved ir-dc4516 to DeviceDiscovery table
2025-10-07 16:49:14,850 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-07 16:49:14,851 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-07 16:49:17,922 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-07 16:49:27,922 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error while starting connection: Starting connection cancelled
2025-10-07 16:49:30,978 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-07 16:49:31,158 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 16:49:31,162 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 16:51:04,378 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 16:54:31,163 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 16:54:31,163 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 16:54:31,578 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 16:54:31,578 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 16:54:31,578 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 16:54:31,578 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 16:54:31,585 - app.main - INFO - Saved ir-dc4516 to DeviceDiscovery table
2025-10-07 16:54:33,793 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 16:54:34,040 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 16:54:34,238 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 16:54:34,418 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 16:54:34,422 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 16:56:06,422 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 16:58:03,885 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 16:58:03,885 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 16:58:03,885 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 16:58:03,885 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 16:58:03,888 - app.main - INFO - Saved ir-dca09e to DeviceDiscovery table
2025-10-07 16:58:03,967 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 16:58:03,967 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 16:58:03,967 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 16:58:03,968 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 16:58:03,973 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 16:58:04,002 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 16:58:04,002 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 16:58:04,002 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 16:58:04,002 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 16:58:04,008 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 16:58:04,010 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 16:58:04,011 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 16:58:04,011 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 16:58:04,011 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 16:58:04,013 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 16:58:04,013 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 16:58:04,014 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 16:58:04,014 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 16:58:04,014 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 16:58:04,017 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 16:58:04,047 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 16:58:04,047 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 16:58:04,047 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 16:58:04,047 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 16:58:04,050 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-07 16:58:04,054 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 16:58:04,055 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 16:58:04,055 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 16:58:04,055 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 16:58:04,062 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 16:58:04,062 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 16:58:04,063 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 16:58:04,063 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 16:58:04,063 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 16:58:04,065 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 16:58:04,070 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 16:58:04,070 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 16:58:04,070 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 16:58:04,070 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 16:58:04,081 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 16:58:04,101 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 16:58:04,101 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 16:58:04,101 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 16:58:04,101 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 16:58:04,107 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 16:58:04,112 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 16:58:04,112 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 16:58:04,113 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 16:58:04,113 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 16:58:04,115 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 16:58:04,122 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 16:58:04,122 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 16:58:04,122 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 16:58:04,122 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 16:58:04,125 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 16:59:34,421 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 16:59:34,422 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 16:59:36,810 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 16:59:37,069 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 16:59:37,267 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 16:59:37,445 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 16:59:37,450 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 17:00:31,982 - app.services.discovery - INFO - mDNS service discovered: oliversfan._esphomelib._tcp.local.
2025-10-07 17:00:31,982 - app.services.discovery - INFO - Processing mDNS device: oliversfan at 192.168.101.24:6053
2025-10-07 17:00:31,982 - app.services.discovery - INFO - Discovered ESPHome device: oliversfan (192.168.101.24)
2025-10-07 17:00:31,982 - app.main - INFO - New device discovered: oliversfan (192.168.101.24)
2025-10-07 17:00:31,985 - app.main - INFO - Saved oliversfan to DeviceDiscovery table
2025-10-07 17:01:08,465 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 17:01:22,906 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 17:01:22,907 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 17:01:22,907 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 17:01:22,907 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 17:01:22,913 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 17:04:37,450 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 17:04:37,450 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 17:04:39,843 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 17:04:39,900 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 17:04:40,111 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 17:04:40,299 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 17:04:40,303 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 17:06:10,507 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 17:09:40,303 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 17:09:40,303 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 17:09:43,024 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 17:09:44,219 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 17:09:44,418 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 17:09:44,607 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 17:09:44,612 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 17:10:30,866 - app.services.queue_processor - INFO - Worker 0 executing command 2: power_off on ir-dcf89f port 2 (attempt 1)
2025-10-07 17:10:30,876 - app.services.queue_processor - INFO - Worker 1 executing command 1: power_off on ir-dcf89f port 1 (attempt 1)
2025-10-07 17:11:00,871 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: Timeout during handshake
2025-10-07 17:11:00,875 - app.services.queue_processor - WARNING - ‚úó Worker 0 failed command 2: Command execution failed (attempt 1)
2025-10-07 17:11:00,875 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: Connection lost
2025-10-07 17:11:00,878 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: Timeout during handshake
2025-10-07 17:11:00,882 - app.services.queue_processor - WARNING - ‚úó Worker 1 failed command 1: Command execution failed (attempt 1)
2025-10-07 17:11:00,882 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: Connection lost
2025-10-07 17:11:02,881 - app.services.queue_processor - INFO - Worker 0 executing command 2: power_off on ir-dcf89f port 2 (attempt 2)
2025-10-07 17:11:02,887 - app.services.queue_processor - INFO - Worker 1 executing command 1: power_off on ir-dcf89f port 1 (attempt 2)
2025-10-07 17:11:05,813 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 17:11:05,814 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 17:11:05,967 - app.services.esphome_client - INFO - Called service 'tv_power_off' on ir-dcf89f with data: {'port': 1}
2025-10-07 17:11:05,973 - app.services.queue_processor - INFO - ‚úì Worker 1 completed command 1 in 3079ms
2025-10-07 17:11:05,974 - app.services.esphome_client - INFO - Called service 'tv_power_off' on ir-dcf89f with data: {'port': 2}
2025-10-07 17:11:05,979 - app.services.queue_processor - INFO - ‚úì Worker 0 completed command 2 in 3092ms
2025-10-07 17:11:12,546 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 17:11:15,597 - app.services.device_status_checker - INFO - Device nw-b85a97 status changed: online=False, power=off
2025-10-07 17:12:07,910 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 17:12:07,910 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 17:12:07,910 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 17:12:07,910 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 17:12:07,913 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 17:12:07,974 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 17:12:07,974 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 17:12:07,974 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 17:12:07,974 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 17:12:07,981 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
WARNING:  WatchFiles detected changes in 'app/api/hybrid_devices.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-07 17:13:47,248 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-07 17:13:47,248 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-07 17:13:47,248 - app.main - INFO - TV status polling service stopped
2025-10-07 17:13:47,248 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-07 17:13:47,248 - app.main - INFO - Device status monitoring stopped
2025-10-07 17:13:47,248 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-07 17:13:47,248 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-07 17:13:47,249 - app.main - INFO - Schedule processor stopped
2025-10-07 17:13:47,249 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-07 17:13:47,249 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-07 17:13:47,249 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-07 17:13:47,249 - app.main - INFO - History cleanup service stopped
2025-10-07 17:13:47,249 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-07 17:13:47,249 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-07 17:13:47,249 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-07 17:13:47,249 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-07 17:13:47,249 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-07 17:13:47,249 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-07 17:13:47,249 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-07 17:13:47,249 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-07 17:13:47,249 - app.main - INFO - Command queue processor stopped
2025-10-07 17:13:47,249 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-07 17:13:47,249 - app.main - INFO - Device health monitoring stopped
2025-10-07 17:13:47,249 - app.services.discovery - INFO - Stopping device discovery...
2025-10-07 17:13:47,250 - app.services.discovery - INFO - Device discovery stopped
2025-10-07 17:13:47,250 - app.main - INFO - Device discovery stopped
INFO:     Application shutdown complete.
INFO:     Finished server process [592491]
Template seeding complete; using dynamic IR library system.
/home/coastal/smartvenue/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [593229]
INFO:     Waiting for application startup.
2025-10-07 17:13:48,941 - app.main - INFO - Starting SmartVenue backend...
2025-10-07 17:13:48,947 - app.main - INFO - Database tables created
2025-10-07 17:13:48,969 - app.main - INFO - Database initialized with seed data
2025-10-07 17:13:48,969 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-07 17:13:48,970 - app.services.discovery - INFO - Device discovery started
2025-10-07 17:13:48,970 - app.main - INFO - Device discovery started
2025-10-07 17:13:48,970 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-07 17:13:48,970 - app.main - INFO - Device health monitoring started
2025-10-07 17:13:48,970 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-07 17:13:48,970 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-07 17:13:48,970 - app.main - INFO - Command queue processor started
2025-10-07 17:13:48,970 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-07 17:13:48,970 - app.main - INFO - History cleanup service started
2025-10-07 17:13:48,971 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-07 17:13:48,972 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-07 17:13:48,974 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-07 17:13:48,974 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-07 17:13:48,974 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-07 17:13:48,974 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-07 17:13:48,974 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-07 17:13:48,975 - apscheduler.scheduler - INFO - Scheduler started
2025-10-07 17:13:48,975 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-07 17:13:48,975 - app.main - INFO - Schedule processor started
2025-10-07 17:13:48,975 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-07 17:13:48,975 - app.main - INFO - Device status monitoring started
2025-10-07 17:13:48,975 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-07 17:13:48,975 - app.main - INFO - TV status polling service started
2025-10-07 17:13:48,975 - app.services.queue_processor - INFO - Worker 0 started
2025-10-07 17:13:48,980 - app.services.queue_processor - INFO - Worker 1 started
2025-10-07 17:13:48,980 - app.services.queue_processor - INFO - Worker 2 started
2025-10-07 17:13:48,981 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-08 03:00:00 (in 9.8 hours)
2025-10-07 17:13:48,988 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     Application startup complete.
2025-10-07 17:13:52,146 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 17:13:52,146 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 17:13:52,146 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 17:13:52,146 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 17:13:52,156 - app.main - INFO - Saved ir-dc4516 to DeviceDiscovery table
2025-10-07 17:13:52,230 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 17:13:52,230 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 17:13:52,230 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 17:13:52,230 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 17:13:52,237 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 17:13:52,328 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 17:13:52,329 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 17:13:52,329 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 17:13:52,329 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 17:13:52,336 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 17:13:52,336 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 17:13:52,337 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 17:13:52,337 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 17:13:52,337 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 17:13:52,339 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 17:13:52,417 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 17:13:52,418 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 17:13:52,418 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 17:13:52,418 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 17:13:52,421 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 17:13:53,165 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 17:13:53,165 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 17:13:53,165 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 17:13:53,165 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 17:13:53,169 - app.main - INFO - Saved ir-dca09e to DeviceDiscovery table
2025-10-07 17:13:53,217 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 17:13:53,217 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 17:13:53,217 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 17:13:53,217 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 17:13:53,224 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 17:13:53,253 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 17:13:53,253 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 17:13:53,253 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 17:13:53,253 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 17:13:53,260 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 17:13:53,260 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 17:13:53,260 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 17:13:53,260 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 17:13:53,261 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 17:13:53,264 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 17:13:53,334 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 17:13:53,334 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 17:13:53,334 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 17:13:53,334 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 17:13:53,340 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 17:13:53,354 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 17:13:53,354 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 17:13:53,354 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 17:13:53,354 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 17:13:53,361 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 17:13:53,376 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 17:13:53,376 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 17:13:53,376 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 17:13:53,376 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 17:13:53,382 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 17:13:53,402 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 17:13:53,402 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 17:13:53,402 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 17:13:53,402 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 17:13:53,405 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
WARNING:  WatchFiles detected changes in 'app/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-07 17:16:11,601 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-07 17:16:11,601 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-07 17:16:11,601 - app.main - INFO - TV status polling service stopped
2025-10-07 17:16:11,601 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-07 17:16:11,601 - app.main - INFO - Device status monitoring stopped
2025-10-07 17:16:11,601 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-07 17:16:11,601 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-07 17:16:11,601 - app.main - INFO - Schedule processor stopped
2025-10-07 17:16:11,601 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-07 17:16:11,601 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-07 17:16:11,601 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-07 17:16:11,601 - app.main - INFO - History cleanup service stopped
2025-10-07 17:16:11,601 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-07 17:16:11,601 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-07 17:16:11,601 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-07 17:16:11,601 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-07 17:16:11,601 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-07 17:16:11,601 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-07 17:16:11,601 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-07 17:16:11,601 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-07 17:16:11,601 - app.main - INFO - Command queue processor stopped
2025-10-07 17:16:11,601 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-07 17:16:11,601 - app.main - INFO - Device health monitoring stopped
2025-10-07 17:16:11,601 - app.services.discovery - INFO - Stopping device discovery...
2025-10-07 17:16:11,602 - app.services.discovery - INFO - Device discovery stopped
2025-10-07 17:16:11,602 - app.main - INFO - Device discovery stopped
INFO:     Application shutdown complete.
INFO:     Finished server process [593229]
Template seeding complete; using dynamic IR library system.
/home/coastal/smartvenue/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [593277]
INFO:     Waiting for application startup.
2025-10-07 17:16:13,240 - app.main - INFO - Starting SmartVenue backend...
2025-10-07 17:16:13,245 - app.main - INFO - Database tables created
2025-10-07 17:16:13,267 - app.main - INFO - Database initialized with seed data
2025-10-07 17:16:13,267 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-07 17:16:13,268 - app.services.discovery - INFO - Device discovery started
2025-10-07 17:16:13,268 - app.main - INFO - Device discovery started
2025-10-07 17:16:13,268 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-07 17:16:13,268 - app.main - INFO - Device health monitoring started
2025-10-07 17:16:13,268 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-07 17:16:13,268 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-07 17:16:13,268 - app.main - INFO - Command queue processor started
2025-10-07 17:16:13,268 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-07 17:16:13,268 - app.main - INFO - History cleanup service started
2025-10-07 17:16:13,268 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-07 17:16:13,269 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-07 17:16:13,271 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-07 17:16:13,271 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-07 17:16:13,271 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-07 17:16:13,271 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-07 17:16:13,272 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-07 17:16:13,272 - apscheduler.scheduler - INFO - Scheduler started
2025-10-07 17:16:13,272 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-07 17:16:13,272 - app.main - INFO - Schedule processor started
2025-10-07 17:16:13,272 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-07 17:16:13,272 - app.main - INFO - Device status monitoring started
2025-10-07 17:16:13,272 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-07 17:16:13,272 - app.main - INFO - TV status polling service started
2025-10-07 17:16:13,273 - app.services.queue_processor - INFO - Worker 0 started
2025-10-07 17:16:13,277 - app.services.queue_processor - INFO - Worker 1 started
2025-10-07 17:16:13,278 - app.services.queue_processor - INFO - Worker 2 started
2025-10-07 17:16:13,278 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-08 03:00:00 (in 9.7 hours)
2025-10-07 17:16:13,285 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     Application startup complete.
2025-10-07 17:16:16,404 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 17:16:16,404 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 17:16:16,404 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 17:16:16,404 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 17:16:16,413 - app.main - INFO - Saved ir-dc4516 to DeviceDiscovery table
2025-10-07 17:16:16,413 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 17:16:16,413 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 17:16:16,413 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 17:16:16,413 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 17:16:16,416 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 17:16:16,516 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 17:16:16,517 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 17:16:16,517 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 17:16:16,517 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 17:16:16,520 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 17:16:16,560 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 17:16:16,561 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 17:16:16,561 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 17:16:16,561 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 17:16:16,564 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 17:16:16,566 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 17:16:16,566 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 17:16:16,567 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 17:16:16,567 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 17:16:16,570 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 17:16:16,635 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 17:16:16,636 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 17:16:16,636 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 17:16:16,636 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 17:16:16,643 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 17:16:17,431 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 17:16:17,432 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 17:16:17,432 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 17:16:17,432 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 17:16:17,438 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 17:16:17,485 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 17:16:17,485 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 17:16:17,485 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 17:16:17,485 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 17:16:17,488 - app.main - INFO - Saved ir-dca09e to DeviceDiscovery table
2025-10-07 17:16:17,543 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 17:16:17,543 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 17:16:17,543 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 17:16:17,544 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 17:16:17,547 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 17:16:17,590 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 17:16:17,590 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 17:16:17,591 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 17:16:17,591 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 17:16:17,594 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-07 17:16:17,637 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 17:16:17,637 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 17:16:17,637 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 17:16:17,637 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 17:16:17,640 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 17:16:17,672 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 17:16:17,672 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 17:16:17,672 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 17:16:17,672 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 17:16:17,675 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 17:16:17,738 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 17:16:17,738 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 17:16:17,738 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 17:16:17,738 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 17:16:17,741 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 17:21:13,273 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 17:21:13,275 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 17:21:15,043 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:21:15,044 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:21:15,044 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dcf89f
2025-10-07 17:21:15,779 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 17:21:16,356 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 17:21:19,411 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-07 17:21:22,466 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-07 17:21:23,000 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 17:21:23,001 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 17:21:23,001 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 17:21:23,001 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 17:21:23,007 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 17:21:25,538 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-07 17:21:28,610 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-07 17:21:31,682 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-07 17:21:34,754 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-07 17:21:34,797 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-07 17:21:37,890 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-07 17:21:40,962 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-07 17:21:44,034 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-07 17:21:46,072 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:21:46,072 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:21:49,154 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-07 17:21:52,226 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-07 17:21:55,298 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-07 17:21:58,370 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-07 17:22:01,442 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-07 17:22:04,514 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-07 17:22:04,515 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-07 17:22:07,586 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-07 17:22:17,587 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error while starting connection: Starting connection cancelled
2025-10-07 17:22:20,642 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-07 17:22:20,848 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 17:22:20,855 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 17:24:40,939 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 17:24:40,939 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 17:24:40,939 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 17:24:40,939 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 17:24:40,942 - app.main - INFO - Saved ir-dca09e to DeviceDiscovery table
2025-10-07 17:26:19,410 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 17:27:20,856 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 17:27:20,856 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 17:27:23,204 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:27:23,204 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:27:23,204 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dcf89f
2025-10-07 17:27:23,293 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 17:27:26,306 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-07 17:27:29,378 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-07 17:27:32,450 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-07 17:27:35,522 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-07 17:27:37,571 - app.services.queue_processor - INFO - Worker 0 executing command 4: power_on on ir-dcf89f port 1 (attempt 1)
2025-10-07 17:27:38,594 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-07 17:27:39,019 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:27:39,019 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:27:39,023 - app.services.queue_processor - WARNING - ‚úó Worker 0 failed command 4: Command execution failed (attempt 1)
2025-10-07 17:27:41,029 - app.services.queue_processor - INFO - Worker 0 executing command 4: power_on on ir-dcf89f port 1 (attempt 2)
2025-10-07 17:27:41,666 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-07 17:27:41,705 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-07 17:27:42,805 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:27:42,805 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:27:42,809 - app.services.queue_processor - WARNING - ‚úó Worker 0 failed command 4: Command execution failed (attempt 2)
2025-10-07 17:27:44,802 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-07 17:27:46,817 - app.services.queue_processor - INFO - Worker 0 executing command 4: power_on on ir-dcf89f port 1 (attempt 3)
2025-10-07 17:27:47,874 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-07 17:27:48,466 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:27:48,466 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:27:48,472 - app.services.queue_processor - WARNING - ‚úó Worker 0 failed command 4: Command execution failed (attempt 3)
2025-10-07 17:27:50,946 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-07 17:27:53,024 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:27:53,024 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:27:56,130 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-07 17:27:59,202 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-07 17:28:02,275 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-07 17:28:05,346 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-07 17:28:08,418 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-07 17:28:11,490 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-07 17:28:11,491 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-07 17:28:14,562 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-07 17:28:24,563 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error while starting connection: Starting connection cancelled
2025-10-07 17:28:27,618 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-07 17:28:27,821 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 17:28:27,826 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 17:29:09,065 - app.services.queue_processor - INFO - Worker 0 executing command 5: power on ir-dcf89f port 1 (attempt 1)
2025-10-07 17:29:11,270 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:29:11,271 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:29:11,274 - app.services.queue_processor - WARNING - ‚úó Worker 0 failed command 5: Command execution failed (attempt 1)
2025-10-07 17:29:13,280 - app.services.queue_processor - INFO - Worker 0 executing command 5: power on ir-dcf89f port 1 (attempt 2)
2025-10-07 17:29:14,973 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:29:14,973 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:29:14,976 - app.services.queue_processor - WARNING - ‚úó Worker 0 failed command 5: Command execution failed (attempt 2)
2025-10-07 17:29:18,986 - app.services.queue_processor - INFO - Worker 0 executing command 5: power on ir-dcf89f port 1 (attempt 3)
2025-10-07 17:29:20,640 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:29:20,640 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:29:20,644 - app.services.queue_processor - WARNING - ‚úó Worker 0 failed command 5: Command execution failed (attempt 3)
2025-10-07 17:30:20,377 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 17:30:20,377 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 17:30:20,377 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 17:30:20,377 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 17:30:20,384 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 17:30:20,453 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 17:30:20,453 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 17:30:20,453 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 17:30:20,453 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 17:30:20,456 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 17:30:20,728 - app.services.queue_processor - INFO - Worker 0 executing command 6: power_on on ir-dcf89f port 1 (attempt 1)
2025-10-07 17:30:23,443 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:30:23,443 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:30:23,447 - app.services.queue_processor - WARNING - ‚úó Worker 0 failed command 6: Command execution failed (attempt 1)
2025-10-07 17:30:25,454 - app.services.queue_processor - INFO - Worker 0 executing command 6: power_on on ir-dcf89f port 1 (attempt 2)
2025-10-07 17:30:27,107 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:30:27,108 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:30:27,111 - app.services.queue_processor - WARNING - ‚úó Worker 0 failed command 6: Command execution failed (attempt 2)
2025-10-07 17:30:31,121 - app.services.queue_processor - INFO - Worker 0 executing command 6: power_on on ir-dcf89f port 1 (attempt 3)
2025-10-07 17:30:32,676 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:30:32,676 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:30:32,680 - app.services.queue_processor - WARNING - ‚úó Worker 0 failed command 6: Command execution failed (attempt 3)
2025-10-07 17:31:22,465 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 17:33:27,826 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 17:33:27,826 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 17:33:30,098 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:33:30,098 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:33:30,098 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dcf89f
2025-10-07 17:33:30,502 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 17:33:33,154 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-07 17:33:36,226 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-07 17:33:38,209 - app.services.queue_processor - INFO - Worker 0 executing command 7: power_off on ir-dcf89f port 1 (attempt 1)
2025-10-07 17:33:39,298 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-07 17:33:39,900 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:33:39,900 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:33:39,903 - app.services.queue_processor - WARNING - ‚úó Worker 0 failed command 7: Command execution failed (attempt 1)
2025-10-07 17:33:41,909 - app.services.queue_processor - INFO - Worker 0 executing command 7: power_off on ir-dcf89f port 1 (attempt 2)
2025-10-07 17:33:42,370 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-07 17:33:43,598 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:33:43,598 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:33:43,602 - app.services.queue_processor - WARNING - ‚úó Worker 0 failed command 7: Command execution failed (attempt 2)
2025-10-07 17:33:45,442 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-07 17:33:47,613 - app.services.queue_processor - INFO - Worker 0 executing command 7: power_off on ir-dcf89f port 1 (attempt 3)
2025-10-07 17:33:48,514 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-07 17:33:48,615 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-07 17:33:49,314 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:33:49,314 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:33:49,318 - app.services.queue_processor - WARNING - ‚úó Worker 0 failed command 7: Command execution failed (attempt 3)
2025-10-07 17:33:51,714 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-07 17:33:54,786 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-07 17:33:57,858 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-07 17:33:59,460 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:33:59,460 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:34:02,466 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-07 17:34:05,538 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-07 17:34:08,610 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-07 17:34:11,682 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-07 17:34:14,754 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-07 17:34:17,826 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-07 17:34:17,827 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-07 17:34:20,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-07 17:34:30,899 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error while starting connection: Starting connection cancelled
2025-10-07 17:34:33,954 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-07 17:34:34,143 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 17:34:34,148 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 17:34:39,786 - app.services.queue_processor - INFO - Worker 1 executing command 8: volume_up on ir-dcf89f port 1 (attempt 1)
2025-10-07 17:34:41,511 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:34:41,511 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:34:41,515 - app.services.queue_processor - WARNING - ‚úó Worker 1 failed command 8: Command execution failed (attempt 1)
2025-10-07 17:34:42,296 - app.services.queue_processor - INFO - Worker 2 executing command 9: volume_up on ir-dcf89f port 1 (attempt 1)
2025-10-07 17:34:43,521 - app.services.queue_processor - INFO - Worker 1 executing command 8: volume_up on ir-dcf89f port 1 (attempt 2)
2025-10-07 17:34:43,998 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:34:43,998 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:34:44,002 - app.services.queue_processor - WARNING - ‚úó Worker 2 failed command 9: Command execution failed (attempt 1)
2025-10-07 17:34:44,096 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:34:44,096 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:34:44,100 - app.services.queue_processor - WARNING - ‚úó Worker 1 failed command 8: Command execution failed (attempt 2)
2025-10-07 17:34:46,008 - app.services.queue_processor - INFO - Worker 2 executing command 9: volume_up on ir-dcf89f port 1 (attempt 2)
2025-10-07 17:34:46,347 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:34:46,348 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:34:46,351 - app.services.queue_processor - WARNING - ‚úó Worker 2 failed command 9: Command execution failed (attempt 2)
2025-10-07 17:34:48,107 - app.services.queue_processor - INFO - Worker 1 executing command 8: volume_up on ir-dcf89f port 1 (attempt 3)
2025-10-07 17:34:49,766 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:34:49,767 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:34:49,770 - app.services.queue_processor - WARNING - ‚úó Worker 1 failed command 8: Command execution failed (attempt 3)
2025-10-07 17:34:50,361 - app.services.queue_processor - INFO - Worker 2 executing command 9: volume_up on ir-dcf89f port 1 (attempt 3)
2025-10-07 17:34:52,093 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-07 17:34:52,093 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: 192.168.101.146: EOF received
2025-10-07 17:34:52,097 - app.services.queue_processor - WARNING - ‚úó Worker 2 failed command 9: Command execution failed (attempt 3)
2025-10-07 17:36:25,520 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 17:36:27,559 - app.services.device_status_checker - INFO - Device nw-b85a97 status changed: online=True, power=on
2025-10-07 17:39:34,147 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 17:39:34,148 - app.services.device_health - INFO - Checking health of 3 managed devices
2025-10-07 17:39:34,260 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 17:39:34,260 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 17:39:34,260 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 17:39:34,260 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 17:39:34,264 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 17:39:36,588 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 17:39:44,148 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error while finishing connection: Finishing connection cancelled
2025-10-07 17:39:44,148 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dcf89f
2025-10-07 17:39:44,148 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: Connection lost
2025-10-07 17:39:44,148 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while finishing connection: Finishing connection cancelled
2025-10-07 17:39:44,148 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 17:39:44,149 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: Connection lost
2025-10-07 17:39:47,234 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-07 17:39:47,234 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-07 17:39:50,306 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-07 17:39:50,306 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-07 17:39:50,756 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 17:39:50,757 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 17:39:50,757 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 17:39:50,757 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 17:39:50,763 - app.main - INFO - Saved ir-dc4516 to DeviceDiscovery table
2025-10-07 17:39:53,378 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-07 17:39:53,378 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-07 17:39:56,450 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-07 17:39:56,450 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-07 17:39:59,522 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-07 17:39:59,522 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-07 17:40:02,594 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-07 17:40:02,594 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-07 17:40:02,693 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-07 17:40:02,693 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-07 17:40:05,794 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-07 17:40:05,794 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-07 17:40:08,866 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-07 17:40:08,866 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-07 17:40:11,938 - app.services.esphome_client - ERROR - Failed to connect to ir-dcf89f: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-07 17:40:11,938 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-07 17:40:12,862 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: The connection dropped immediately after encrypted hello; Try enabling encryption on the device or turning off encryption on the client (aioesphomeapi).
2025-10-07 17:40:12,862 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: Connection closed
2025-10-07 17:40:14,678 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dcf89f
2025-10-07 17:40:14,689 - app.services.device_health - INFO - Found device ir-dcf89f at new IP: 192.168.101.146
2025-10-07 17:40:15,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-07 17:40:19,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-07 17:40:22,114 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-07 17:40:25,186 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-07 17:40:28,258 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-07 17:40:31,330 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-07 17:40:31,331 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-07 17:40:34,402 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-07 17:40:44,402 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-07 17:40:47,458 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-07 17:41:01,477 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: [Errno 104] Connection reset by peer
2025-10-07 17:41:01,478 - app.services.esphome_client - ERROR - Error retrieving capabilities from ir-dcf89f: Read failed
2025-10-07 17:41:01,478 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dcf89f
2025-10-07 17:41:01,665 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 17:41:01,667 - app.services.device_health - ERROR - Error during health check: UPDATE statement on table 'managed_devices' expected to update 1 row(s); 0 were matched.
2025-10-07 17:41:27,563 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 17:44:24,243 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 17:44:24,243 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 17:44:24,243 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 17:44:24,243 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 17:44:24,250 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 17:44:24,317 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 17:44:24,317 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 17:44:24,317 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 17:44:24,317 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 17:44:24,321 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 17:46:01,666 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 17:46:01,667 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 17:46:04,457 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 17:46:11,667 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while finishing connection: Finishing connection cancelled
2025-10-07 17:46:11,667 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 17:46:11,667 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: Connection lost
2025-10-07 17:46:14,754 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-07 17:46:17,826 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-07 17:46:18,731 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 17:46:18,732 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 17:46:18,732 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 17:46:18,732 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 17:46:18,738 - app.main - INFO - Saved ir-dc4516 to DeviceDiscovery table
2025-10-07 17:46:20,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-07 17:46:23,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-07 17:46:27,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-07 17:46:29,605 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 17:46:31,647 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-07 17:46:31,716 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-07 17:46:34,786 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-07 17:46:37,858 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-07 17:46:40,930 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
WARNING:  WatchFiles detected changes in 'app/api/device_management.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-07 17:46:43,268 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-07 17:46:43,268 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-07 17:46:43,268 - app.main - INFO - TV status polling service stopped
2025-10-07 17:46:43,268 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-07 17:46:43,269 - app.main - INFO - Device status monitoring stopped
2025-10-07 17:46:43,269 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-07 17:46:43,269 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-07 17:46:43,269 - app.main - INFO - Schedule processor stopped
2025-10-07 17:46:43,269 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-07 17:46:43,269 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-07 17:46:43,269 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-07 17:46:43,269 - app.main - INFO - History cleanup service stopped
2025-10-07 17:46:43,269 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-07 17:46:43,269 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-07 17:46:43,269 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-07 17:46:43,269 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-07 17:46:43,269 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-07 17:46:43,269 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-07 17:46:43,269 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-07 17:46:43,269 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-07 17:46:43,269 - app.main - INFO - Command queue processor stopped
2025-10-07 17:46:43,269 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-07 17:46:43,269 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while finishing connection: Finishing connection cancelled
2025-10-07 17:46:43,269 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: Connection lost
2025-10-07 17:46:46,242 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-07 17:46:49,314 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-07 17:46:52,386 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-07 17:46:55,458 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-07 17:46:58,530 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-07 17:47:01,602 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-07 17:47:01,603 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-07 17:47:04,674 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-07 17:47:14,676 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-07 17:47:17,730 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-07 17:47:17,731 - app.main - INFO - Device health monitoring stopped
2025-10-07 17:47:17,731 - app.services.discovery - INFO - Stopping device discovery...
2025-10-07 17:47:17,731 - app.services.discovery - INFO - Device discovery stopped
2025-10-07 17:47:17,731 - app.main - INFO - Device discovery stopped
INFO:     Application shutdown complete.
INFO:     Finished server process [593277]
Template seeding complete; using dynamic IR library system.
/home/coastal/smartvenue/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [594906]
INFO:     Waiting for application startup.
2025-10-07 17:47:19,381 - app.main - INFO - Starting SmartVenue backend...
2025-10-07 17:47:19,387 - app.main - INFO - Database tables created
2025-10-07 17:47:19,409 - app.main - INFO - Database initialized with seed data
2025-10-07 17:47:19,409 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-07 17:47:19,410 - app.services.discovery - INFO - Device discovery started
2025-10-07 17:47:19,411 - app.main - INFO - Device discovery started
2025-10-07 17:47:19,411 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-07 17:47:19,411 - app.main - INFO - Device health monitoring started
2025-10-07 17:47:19,411 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-07 17:47:19,411 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-07 17:47:19,411 - app.main - INFO - Command queue processor started
2025-10-07 17:47:19,411 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-07 17:47:19,411 - app.main - INFO - History cleanup service started
2025-10-07 17:47:19,411 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-07 17:47:19,412 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-07 17:47:19,414 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-07 17:47:19,414 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-07 17:47:19,414 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-07 17:47:19,414 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-07 17:47:19,415 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-07 17:47:19,415 - apscheduler.scheduler - INFO - Scheduler started
2025-10-07 17:47:19,415 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-07 17:47:19,415 - app.main - INFO - Schedule processor started
2025-10-07 17:47:19,415 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-07 17:47:19,415 - app.main - INFO - Device status monitoring started
2025-10-07 17:47:19,415 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-07 17:47:19,415 - app.main - INFO - TV status polling service started
2025-10-07 17:47:19,415 - app.services.queue_processor - INFO - Worker 0 started
2025-10-07 17:47:19,421 - app.services.queue_processor - INFO - Worker 1 started
2025-10-07 17:47:19,421 - app.services.queue_processor - INFO - Worker 2 started
2025-10-07 17:47:19,422 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-08 03:00:00 (in 9.2 hours)
2025-10-07 17:47:19,429 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     Application startup complete.
2025-10-07 17:47:21,614 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 17:47:21,614 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 17:47:21,614 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 17:47:21,614 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 17:47:21,623 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 17:47:21,635 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 17:47:21,636 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 17:47:21,636 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 17:47:21,636 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 17:47:21,642 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 17:47:21,674 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 17:47:21,674 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 17:47:21,674 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 17:47:21,674 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 17:47:21,677 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 17:47:21,694 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 17:47:21,694 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 17:47:21,694 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 17:47:21,694 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 17:47:21,697 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 17:47:21,711 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 17:47:21,712 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 17:47:21,712 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 17:47:21,712 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 17:47:21,714 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 17:47:22,604 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 17:47:22,605 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 17:47:22,605 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 17:47:22,605 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 17:47:22,608 - app.main - INFO - Saved ir-dca09e to DeviceDiscovery table
2025-10-07 17:47:22,665 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 17:47:22,665 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 17:47:22,666 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 17:47:22,666 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 17:47:22,672 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 17:47:22,681 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 17:47:22,681 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 17:47:22,681 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 17:47:22,681 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 17:47:22,684 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 17:47:22,698 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 17:47:22,698 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 17:47:22,698 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 17:47:22,698 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 17:47:22,701 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 17:47:22,763 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 17:47:22,763 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 17:47:22,763 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 17:47:22,763 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 17:47:22,766 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 17:47:22,766 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 17:47:22,767 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 17:47:22,767 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 17:47:22,767 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 17:47:22,770 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 17:47:22,844 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 17:47:22,844 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 17:47:22,845 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 17:47:22,845 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 17:47:22,847 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-07 17:47:25,229 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 17:47:25,230 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 17:47:25,230 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 17:47:25,230 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 17:47:25,236 - app.main - INFO - Saved ir-dc4516 to DeviceDiscovery table
WARNING:  WatchFiles detected changes in 'app/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-07 17:47:28,199 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-07 17:47:28,199 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-07 17:47:28,199 - app.main - INFO - TV status polling service stopped
2025-10-07 17:47:28,199 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-07 17:47:28,199 - app.main - INFO - Device status monitoring stopped
2025-10-07 17:47:28,199 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-07 17:47:28,199 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-07 17:47:28,199 - app.main - INFO - Schedule processor stopped
2025-10-07 17:47:28,200 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-07 17:47:28,200 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-07 17:47:28,200 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-07 17:47:28,200 - app.main - INFO - History cleanup service stopped
2025-10-07 17:47:28,200 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-07 17:47:28,200 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-07 17:47:28,200 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-07 17:47:28,200 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-07 17:47:28,200 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-07 17:47:28,200 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-07 17:47:28,200 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-07 17:47:28,200 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-07 17:47:28,200 - app.main - INFO - Command queue processor stopped
2025-10-07 17:47:28,200 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-07 17:47:28,200 - app.main - INFO - Device health monitoring stopped
2025-10-07 17:47:28,200 - app.services.discovery - INFO - Stopping device discovery...
2025-10-07 17:47:28,200 - app.services.discovery - INFO - Device discovery stopped
2025-10-07 17:47:28,200 - app.main - INFO - Device discovery stopped
INFO:     Application shutdown complete.
INFO:     Finished server process [594906]
Template seeding complete; using dynamic IR library system.
/home/coastal/smartvenue/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [594934]
INFO:     Waiting for application startup.
2025-10-07 17:47:29,863 - app.main - INFO - Starting SmartVenue backend...
2025-10-07 17:47:29,868 - app.main - INFO - Database tables created
2025-10-07 17:47:29,889 - app.main - INFO - Database initialized with seed data
2025-10-07 17:47:29,889 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-07 17:47:29,890 - app.services.discovery - INFO - Device discovery started
2025-10-07 17:47:29,890 - app.main - INFO - Device discovery started
2025-10-07 17:47:29,890 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-07 17:47:29,890 - app.main - INFO - Device health monitoring started
2025-10-07 17:47:29,891 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-07 17:47:29,891 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-07 17:47:29,891 - app.main - INFO - Command queue processor started
2025-10-07 17:47:29,891 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-07 17:47:29,891 - app.main - INFO - History cleanup service started
2025-10-07 17:47:29,891 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-07 17:47:29,892 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-07 17:47:29,894 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-07 17:47:29,894 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-07 17:47:29,894 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-07 17:47:29,894 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-07 17:47:29,895 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-07 17:47:29,895 - apscheduler.scheduler - INFO - Scheduler started
2025-10-07 17:47:29,895 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-07 17:47:29,895 - app.main - INFO - Schedule processor started
2025-10-07 17:47:29,895 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-07 17:47:29,895 - app.main - INFO - Device status monitoring started
2025-10-07 17:47:29,895 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-07 17:47:29,895 - app.main - INFO - TV status polling service started
2025-10-07 17:47:29,895 - app.services.queue_processor - INFO - Worker 0 started
2025-10-07 17:47:29,900 - app.services.queue_processor - INFO - Worker 1 started
2025-10-07 17:47:29,900 - app.services.queue_processor - INFO - Worker 2 started
2025-10-07 17:47:29,901 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-08 03:00:00 (in 9.2 hours)
2025-10-07 17:47:29,907 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     Application startup complete.
2025-10-07 17:47:31,966 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 17:47:31,967 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 17:47:31,967 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 17:47:31,967 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 17:47:31,973 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 17:47:32,069 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 17:47:32,069 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 17:47:32,069 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 17:47:32,069 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 17:47:32,070 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-07 17:47:32,139 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 17:47:32,139 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 17:47:32,139 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 17:47:32,139 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 17:47:32,140 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-07 17:47:32,205 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 17:47:32,206 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 17:47:32,206 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 17:47:32,206 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 17:47:32,206 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-07 17:47:32,321 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 17:47:32,321 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 17:47:32,321 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 17:47:32,321 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 17:47:32,322 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-07 17:47:33,075 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 17:47:33,075 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 17:47:33,075 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 17:47:33,075 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 17:47:33,076 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-07 17:47:33,105 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 17:47:33,106 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 17:47:33,106 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 17:47:33,106 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 17:47:33,106 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-07 17:47:33,111 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 17:47:33,111 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 17:47:33,111 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 17:47:33,111 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 17:47:33,112 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-07 17:47:33,117 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 17:47:33,117 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 17:47:33,117 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 17:47:33,117 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 17:47:33,118 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-07 17:47:33,201 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 17:47:33,201 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 17:47:33,201 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 17:47:33,201 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 17:47:33,202 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-07 17:47:33,218 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 17:47:33,218 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 17:47:33,218 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 17:47:33,218 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 17:47:33,219 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-07 17:47:33,291 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 17:47:33,291 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 17:47:33,291 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 17:47:33,291 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 17:47:33,292 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-07 17:47:37,254 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 17:47:37,254 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 17:47:37,254 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 17:47:37,254 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 17:47:37,255 - app.main - ERROR - Error saving discovered device to database: no running event loop
WARNING:  WatchFiles detected changes in 'app/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-07 17:48:12,834 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-07 17:48:12,834 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-07 17:48:12,834 - app.main - INFO - TV status polling service stopped
2025-10-07 17:48:12,834 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-07 17:48:12,834 - app.main - INFO - Device status monitoring stopped
2025-10-07 17:48:12,834 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-07 17:48:12,834 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-07 17:48:12,834 - app.main - INFO - Schedule processor stopped
2025-10-07 17:48:12,834 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-07 17:48:12,834 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-07 17:48:12,834 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-07 17:48:12,834 - app.main - INFO - History cleanup service stopped
2025-10-07 17:48:12,835 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-07 17:48:12,835 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-07 17:48:12,835 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-07 17:48:12,835 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-07 17:48:12,835 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-07 17:48:12,835 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-07 17:48:12,835 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-07 17:48:12,835 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-07 17:48:12,835 - app.main - INFO - Command queue processor stopped
2025-10-07 17:48:12,835 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-07 17:48:12,835 - app.main - INFO - Device health monitoring stopped
2025-10-07 17:48:12,835 - app.services.discovery - INFO - Stopping device discovery...
2025-10-07 17:48:12,835 - app.services.discovery - INFO - Device discovery stopped
2025-10-07 17:48:12,835 - app.main - INFO - Device discovery stopped
INFO:     Application shutdown complete.
INFO:     Finished server process [594934]
Template seeding complete; using dynamic IR library system.
/home/coastal/smartvenue/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [594962]
INFO:     Waiting for application startup.
2025-10-07 17:48:14,476 - app.main - INFO - Starting SmartVenue backend...
2025-10-07 17:48:14,482 - app.main - INFO - Database tables created
2025-10-07 17:48:14,504 - app.main - INFO - Database initialized with seed data
2025-10-07 17:48:14,504 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-07 17:48:14,505 - app.services.discovery - INFO - Device discovery started
2025-10-07 17:48:14,505 - app.main - INFO - Device discovery started
2025-10-07 17:48:14,505 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-07 17:48:14,505 - app.main - INFO - Device health monitoring started
2025-10-07 17:48:14,505 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-07 17:48:14,506 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-07 17:48:14,506 - app.main - INFO - Command queue processor started
2025-10-07 17:48:14,506 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-07 17:48:14,506 - app.main - INFO - History cleanup service started
2025-10-07 17:48:14,506 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-07 17:48:14,507 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-07 17:48:14,509 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-07 17:48:14,509 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-07 17:48:14,509 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-07 17:48:14,509 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-07 17:48:14,509 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-07 17:48:14,509 - apscheduler.scheduler - INFO - Scheduler started
2025-10-07 17:48:14,510 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-07 17:48:14,510 - app.main - INFO - Schedule processor started
2025-10-07 17:48:14,510 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-07 17:48:14,510 - app.main - INFO - Device status monitoring started
2025-10-07 17:48:14,510 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-07 17:48:14,510 - app.main - INFO - TV status polling service started
2025-10-07 17:48:14,510 - app.services.queue_processor - INFO - Worker 0 started
2025-10-07 17:48:14,515 - app.services.queue_processor - INFO - Worker 1 started
2025-10-07 17:48:14,516 - app.services.queue_processor - INFO - Worker 2 started
2025-10-07 17:48:14,516 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-08 03:00:00 (in 9.2 hours)
2025-10-07 17:48:14,523 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     Application startup complete.
2025-10-07 17:48:16,642 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 17:48:16,642 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 17:48:16,642 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 17:48:16,642 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 17:48:16,647 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 17:48:16,669 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 17:48:16,670 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 17:48:16,670 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 17:48:16,670 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 17:48:16,673 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 17:48:16,690 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 17:48:16,691 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 17:48:16,691 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 17:48:16,691 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 17:48:16,694 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 17:48:16,709 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 17:48:16,709 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 17:48:16,710 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 17:48:16,710 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 17:48:16,712 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 17:48:16,753 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 17:48:16,753 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 17:48:16,754 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 17:48:16,754 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 17:48:16,758 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 17:48:16,773 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 17:48:16,773 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 17:48:16,773 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 17:48:16,773 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 17:48:16,776 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 17:48:17,639 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 17:48:17,640 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 17:48:17,640 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 17:48:17,640 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 17:48:17,640 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-07 17:48:17,718 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 17:48:17,719 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 17:48:17,719 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 17:48:17,719 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 17:48:17,722 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 17:48:17,732 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 17:48:17,732 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 17:48:17,732 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 17:48:17,732 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 17:48:17,735 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 17:48:17,798 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 17:48:17,798 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 17:48:17,798 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 17:48:17,798 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 17:48:17,801 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 17:48:17,845 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 17:48:17,845 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 17:48:17,845 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 17:48:17,845 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 17:48:17,848 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 17:48:17,857 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 17:48:17,857 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 17:48:17,857 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 17:48:17,857 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 17:48:17,860 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 17:48:17,880 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 17:48:17,880 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 17:48:17,880 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 17:48:17,880 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 17:48:17,883 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
WARNING:  WatchFiles detected changes in 'app/api/device_management.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-07 17:48:21,287 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-07 17:48:21,287 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-07 17:48:21,287 - app.main - INFO - TV status polling service stopped
2025-10-07 17:48:21,287 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-07 17:48:21,287 - app.main - INFO - Device status monitoring stopped
2025-10-07 17:48:21,287 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-07 17:48:21,287 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-07 17:48:21,287 - app.main - INFO - Schedule processor stopped
2025-10-07 17:48:21,287 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-07 17:48:21,287 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-07 17:48:21,287 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-07 17:48:21,287 - app.main - INFO - History cleanup service stopped
2025-10-07 17:48:21,287 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-07 17:48:21,287 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-07 17:48:21,287 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-07 17:48:21,287 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-07 17:48:21,287 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-07 17:48:21,288 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-07 17:48:21,288 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-07 17:48:21,288 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-07 17:48:21,288 - app.main - INFO - Command queue processor stopped
2025-10-07 17:48:21,288 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-07 17:48:21,288 - app.main - INFO - Device health monitoring stopped
2025-10-07 17:48:21,288 - app.services.discovery - INFO - Stopping device discovery...
2025-10-07 17:48:21,288 - app.services.discovery - INFO - Device discovery stopped
2025-10-07 17:48:21,288 - app.main - INFO - Device discovery stopped
INFO:     Application shutdown complete.
INFO:     Finished server process [594962]
Template seeding complete; using dynamic IR library system.
/home/coastal/smartvenue/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [594986]
INFO:     Waiting for application startup.
2025-10-07 17:48:22,951 - app.main - INFO - Starting SmartVenue backend...
2025-10-07 17:48:22,957 - app.main - INFO - Database tables created
2025-10-07 17:48:22,978 - app.main - INFO - Database initialized with seed data
2025-10-07 17:48:22,978 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-07 17:48:22,979 - app.services.discovery - INFO - Device discovery started
2025-10-07 17:48:22,979 - app.main - INFO - Device discovery started
2025-10-07 17:48:22,979 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-07 17:48:22,979 - app.main - INFO - Device health monitoring started
2025-10-07 17:48:22,979 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-07 17:48:22,979 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-07 17:48:22,979 - app.main - INFO - Command queue processor started
2025-10-07 17:48:22,980 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-07 17:48:22,980 - app.main - INFO - History cleanup service started
2025-10-07 17:48:22,980 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-07 17:48:22,981 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-07 17:48:22,982 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-07 17:48:22,982 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-07 17:48:22,982 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-07 17:48:22,982 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-07 17:48:22,983 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-07 17:48:22,983 - apscheduler.scheduler - INFO - Scheduler started
2025-10-07 17:48:22,983 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-07 17:48:22,983 - app.main - INFO - Schedule processor started
2025-10-07 17:48:22,983 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-07 17:48:22,983 - app.main - INFO - Device status monitoring started
2025-10-07 17:48:22,983 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-07 17:48:22,983 - app.main - INFO - TV status polling service started
2025-10-07 17:48:22,983 - app.services.queue_processor - INFO - Worker 0 started
2025-10-07 17:48:22,988 - app.services.queue_processor - INFO - Worker 1 started
2025-10-07 17:48:22,988 - app.services.queue_processor - INFO - Worker 2 started
2025-10-07 17:48:22,989 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-08 03:00:00 (in 9.2 hours)
2025-10-07 17:48:22,995 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     Application startup complete.
2025-10-07 17:48:25,053 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 17:48:25,053 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 17:48:25,054 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 17:48:25,054 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 17:48:25,059 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 17:48:25,087 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 17:48:25,087 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 17:48:25,088 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 17:48:25,088 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 17:48:25,092 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 17:48:25,111 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 17:48:25,112 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 17:48:25,112 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 17:48:25,112 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 17:48:25,115 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 17:48:25,145 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 17:48:25,145 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 17:48:25,145 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 17:48:25,145 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 17:48:25,148 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-07 17:48:25,185 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 17:48:25,185 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 17:48:25,185 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 17:48:25,185 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 17:48:25,192 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 17:48:25,201 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 17:48:25,201 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 17:48:25,201 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 17:48:25,201 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 17:48:25,204 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 17:48:25,273 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 17:48:25,273 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 17:48:25,273 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 17:48:25,273 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 17:48:25,276 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 17:48:26,127 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 17:48:26,127 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 17:48:26,127 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 17:48:26,127 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 17:48:26,131 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 17:48:26,149 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 17:48:26,149 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 17:48:26,149 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 17:48:26,149 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 17:48:26,152 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 17:48:26,174 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 17:48:26,174 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 17:48:26,174 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 17:48:26,174 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 17:48:26,178 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 17:48:26,184 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 17:48:26,184 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 17:48:26,184 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 17:48:26,184 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 17:48:26,190 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 17:48:39,210 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 17:48:39,211 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 17:48:39,211 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 17:48:39,211 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 17:48:39,214 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 17:48:40,103 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 17:48:40,103 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 17:48:40,103 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 17:48:40,103 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 17:48:40,104 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-07 17:53:22,983 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 17:53:22,985 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 17:53:25,050 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 17:53:27,113 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 17:53:32,988 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while finishing connection: Finishing connection cancelled
2025-10-07 17:53:32,988 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 17:53:32,988 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: Connection lost
2025-10-07 17:53:35,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-07 17:53:39,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-07 17:53:42,115 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-07 17:53:45,186 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-07 17:53:48,258 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-07 17:53:51,330 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-07 17:53:51,334 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-07 17:53:54,402 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-07 17:53:57,474 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-07 17:54:00,546 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-07 17:54:03,504 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 17:54:03,519 - app.services.device_health - INFO - Found device ir-dc4516 at new IP: 192.168.101.146
2025-10-07 17:54:03,751 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 17:54:03,984 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 17:54:03,989 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 17:56:02,454 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 17:56:02,455 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 17:56:02,455 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 17:56:02,455 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 17:56:02,455 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 17:58:27,093 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 17:59:03,990 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 17:59:03,990 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 17:59:06,933 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 17:59:07,127 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 17:59:07,133 - app.services.device_health - INFO - Health check complete: 1/1 devices online
2025-10-07 17:59:28,824 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 17:59:28,824 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 17:59:28,824 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 17:59:28,825 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 17:59:28,831 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 18:02:21,578 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 18:02:21,579 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 18:02:21,579 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 18:02:21,579 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 18:02:21,583 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 18:02:21,591 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 18:02:21,591 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 18:02:21,591 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 18:02:21,591 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 18:02:21,597 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 18:02:48,350 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 18:02:48,350 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 18:02:48,350 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 18:02:48,350 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 18:02:48,351 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 18:03:29,135 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 18:04:07,133 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 18:04:07,134 - app.services.device_health - INFO - Checking health of 1 managed devices
2025-10-07 18:04:09,883 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 18:04:10,084 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 18:04:10,088 - app.services.device_health - INFO - Health check complete: 1/1 devices online
2025-10-07 18:08:31,184 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 18:09:10,087 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 18:09:10,088 - app.services.device_health - INFO - Checking health of 2 managed devices
WARNING:  WatchFiles detected changes in 'app/routers/network_tv.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-07 18:09:10,696 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-07 18:09:10,696 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-07 18:09:10,696 - app.main - INFO - TV status polling service stopped
2025-10-07 18:09:10,696 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-07 18:09:10,696 - app.main - INFO - Device status monitoring stopped
2025-10-07 18:09:10,696 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-07 18:09:10,696 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-07 18:09:10,696 - app.main - INFO - Schedule processor stopped
2025-10-07 18:09:10,697 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-07 18:09:10,697 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-07 18:09:10,697 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-07 18:09:10,697 - app.main - INFO - History cleanup service stopped
2025-10-07 18:09:10,697 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-07 18:09:10,697 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-07 18:09:10,697 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-07 18:09:10,697 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-07 18:09:10,697 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-07 18:09:10,697 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-07 18:09:10,697 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-07 18:09:10,697 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-07 18:09:10,697 - app.main - INFO - Command queue processor stopped
2025-10-07 18:09:10,697 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-07 18:09:10,697 - app.services.esphome_client - ERROR - Failed to connect to ir-dca09e: Error while finishing connection: Finishing connection cancelled
2025-10-07 18:09:10,697 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dca09e
2025-10-07 18:09:10,697 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while finishing connection: Finishing connection cancelled
2025-10-07 18:09:10,697 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 18:09:10,698 - aioesphomeapi.connection - WARNING - 192.168.101.132: Connection error occurred: 192.168.101.132: Connection lost
2025-10-07 18:09:10,698 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: Connection lost
2025-10-07 18:09:10,811 - app.services.esphome_client - ERROR - Failed to connect to ir-dca09e: Error connecting to ('192.168.101.122', 6053): [Errno 111] Connect call failed ('192.168.101.122', 6053)
2025-10-07 18:09:13,762 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-07 18:09:13,890 - app.services.esphome_client - ERROR - Failed to connect to ir-dca09e: Error connecting to ('192.168.101.123', 6053): [Errno 113] Connect call failed ('192.168.101.123', 6053)
2025-10-07 18:09:16,834 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-07 18:09:16,962 - app.services.esphome_client - ERROR - Failed to connect to ir-dca09e: Error connecting to ('192.168.101.124', 6053): [Errno 113] Connect call failed ('192.168.101.124', 6053)
2025-10-07 18:09:19,906 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-07 18:09:22,978 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-07 18:09:26,050 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-07 18:09:26,963 - app.services.esphome_client - ERROR - Failed to connect to ir-dca09e: Error while starting connection: Starting connection cancelled
2025-10-07 18:09:29,122 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-07 18:09:29,223 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-07 18:09:30,018 - app.services.esphome_client - ERROR - Failed to connect to ir-dca09e: Error connecting to ('192.168.101.126', 6053): [Errno 113] Connect call failed ('192.168.101.126', 6053)
2025-10-07 18:09:32,322 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-07 18:09:33,090 - app.services.esphome_client - ERROR - Failed to connect to ir-dca09e: Error connecting to ('192.168.101.127', 6053): [Errno 113] Connect call failed ('192.168.101.127', 6053)
2025-10-07 18:09:33,092 - app.services.esphome_client - ERROR - Failed to connect to ir-dca09e: Error connecting to ('192.168.101.128', 6053): [Errno 111] Connect call failed ('192.168.101.128', 6053)
2025-10-07 18:09:35,394 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-07 18:09:36,162 - app.services.esphome_client - ERROR - Failed to connect to ir-dca09e: Error connecting to ('192.168.101.129', 6053): [Errno 113] Connect call failed ('192.168.101.129', 6053)
2025-10-07 18:09:38,466 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-07 18:09:46,164 - app.services.esphome_client - ERROR - Failed to connect to ir-dca09e: Error while starting connection: Starting connection cancelled
2025-10-07 18:09:48,467 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-07 18:09:49,218 - app.services.esphome_client - ERROR - Failed to connect to ir-dca09e: Error connecting to ('192.168.101.131', 6053): [Errno 113] Connect call failed ('192.168.101.131', 6053)
2025-10-07 18:09:51,522 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-07 18:09:52,022 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 18:09:52,048 - app.services.device_health - INFO - Found device ir-dca09e at new IP: 192.168.101.132
2025-10-07 18:09:54,594 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-07 18:09:57,666 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-07 18:10:00,738 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-07 18:10:03,810 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-07 18:10:06,882 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-07 18:10:06,883 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-07 18:10:09,954 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-07 18:10:19,960 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-07 18:10:23,010 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-07 18:10:23,011 - app.main - INFO - Device health monitoring stopped
2025-10-07 18:10:23,011 - app.services.discovery - INFO - Stopping device discovery...
2025-10-07 18:10:23,011 - app.services.discovery - INFO - Device discovery stopped
2025-10-07 18:10:23,011 - app.main - INFO - Device discovery stopped
INFO:     Application shutdown complete.
INFO:     Finished server process [594986]
Template seeding complete; using dynamic IR library system.
WARNING:  WatchFiles detected changes in 'app/routers/network_tv.py'. Reloading...
/home/coastal/smartvenue/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [595898]
INFO:     Waiting for application startup.
2025-10-07 18:10:24,962 - app.main - INFO - Starting SmartVenue backend...
2025-10-07 18:10:24,968 - app.main - INFO - Database tables created
2025-10-07 18:10:24,989 - app.main - INFO - Database initialized with seed data
2025-10-07 18:10:24,989 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-07 18:10:24,991 - app.services.discovery - INFO - Device discovery started
2025-10-07 18:10:24,991 - app.main - INFO - Device discovery started
2025-10-07 18:10:24,991 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-07 18:10:24,991 - app.main - INFO - Device health monitoring started
2025-10-07 18:10:24,991 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-07 18:10:24,991 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-07 18:10:24,991 - app.main - INFO - Command queue processor started
2025-10-07 18:10:24,991 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-07 18:10:24,991 - app.main - INFO - History cleanup service started
2025-10-07 18:10:24,991 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-07 18:10:24,992 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-07 18:10:24,994 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-07 18:10:24,994 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-07 18:10:24,994 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-07 18:10:24,995 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-07 18:10:24,995 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-07 18:10:24,995 - apscheduler.scheduler - INFO - Scheduler started
2025-10-07 18:10:24,995 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-07 18:10:24,995 - app.main - INFO - Schedule processor started
2025-10-07 18:10:24,995 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-07 18:10:24,995 - app.main - INFO - Device status monitoring started
2025-10-07 18:10:24,995 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-07 18:10:24,996 - app.main - INFO - TV status polling service started
2025-10-07 18:10:24,996 - app.services.queue_processor - INFO - Worker 0 started
2025-10-07 18:10:25,001 - app.services.queue_processor - INFO - Worker 1 started
2025-10-07 18:10:25,002 - app.services.queue_processor - INFO - Worker 2 started
2025-10-07 18:10:25,002 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-08 03:00:00 (in 8.8 hours)
2025-10-07 18:10:25,009 - app.services.device_status_checker - INFO - Checking status of 3 devices
INFO:     Application startup complete.
2025-10-07 18:10:27,097 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 18:10:27,098 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 18:10:27,098 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 18:10:27,098 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 18:10:27,103 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 18:10:27,113 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 18:10:27,113 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 18:10:27,113 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 18:10:27,113 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 18:10:27,118 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 18:10:27,251 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 18:10:27,251 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 18:10:27,252 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 18:10:27,252 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 18:10:27,255 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 18:10:27,262 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 18:10:27,263 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 18:10:27,263 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 18:10:27,263 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 18:10:27,266 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 18:10:27,302 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 18:10:27,302 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 18:10:27,302 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 18:10:27,302 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 18:10:27,306 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 18:10:27,683 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 18:10:27,684 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 18:10:27,684 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 18:10:27,684 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 18:10:27,687 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 18:10:28,097 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 18:10:28,097 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 18:10:28,097 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 18:10:28,097 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 18:10:28,098 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-07 18:10:28,149 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 18:10:28,149 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 18:10:28,149 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 18:10:28,149 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 18:10:28,152 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 18:10:28,294 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 18:10:28,294 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 18:10:28,294 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 18:10:28,294 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 18:10:28,300 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 18:10:28,575 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 18:10:28,575 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 18:10:28,575 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 18:10:28,575 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 18:10:28,578 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 18:10:32,274 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 18:10:32,275 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 18:10:32,275 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 18:10:32,275 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 18:10:32,278 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 18:10:41,236 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 18:10:41,237 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 18:10:41,237 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 18:10:41,237 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 18:10:41,240 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
WARNING:  WatchFiles detected changes in 'app/routers/network_tv.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-07 18:13:15,924 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-07 18:13:15,924 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-07 18:13:15,924 - app.main - INFO - TV status polling service stopped
2025-10-07 18:13:15,924 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-07 18:13:15,924 - app.main - INFO - Device status monitoring stopped
2025-10-07 18:13:15,924 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-07 18:13:15,925 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-07 18:13:15,925 - app.main - INFO - Schedule processor stopped
2025-10-07 18:13:15,925 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-07 18:13:15,925 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-07 18:13:15,925 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-07 18:13:15,925 - app.main - INFO - History cleanup service stopped
2025-10-07 18:13:15,925 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-07 18:13:15,925 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-07 18:13:15,925 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-07 18:13:15,925 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-07 18:13:15,925 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-07 18:13:15,925 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-07 18:13:15,925 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-07 18:13:15,925 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-07 18:13:15,925 - app.main - INFO - Command queue processor stopped
2025-10-07 18:13:15,925 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-07 18:13:15,925 - app.main - INFO - Device health monitoring stopped
2025-10-07 18:13:15,925 - app.services.discovery - INFO - Stopping device discovery...
2025-10-07 18:13:15,925 - app.services.discovery - INFO - Device discovery stopped
2025-10-07 18:13:15,925 - app.main - INFO - Device discovery stopped
INFO:     Application shutdown complete.
INFO:     Finished server process [595898]
Template seeding complete; using dynamic IR library system.
/home/coastal/smartvenue/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [596036]
INFO:     Waiting for application startup.
2025-10-07 18:13:17,574 - app.main - INFO - Starting SmartVenue backend...
2025-10-07 18:13:17,580 - app.main - INFO - Database tables created
2025-10-07 18:13:17,601 - app.main - INFO - Database initialized with seed data
2025-10-07 18:13:17,601 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-07 18:13:17,602 - app.services.discovery - INFO - Device discovery started
2025-10-07 18:13:17,602 - app.main - INFO - Device discovery started
2025-10-07 18:13:17,602 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-07 18:13:17,602 - app.main - INFO - Device health monitoring started
2025-10-07 18:13:17,602 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-07 18:13:17,602 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-07 18:13:17,602 - app.main - INFO - Command queue processor started
2025-10-07 18:13:17,602 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-07 18:13:17,602 - app.main - INFO - History cleanup service started
2025-10-07 18:13:17,603 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-07 18:13:17,604 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-07 18:13:17,605 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-07 18:13:17,606 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-07 18:13:17,606 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-07 18:13:17,606 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-07 18:13:17,606 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-07 18:13:17,606 - apscheduler.scheduler - INFO - Scheduler started
2025-10-07 18:13:17,606 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-07 18:13:17,606 - app.main - INFO - Schedule processor started
2025-10-07 18:13:17,606 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-07 18:13:17,607 - app.main - INFO - Device status monitoring started
2025-10-07 18:13:17,607 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-07 18:13:17,607 - app.main - INFO - TV status polling service started
2025-10-07 18:13:17,607 - app.services.queue_processor - INFO - Worker 0 started
2025-10-07 18:13:17,611 - app.services.queue_processor - INFO - Worker 1 started
2025-10-07 18:13:17,612 - app.services.queue_processor - INFO - Worker 2 started
2025-10-07 18:13:17,613 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-08 03:00:00 (in 8.8 hours)
2025-10-07 18:13:17,619 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     Application startup complete.
2025-10-07 18:13:19,751 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 18:13:19,751 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 18:13:19,751 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 18:13:19,751 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 18:13:19,760 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 18:13:19,774 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 18:13:19,774 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 18:13:19,774 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 18:13:19,774 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 18:13:19,777 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 18:13:19,796 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 18:13:19,796 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 18:13:19,796 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 18:13:19,796 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 18:13:19,803 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 18:13:19,803 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 18:13:19,803 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 18:13:19,804 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 18:13:19,804 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 18:13:19,806 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 18:13:19,936 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 18:13:19,937 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 18:13:19,937 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 18:13:19,937 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 18:13:19,940 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 18:13:20,715 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 18:13:20,715 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 18:13:20,715 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 18:13:20,715 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 18:13:20,716 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 18:13:20,803 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 18:13:20,803 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 18:13:20,803 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 18:13:20,803 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 18:13:20,806 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 18:13:20,817 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 18:13:20,817 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 18:13:20,817 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 18:13:20,817 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 18:13:20,820 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-07 18:13:20,841 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 18:13:20,841 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 18:13:20,841 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 18:13:20,842 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 18:13:20,845 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 18:13:20,879 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 18:13:20,880 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 18:13:20,880 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 18:13:20,880 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 18:13:20,883 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 18:13:20,888 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 18:13:20,888 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 18:13:20,888 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 18:13:20,888 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 18:13:20,891 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 18:13:20,928 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 18:13:20,928 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 18:13:20,928 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 18:13:20,928 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 18:13:20,931 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
WARNING:  WatchFiles detected changes in 'app/routers/network_tv.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-07 18:13:22,083 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-07 18:13:22,084 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-07 18:13:22,084 - app.main - INFO - TV status polling service stopped
2025-10-07 18:13:22,084 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-07 18:13:22,084 - app.main - INFO - Device status monitoring stopped
2025-10-07 18:13:22,084 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-07 18:13:22,084 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-07 18:13:22,084 - app.main - INFO - Schedule processor stopped
2025-10-07 18:13:22,084 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-07 18:13:22,084 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-07 18:13:22,084 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-07 18:13:22,084 - app.main - INFO - History cleanup service stopped
2025-10-07 18:13:22,084 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-07 18:13:22,084 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-07 18:13:22,084 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-07 18:13:22,084 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-07 18:13:22,084 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-07 18:13:22,084 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-07 18:13:22,084 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-07 18:13:22,084 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-07 18:13:22,084 - app.main - INFO - Command queue processor stopped
2025-10-07 18:13:22,084 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-07 18:13:22,084 - app.main - INFO - Device health monitoring stopped
2025-10-07 18:13:22,084 - app.services.discovery - INFO - Stopping device discovery...
2025-10-07 18:13:22,085 - app.services.discovery - INFO - Device discovery stopped
2025-10-07 18:13:22,085 - app.main - INFO - Device discovery stopped
INFO:     Application shutdown complete.
INFO:     Finished server process [596036]
Template seeding complete; using dynamic IR library system.
/home/coastal/smartvenue/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [596062]
INFO:     Waiting for application startup.
2025-10-07 18:13:23,708 - app.main - INFO - Starting SmartVenue backend...
2025-10-07 18:13:23,713 - app.main - INFO - Database tables created
2025-10-07 18:13:23,734 - app.main - INFO - Database initialized with seed data
2025-10-07 18:13:23,735 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-07 18:13:23,736 - app.services.discovery - INFO - Device discovery started
2025-10-07 18:13:23,736 - app.main - INFO - Device discovery started
2025-10-07 18:13:23,736 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-07 18:13:23,736 - app.main - INFO - Device health monitoring started
2025-10-07 18:13:23,736 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-07 18:13:23,736 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-07 18:13:23,736 - app.main - INFO - Command queue processor started
2025-10-07 18:13:23,736 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-07 18:13:23,736 - app.main - INFO - History cleanup service started
2025-10-07 18:13:23,736 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-07 18:13:23,737 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-07 18:13:23,738 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-07 18:13:23,739 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-07 18:13:23,739 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-07 18:13:23,739 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-07 18:13:23,739 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-07 18:13:23,739 - apscheduler.scheduler - INFO - Scheduler started
2025-10-07 18:13:23,739 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-07 18:13:23,739 - app.main - INFO - Schedule processor started
2025-10-07 18:13:23,739 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-07 18:13:23,739 - app.main - INFO - Device status monitoring started
2025-10-07 18:13:23,739 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-07 18:13:23,739 - app.main - INFO - TV status polling service started
2025-10-07 18:13:23,740 - app.services.queue_processor - INFO - Worker 0 started
2025-10-07 18:13:23,744 - app.services.queue_processor - INFO - Worker 1 started
2025-10-07 18:13:23,744 - app.services.queue_processor - INFO - Worker 2 started
2025-10-07 18:13:23,745 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-08 03:00:00 (in 8.8 hours)
2025-10-07 18:13:23,751 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     Application startup complete.
2025-10-07 18:13:25,809 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 18:13:25,809 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 18:13:25,809 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 18:13:25,809 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 18:13:25,814 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 18:13:25,899 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 18:13:25,899 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 18:13:25,899 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 18:13:25,900 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 18:13:25,906 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 18:13:25,918 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 18:13:25,918 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 18:13:25,918 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 18:13:25,918 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 18:13:25,921 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-07 18:13:26,020 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 18:13:26,021 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 18:13:26,021 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 18:13:26,021 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 18:13:26,024 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 18:13:26,900 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 18:13:26,901 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 18:13:26,901 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 18:13:26,901 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 18:13:26,904 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 18:13:26,986 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 18:13:26,986 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 18:13:26,986 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 18:13:26,986 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 18:13:26,989 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 18:13:27,049 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 18:13:27,049 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 18:13:27,049 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 18:13:27,049 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 18:13:27,052 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 18:13:27,067 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 18:13:27,067 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 18:13:27,067 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 18:13:27,067 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 18:13:27,070 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 18:13:30,978 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 18:13:30,978 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 18:13:30,978 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 18:13:30,978 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 18:13:30,981 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 18:13:31,048 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 18:13:31,048 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 18:13:31,048 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 18:13:31,048 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 18:13:31,055 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 18:13:34,301 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 18:13:34,302 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 18:13:34,302 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 18:13:34,302 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 18:13:34,303 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-07 18:13:39,992 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 18:13:39,993 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 18:13:39,993 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 18:13:39,993 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 18:13:39,996 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 18:15:19,444 - app.services.queue_processor - INFO - Worker 0 executing command 12: volume_down on ir-dc4516 port 1 (attempt 1)
2025-10-07 18:15:21,900 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 18:15:22,049 - app.services.esphome_client - INFO - Called service 'tv_volume_down' on ir-dc4516 with data: {'port': 1}
2025-10-07 18:15:22,055 - app.services.queue_processor - INFO - ‚úì Worker 0 completed command 12 in 2602ms
2025-10-07 18:15:35,574 - app.services.queue_processor - INFO - Worker 0 executing command 15: power_on on ir-dc4516 port 1 (attempt 1)
2025-10-07 18:15:35,724 - app.services.esphome_client - INFO - Called service 'tv_power_on' on ir-dc4516 with data: {'port': 1}
2025-10-07 18:15:35,730 - app.services.queue_processor - INFO - ‚úì Worker 0 completed command 15 in 150ms
2025-10-07 18:16:03,559 - aioesphomeapi.connection - WARNING - ir-dc4516 @ 192.168.101.146: Connection error occurred: [Errno 104] Connection reset by peer
2025-10-07 18:17:42,971 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 18:17:42,971 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 18:17:42,971 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 18:17:42,971 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 18:17:42,975 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 18:18:23,740 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 18:18:23,740 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 18:18:23,741 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,741 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 18:18:23,741 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,741 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,741 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,741 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:23,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:18:25,806 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 18:18:28,857 - app.services.device_status_checker - INFO - Device nw-b85a97 status changed: online=False, power=off
2025-10-07 18:18:28,889 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 18:18:29,097 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 18:18:29,104 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 18:18:46,964 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 18:18:46,964 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 18:18:46,964 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 18:18:46,964 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 18:18:46,965 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 18:23:28,861 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 18:23:31,915 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 18:23:31,915 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 18:23:31,917 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,917 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 18:23:31,917 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,917 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,917 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:31,918 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:23:34,599 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 18:23:34,788 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 18:23:34,793 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 18:27:23,657 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 18:27:23,658 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 18:27:23,658 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 18:27:23,658 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 18:27:23,665 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 18:27:23,674 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 18:27:23,674 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 18:27:23,674 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 18:27:23,674 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 18:27:23,681 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 18:28:31,915 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 18:28:34,971 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 18:28:34,972 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 18:28:34,972 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,972 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 18:28:34,972 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,972 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,972 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,972 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,972 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,972 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,972 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,972 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,973 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,973 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,973 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,973 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,973 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,973 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,973 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,973 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,973 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,973 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,973 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,973 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:34,973 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:28:37,422 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 18:28:37,637 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 18:28:37,641 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 18:33:34,970 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 18:33:38,026 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 18:33:38,026 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 18:33:38,026 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,027 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,028 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,028 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,028 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:38,028 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:33:40,686 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 18:33:40,857 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 18:33:40,860 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 18:37:34,044 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 18:37:34,044 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 18:37:34,044 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 18:37:34,044 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 18:37:34,047 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 18:38:38,024 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 18:38:41,080 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 18:38:41,081 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 18:38:41,081 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,081 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 18:38:41,081 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,081 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,081 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,081 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,081 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,081 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,081 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,081 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,082 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,082 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,082 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,082 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,082 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,082 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,082 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,082 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,082 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,082 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,082 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,082 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:41,082 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:38:43,715 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 18:38:43,911 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 18:38:43,915 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 18:40:52,734 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 18:40:52,734 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 18:40:52,734 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 18:40:52,735 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 18:40:52,735 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 18:41:27,518 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 18:41:27,518 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 18:41:27,518 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 18:41:27,518 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 18:41:27,522 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 18:41:27,533 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 18:41:27,533 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 18:41:27,533 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 18:41:27,533 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 18:41:27,536 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 18:41:27,555 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 18:41:27,555 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 18:41:27,555 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 18:41:27,555 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 18:41:27,558 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 18:43:41,079 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 18:43:44,135 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 18:43:44,136 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 18:43:44,136 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,136 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 18:43:44,136 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,136 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,136 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,136 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,136 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,136 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,136 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,136 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,137 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,137 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,137 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,137 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,137 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,137 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,137 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,137 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,137 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,137 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,137 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,137 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:44,137 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:43:46,579 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 18:43:46,776 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 18:43:46,780 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 18:48:44,134 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 18:48:47,190 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 18:48:47,191 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 18:48:47,191 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,191 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 18:48:47,191 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,191 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,191 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,191 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,191 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,191 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,191 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,191 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,191 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,191 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,191 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,192 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,192 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,192 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,192 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,192 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,192 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,192 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,192 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,192 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:47,192 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:48:49,585 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 18:48:49,789 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 18:48:49,793 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 18:53:47,189 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 18:53:50,246 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 18:53:50,246 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 18:53:50,246 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,247 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:50,248 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:53:52,989 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 18:53:53,186 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 18:53:53,191 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 18:55:31,290 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 18:55:31,290 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 18:55:31,290 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 18:55:31,290 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 18:55:31,293 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 18:55:31,293 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 18:55:31,293 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 18:55:31,293 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 18:55:31,293 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 18:55:31,294 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 18:55:31,391 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 18:55:31,391 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 18:55:31,391 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 18:55:31,391 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 18:55:31,394 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-07 18:55:31,401 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 18:55:31,401 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 18:55:31,401 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 18:55:31,401 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 18:55:31,404 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 18:55:31,407 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 18:55:31,407 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 18:55:31,407 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 18:55:31,407 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 18:55:31,410 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 18:55:31,439 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 18:55:31,439 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 18:55:31,439 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 18:55:31,439 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 18:55:31,445 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 18:55:31,447 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 18:55:31,448 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 18:55:31,448 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 18:55:31,448 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 18:55:31,454 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 18:55:31,464 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 18:55:31,464 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 18:55:31,464 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 18:55:31,464 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 18:55:31,467 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 18:55:31,512 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 18:55:31,512 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 18:55:31,512 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 18:55:31,512 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 18:55:31,518 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 18:55:31,518 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 18:55:31,518 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 18:55:31,518 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 18:55:31,518 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 18:55:31,521 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 18:55:31,537 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 18:55:31,538 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 18:55:31,538 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 18:55:31,538 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 18:55:31,544 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 18:58:50,244 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 18:58:53,346 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 18:58:53,347 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 18:58:53,347 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,347 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 18:58:53,347 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,347 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,347 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,347 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,347 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,347 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,347 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,347 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,347 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,347 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,347 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,347 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,347 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,347 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,347 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,348 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,348 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,348 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,348 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,348 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:53,348 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 18:58:55,762 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 18:58:55,963 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 18:58:55,967 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 19:03:53,345 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 19:03:56,401 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 19:03:56,401 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 19:03:56,401 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:56,402 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:03:58,815 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 19:03:59,008 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 19:03:59,013 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 19:08:56,399 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 19:08:59,455 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 19:08:59,455 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,456 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,457 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,457 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,457 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:08:59,457 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:09:02,172 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 19:09:02,369 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 19:09:02,373 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 19:09:35,305 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 19:09:35,305 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 19:09:35,305 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 19:09:35,305 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 19:09:35,311 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 19:09:35,367 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 19:09:35,367 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 19:09:35,367 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 19:09:35,367 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 19:09:35,373 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 19:13:59,453 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 19:14:02,509 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 19:14:02,509 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 19:14:02,510 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,510 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 19:14:02,510 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,510 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,510 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,510 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,510 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,510 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,510 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,510 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,510 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,510 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,510 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,511 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,511 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,511 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,511 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,511 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,511 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,511 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,511 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,511 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:02,511 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:14:05,170 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 19:14:05,371 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 19:14:05,375 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 19:15:36,589 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 19:15:36,589 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 19:15:36,589 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 19:15:36,589 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 19:15:36,595 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 19:18:54,405 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 19:18:54,406 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 19:18:54,406 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 19:18:54,406 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 19:18:54,406 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 19:19:02,508 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 19:19:05,564 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 19:19:05,564 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 19:19:05,564 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,565 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,566 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,566 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,566 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:05,566 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:19:08,301 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 19:19:08,499 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 19:19:08,503 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 19:23:39,131 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 19:23:39,131 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 19:23:39,131 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 19:23:39,131 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 19:23:39,134 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 19:23:39,226 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 19:23:39,226 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 19:23:39,226 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 19:23:39,226 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 19:23:39,233 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 19:23:39,262 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 19:23:39,262 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 19:23:39,262 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 19:23:39,262 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 19:23:39,266 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 19:24:05,563 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 19:24:08,632 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 19:24:08,633 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 19:24:08,633 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,633 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 19:24:08,633 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,633 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,633 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,633 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,633 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,634 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,634 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,634 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,634 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,634 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,634 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,634 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,634 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,634 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,634 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,634 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,634 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,634 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,634 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,634 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:08,634 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:24:11,299 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 19:24:11,495 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 19:24:11,499 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 19:29:08,631 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 19:29:11,686 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 19:29:11,687 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 19:29:11,687 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,687 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 19:29:11,687 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,687 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,687 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,687 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,687 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,687 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,688 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,688 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,688 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,688 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,688 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,688 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,688 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,688 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,688 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,688 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,688 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,688 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,688 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,688 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:11,688 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:29:14,102 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 19:29:14,289 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 19:29:14,293 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 19:29:21,092 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 19:29:21,092 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 19:29:21,092 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 19:29:21,092 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 19:29:21,093 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 19:29:21,093 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 19:29:21,094 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 19:29:21,094 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 19:29:21,094 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 19:29:21,100 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 19:29:21,194 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 19:29:21,194 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 19:29:21,194 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 19:29:21,194 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 19:29:21,200 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 19:34:11,685 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 19:34:13,718 - app.services.device_status_checker - INFO - Device nw-f5a756 status changed: online=False, power=off
2025-10-07 19:34:13,720 - app.services.device_status_checker - INFO - Device nw-bb2229 status changed: online=True, power=on
2025-10-07 19:34:14,742 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 19:34:14,742 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 19:34:14,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,742 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 19:34:14,742 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:14,743 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:34:17,487 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 19:34:17,712 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 19:34:17,717 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 19:37:42,892 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 19:37:42,892 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 19:37:42,892 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 19:37:42,892 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 19:37:42,892 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 19:37:42,937 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 19:37:42,938 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 19:37:42,938 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 19:37:42,938 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 19:37:42,944 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 19:37:42,945 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 19:37:42,945 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 19:37:42,945 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 19:37:42,945 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 19:37:42,947 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 19:37:42,964 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 19:37:42,964 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 19:37:42,964 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 19:37:42,964 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 19:37:42,970 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 19:37:43,034 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 19:37:43,034 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 19:37:43,034 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 19:37:43,034 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 19:37:43,037 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-07 19:37:43,051 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 19:37:43,051 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 19:37:43,051 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 19:37:43,051 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 19:37:43,057 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 19:37:43,058 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 19:37:43,059 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 19:37:43,059 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 19:37:43,059 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 19:37:43,070 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 19:37:43,070 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 19:37:43,070 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 19:37:43,070 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 19:37:43,070 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 19:37:43,073 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 19:37:43,073 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 19:37:43,073 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 19:37:43,073 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 19:37:43,073 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 19:37:43,076 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 19:39:14,740 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 19:39:17,795 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 19:39:17,796 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 19:39:17,796 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,796 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 19:39:17,796 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,796 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,796 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,796 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,796 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,796 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,796 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,797 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,797 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,797 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,797 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,797 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,797 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,797 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,797 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,797 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,797 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,797 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,797 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,797 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:17,797 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:39:20,450 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 19:39:20,648 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 19:39:20,652 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 19:44:17,794 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 19:44:20,850 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 19:44:20,850 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 19:44:20,850 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:20,851 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:44:23,249 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 19:44:23,462 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 19:44:23,466 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 19:49:20,848 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 19:49:23,904 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 19:49:23,904 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 19:49:23,904 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:23,905 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:49:26,319 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 19:49:26,530 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 19:49:26,534 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 19:51:46,840 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 19:51:46,841 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 19:51:46,841 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 19:51:46,841 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 19:51:46,844 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 19:51:46,893 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 19:51:46,893 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 19:51:46,893 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 19:51:46,893 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 19:51:46,899 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 19:54:23,902 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 19:54:26,958 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 19:54:26,958 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 19:54:26,958 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:26,959 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:54:29,601 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 19:54:29,806 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 19:54:29,810 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 19:59:26,956 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 19:59:30,012 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 19:59:30,012 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 19:59:30,013 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,013 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 19:59:30,013 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,013 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,013 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,013 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,013 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,013 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,013 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,013 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,013 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,013 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,013 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,013 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,013 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,014 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,014 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,014 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,014 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,014 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,014 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,014 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:30,014 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 19:59:32,473 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 19:59:32,657 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 19:59:32,661 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 20:04:30,011 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 20:04:33,066 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 20:04:33,066 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 20:04:33,067 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,067 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 20:04:33,067 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,067 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,067 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,067 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,067 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,067 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,067 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,067 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,067 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,067 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,067 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,067 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,068 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,068 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,068 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,068 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,068 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,068 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,068 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,068 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:33,068 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:04:35,727 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 20:04:35,923 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 20:04:35,927 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 20:05:50,724 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 20:05:50,724 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 20:05:50,724 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 20:05:50,724 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 20:05:50,727 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 20:05:50,834 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 20:05:50,834 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 20:05:50,834 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 20:05:50,834 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 20:05:50,837 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 20:05:50,839 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 20:05:50,839 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 20:05:50,839 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 20:05:50,839 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 20:05:50,850 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 20:07:30,860 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 20:07:30,861 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 20:07:30,861 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 20:07:30,861 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 20:07:30,861 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 20:09:09,551 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 20:09:09,552 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 20:09:09,552 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 20:09:09,552 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 20:09:09,555 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 20:09:33,065 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 20:09:36,121 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 20:09:36,121 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 20:09:36,121 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:36,122 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:09:38,752 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 20:09:38,950 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 20:09:38,954 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 20:12:27,438 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 20:12:27,439 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 20:12:27,439 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 20:12:27,439 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 20:12:27,445 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 20:14:36,119 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 20:14:39,174 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 20:14:39,175 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 20:14:39,175 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,175 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 20:14:39,175 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,175 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,175 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,175 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,175 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,175 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,175 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,175 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,175 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,176 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,176 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,176 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,176 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,176 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,176 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,176 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,176 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,176 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,176 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,176 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:39,176 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:14:41,877 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 20:14:42,069 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 20:14:42,073 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 20:19:39,173 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 20:19:42,230 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 20:19:42,231 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 20:19:42,231 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,231 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 20:19:42,231 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,231 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,231 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,231 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,231 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,231 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,231 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,231 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,231 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,232 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,232 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,232 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,232 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,232 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,232 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,232 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,232 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,232 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,232 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,232 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:42,232 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:19:44,644 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 20:19:44,842 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 20:19:44,846 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 20:19:54,592 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 20:19:54,592 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 20:19:54,592 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 20:19:54,592 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 20:19:54,593 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 20:19:54,630 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 20:19:54,630 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 20:19:54,630 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 20:19:54,630 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 20:19:54,634 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 20:19:54,660 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 20:19:54,660 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 20:19:54,660 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 20:19:54,661 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 20:19:54,664 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 20:19:54,664 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 20:19:54,665 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 20:19:54,665 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 20:19:54,665 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 20:19:54,676 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 20:19:54,677 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 20:19:54,677 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 20:19:54,677 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 20:19:54,677 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 20:19:54,689 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 20:19:54,689 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 20:19:54,689 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 20:19:54,689 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 20:19:54,689 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 20:19:54,695 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 20:19:54,695 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 20:19:54,695 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 20:19:54,695 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 20:19:54,695 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 20:19:54,698 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 20:19:54,699 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 20:19:54,699 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 20:19:54,699 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 20:19:54,699 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 20:19:54,701 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 20:19:54,736 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 20:19:54,736 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 20:19:54,736 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 20:19:54,737 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 20:19:54,743 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 20:19:54,769 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 20:19:54,769 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 20:19:54,769 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 20:19:54,769 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 20:19:54,772 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-07 20:24:42,229 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 20:24:45,285 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 20:24:45,285 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 20:24:45,285 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,285 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 20:24:45,285 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,285 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,285 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:45,286 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:24:47,740 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 20:24:47,935 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 20:24:47,939 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 20:29:45,283 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 20:29:48,339 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 20:29:48,339 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 20:29:48,339 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:48,340 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:29:50,784 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 20:29:50,979 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 20:29:50,983 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 20:33:57,968 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 20:33:57,968 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 20:33:57,969 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 20:33:57,969 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 20:33:57,975 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 20:33:58,013 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 20:33:58,013 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 20:33:58,013 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 20:33:58,014 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 20:33:58,020 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 20:33:58,022 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 20:33:58,023 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 20:33:58,023 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 20:33:58,023 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 20:33:58,029 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 20:34:48,337 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 20:34:51,393 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 20:34:51,393 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 20:34:51,393 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,393 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 20:34:51,393 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:51,394 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:34:53,781 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 20:34:53,979 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 20:34:53,983 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 20:39:51,391 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 20:39:54,447 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 20:39:54,448 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,448 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,449 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,449 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,449 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:54,449 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:39:57,131 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 20:39:57,329 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 20:39:57,333 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 20:44:54,446 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 20:44:57,501 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 20:44:57,501 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:57,502 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:44:59,917 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 20:45:00,115 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 20:45:00,119 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 20:45:42,031 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 20:45:42,031 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 20:45:42,031 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 20:45:42,031 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 20:45:42,032 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 20:48:01,878 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 20:48:01,878 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 20:48:01,878 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 20:48:01,878 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 20:48:01,881 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 20:48:01,935 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 20:48:01,935 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 20:48:01,935 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 20:48:01,935 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 20:48:01,941 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 20:48:59,533 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 20:48:59,534 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 20:48:59,534 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 20:48:59,534 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 20:48:59,537 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 20:49:57,499 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 20:50:00,554 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 20:50:00,555 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 20:50:00,555 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,555 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 20:50:00,555 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,555 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,555 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,555 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,555 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,555 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,555 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,555 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,555 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,555 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,555 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,556 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,556 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,556 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,556 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,556 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,556 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,556 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,556 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,556 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:00,556 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:50:03,335 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 20:50:03,532 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 20:50:03,536 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 20:50:39,612 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 20:50:39,613 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 20:50:39,613 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 20:50:39,613 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 20:50:39,616 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 20:55:00,553 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 20:55:03,609 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 20:55:03,609 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 20:55:03,609 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,609 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 20:55:03,609 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,609 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,609 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:03,610 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 20:55:06,233 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 20:55:06,436 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 20:55:06,441 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 21:00:03,607 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 21:00:06,663 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 21:00:06,663 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 21:00:06,664 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,664 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 21:00:06,664 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,664 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,664 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,664 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,664 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,664 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,664 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,664 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,664 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,664 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,664 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,664 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,664 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,664 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,665 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,665 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,665 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,665 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,665 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,665 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:06,665 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:00:09,285 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 21:00:09,499 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 21:00:09,504 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 21:02:05,641 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 21:02:05,641 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 21:02:05,641 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 21:02:05,641 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 21:02:05,642 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 21:02:05,659 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 21:02:05,659 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 21:02:05,659 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 21:02:05,659 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 21:02:05,665 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 21:02:05,665 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 21:02:05,666 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 21:02:05,666 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 21:02:05,666 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 21:02:05,668 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 21:02:05,694 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 21:02:05,694 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 21:02:05,695 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 21:02:05,695 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 21:02:05,701 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 21:02:05,703 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 21:02:05,703 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 21:02:05,703 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 21:02:05,703 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 21:02:05,709 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 21:02:05,745 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 21:02:05,745 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 21:02:05,745 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 21:02:05,745 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 21:02:05,751 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 21:02:05,757 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 21:02:05,757 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 21:02:05,757 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 21:02:05,757 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 21:02:05,768 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 21:02:05,768 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 21:02:05,768 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 21:02:05,768 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 21:02:05,768 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 21:02:05,771 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 21:02:05,771 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 21:02:05,771 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 21:02:05,771 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 21:02:05,771 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 21:02:05,774 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 21:02:05,789 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 21:02:05,789 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 21:02:05,789 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 21:02:05,789 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 21:02:05,792 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 21:02:05,803 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 21:02:05,803 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 21:02:05,803 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 21:02:05,803 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 21:02:05,809 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-07 21:05:06,662 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 21:05:09,718 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 21:05:09,718 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 21:05:09,718 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:09,719 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:05:12,148 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 21:05:12,344 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 21:05:12,348 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-07 21:10:09,716 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 21:10:12,771 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 21:10:12,772 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 21:10:12,772 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:10:12,772 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-07 21:10:12,772 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:10:12,772 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:10:12,772 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:10:12,772 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:10:12,772 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-07 21:10:12,773 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-2025-10-07 21:11:54,269 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 21:11:54,269 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 21:11:56,652 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 21:11:56,674 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 21:11:56,895 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 21:11:57,074 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 21:11:57,078 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 21:15:12,595 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 21:16:09,594 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 21:16:09,594 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 21:16:09,594 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 21:16:09,594 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 21:16:09,600 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 21:16:09,692 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 21:16:09,693 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 21:16:09,693 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 21:16:09,693 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 21:16:09,696 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 21:16:09,739 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 21:16:09,739 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 21:16:09,739 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 21:16:09,739 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 21:16:09,742 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 21:16:57,078 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 21:16:57,078 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 21:16:59,743 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 21:16:59,755 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 21:16:59,941 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 21:17:00,128 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 21:17:00,132 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 21:20:15,649 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 21:20:15,657 - app.services.device_status_checker - INFO - Device nw-9cf332 status changed: online=True, power=on
2025-10-07 21:20:17,690 - app.services.device_status_checker - INFO - Device nw-bb2229 status changed: online=False, power=off
2025-10-07 21:22:00,132 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 21:22:00,132 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 21:22:02,543 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 21:22:02,602 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 21:22:02,806 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 21:22:08,002 - app.services.esphome_client - WARNING - Timed out waiting for capabilities from ir-dc4516
2025-10-07 21:22:18,003 - aioesphomeapi.connection - ERROR - 192.168.101.146: disconnect request failed: Timeout waiting for DisconnectResponse after 10.0s
2025-10-07 21:22:18,003 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 21:22:18,007 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 21:22:19,857 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 21:22:19,857 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 21:22:19,857 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 21:22:19,858 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 21:22:19,858 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 21:25:18,710 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 21:27:18,008 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 21:27:18,008 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 21:27:20,698 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 21:27:21,225 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 21:27:21,440 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 21:27:21,654 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 21:27:21,658 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 21:29:29,305 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 21:29:29,305 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 21:29:29,305 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 21:29:29,305 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 21:29:29,306 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 21:29:29,325 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 21:29:29,325 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 21:29:29,325 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 21:29:29,326 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 21:29:29,332 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 21:29:29,334 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 21:29:29,334 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 21:29:29,334 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 21:29:29,334 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 21:29:29,337 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 21:30:13,576 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 21:30:13,577 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 21:30:13,577 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 21:30:13,577 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 21:30:13,580 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 21:30:13,647 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 21:30:13,647 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 21:30:13,647 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 21:30:13,647 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 21:30:13,650 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 21:30:21,779 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 21:32:21,658 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 21:32:21,658 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 21:32:24,082 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 21:32:24,535 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 21:32:24,718 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 21:32:24,899 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 21:32:24,903 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 21:35:24,839 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 21:37:24,904 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 21:37:24,904 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 21:37:27,621 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 21:37:27,829 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 21:37:28,081 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 21:37:28,277 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 21:37:28,282 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 21:40:27,899 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 21:42:28,282 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 21:42:28,283 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 21:42:30,952 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 21:42:31,272 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 21:42:31,489 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 21:42:31,731 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 21:42:31,735 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 21:44:17,336 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 21:44:17,336 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 21:44:17,336 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 21:44:17,336 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 21:44:17,337 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 21:44:17,391 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 21:44:17,392 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 21:44:17,392 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 21:44:17,392 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 21:44:17,395 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 21:44:17,395 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 21:44:17,395 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 21:44:17,395 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 21:44:17,395 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 21:44:17,407 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 21:44:17,441 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 21:44:17,441 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 21:44:17,441 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 21:44:17,441 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 21:44:17,448 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 21:44:17,450 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 21:44:17,450 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 21:44:17,450 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 21:44:17,450 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 21:44:17,456 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-07 21:44:17,471 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 21:44:17,471 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 21:44:17,471 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 21:44:17,471 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 21:44:17,474 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 21:44:17,474 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 21:44:17,475 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 21:44:17,475 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 21:44:17,475 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 21:44:17,477 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 21:44:17,477 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 21:44:17,477 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 21:44:17,478 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 21:44:17,478 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 21:44:17,480 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 21:44:17,486 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 21:44:17,486 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 21:44:17,487 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 21:44:17,487 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 21:44:17,489 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 21:44:17,490 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 21:44:17,490 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 21:44:17,490 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 21:44:17,490 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 21:44:17,492 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 21:45:30,956 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 21:47:31,736 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 21:47:31,736 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 21:47:34,402 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 21:47:34,644 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 21:47:34,846 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 21:47:35,105 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 21:47:35,109 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 21:50:34,013 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 21:52:35,109 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 21:52:35,109 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 21:52:37,801 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 21:52:38,010 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 21:52:38,208 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 21:52:38,383 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 21:52:38,387 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 21:55:37,082 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 21:57:38,387 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 21:57:38,387 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 21:57:40,796 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 21:57:41,024 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 21:57:41,202 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 21:57:41,402 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 21:57:41,406 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 21:58:20,819 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 21:58:20,820 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 21:58:20,820 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 21:58:20,820 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 21:58:20,826 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 21:58:20,829 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 21:58:20,830 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 21:58:20,830 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 21:58:20,830 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 21:58:20,836 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 21:58:20,923 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 21:58:20,923 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 21:58:20,923 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 21:58:20,923 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 21:58:20,926 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 21:58:20,953 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 21:58:20,953 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 21:58:20,953 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 21:58:20,953 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 21:58:20,956 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 22:00:40,140 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 22:02:41,405 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 22:02:41,406 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 22:02:43,834 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 22:02:43,875 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 22:02:44,072 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 22:02:49,190 - app.services.esphome_client - WARNING - Timed out waiting for capabilities from ir-dc4516
2025-10-07 22:02:59,189 - aioesphomeapi.connection - ERROR - 192.168.101.146: disconnect request failed: Timeout waiting for DisconnectResponse after 10.0s
2025-10-07 22:02:59,189 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 22:02:59,192 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 22:03:01,232 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 22:03:01,232 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 22:03:01,232 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 22:03:01,232 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 22:03:01,233 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 22:05:43,224 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 22:07:59,192 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 22:07:59,193 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 22:08:01,629 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 22:08:03,163 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 22:08:03,374 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 22:08:04,698 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 22:08:04,702 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 22:10:46,285 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 22:10:47,301 - app.services.device_status_checker - INFO - Device nw-9cf332 status changed: online=False, power=off
2025-10-07 22:11:40,952 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 22:11:40,952 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 22:11:40,952 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 22:11:40,952 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 22:11:40,953 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 22:11:40,967 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 22:11:40,967 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 22:11:40,967 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 22:11:40,967 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 22:11:40,973 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 22:11:40,981 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 22:11:40,981 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 22:11:40,981 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 22:11:40,981 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 22:11:40,984 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 22:12:24,832 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 22:12:24,832 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 22:12:24,832 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 22:12:24,832 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 22:12:24,838 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 22:12:24,868 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 22:12:24,869 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 22:12:24,869 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 22:12:24,869 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 22:12:24,872 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 22:13:04,703 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 22:13:04,703 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 22:13:07,137 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 22:13:07,502 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 22:13:07,702 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 22:13:12,826 - app.services.esphome_client - WARNING - Timed out waiting for capabilities from ir-dc4516
2025-10-07 22:13:22,826 - aioesphomeapi.connection - ERROR - 192.168.101.146: disconnect request failed: Timeout waiting for DisconnectResponse after 10.0s
2025-10-07 22:13:22,827 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 22:13:22,830 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 22:13:24,647 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 22:13:24,647 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 22:13:24,647 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 22:13:24,647 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 22:13:24,648 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-07 22:15:50,354 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 22:18:22,831 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 22:18:22,831 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 22:18:25,225 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 22:18:25,720 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 22:18:25,908 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 22:18:26,101 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 22:18:26,105 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 22:20:54,423 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 22:23:26,106 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 22:23:26,106 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 22:23:28,559 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 22:23:28,730 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 22:23:28,927 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 22:23:34,050 - app.services.esphome_client - WARNING - Timed out waiting for capabilities from ir-dc4516
2025-10-07 22:23:44,051 - aioesphomeapi.connection - ERROR - 192.168.101.146: disconnect request failed: Timeout waiting for DisconnectResponse after 10.0s
2025-10-07 22:23:44,051 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 22:23:44,054 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 22:23:45,917 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 22:23:45,917 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 22:23:45,917 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 22:23:45,917 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 22:23:45,917 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 22:25:58,493 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 22:26:28,594 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 22:26:28,594 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 22:26:28,594 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 22:26:28,594 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 22:26:28,595 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 22:26:28,637 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 22:26:28,637 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 22:26:28,638 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 22:26:28,638 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 22:26:28,641 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 22:26:28,693 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 22:26:28,693 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 22:26:28,693 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 22:26:28,693 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 22:26:28,700 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 22:26:28,709 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 22:26:28,709 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 22:26:28,709 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 22:26:28,709 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 22:26:28,715 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 22:26:28,748 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 22:26:28,748 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 22:26:28,748 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 22:26:28,748 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 22:26:28,759 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 22:26:28,760 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 22:26:28,760 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 22:26:28,760 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 22:26:28,760 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 22:26:28,763 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-07 22:26:28,763 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 22:26:28,763 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 22:26:28,763 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 22:26:28,763 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 22:26:28,766 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 22:26:28,812 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 22:26:28,812 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 22:26:28,812 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 22:26:28,812 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 22:26:28,818 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 22:26:28,825 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 22:26:28,825 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 22:26:28,825 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 22:26:28,825 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 22:26:28,831 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 22:26:28,894 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 22:26:28,895 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 22:26:28,895 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 22:26:28,895 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 22:26:28,901 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 22:28:44,055 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 22:28:44,055 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 22:28:46,759 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 22:28:47,073 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 22:28:47,261 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 22:28:47,448 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 22:28:47,453 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 22:31:02,563 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 22:33:47,453 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 22:33:47,453 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 22:33:50,108 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 22:33:50,347 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 22:33:50,536 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 22:33:50,731 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 22:33:50,735 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 22:36:06,634 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 22:38:50,736 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 22:38:50,736 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 22:38:53,185 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 22:38:53,367 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 22:38:53,559 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 22:38:53,742 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 22:38:53,746 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 22:40:32,553 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 22:40:32,554 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 22:40:32,554 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 22:40:32,554 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 22:40:32,560 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 22:40:32,594 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 22:40:32,594 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 22:40:32,594 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 22:40:32,594 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 22:40:32,597 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 22:40:32,610 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 22:40:32,610 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 22:40:32,610 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 22:40:32,610 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 22:40:32,613 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 22:40:32,632 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 22:40:32,632 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 22:40:32,632 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 22:40:32,632 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 22:40:32,638 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 22:41:10,705 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 22:43:53,747 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 22:43:53,747 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 22:43:56,370 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 22:43:56,410 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 22:43:56,607 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 22:43:56,798 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 22:43:56,802 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 22:46:14,776 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 22:48:56,803 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 22:48:56,803 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 22:48:59,207 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 22:48:59,428 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 22:48:59,627 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 22:48:59,806 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 22:48:59,810 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 22:51:18,847 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 22:53:52,091 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 22:53:52,091 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 22:53:52,091 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 22:53:52,091 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 22:53:52,097 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 22:53:52,097 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 22:53:52,098 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 22:53:52,098 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 22:53:52,098 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 22:53:52,098 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 22:53:52,195 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 22:53:52,195 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 22:53:52,195 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 22:53:52,195 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 22:53:52,198 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 22:53:59,810 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 22:53:59,810 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 22:54:02,186 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 22:54:02,204 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 22:54:02,399 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 22:54:02,580 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 22:54:02,584 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 22:54:36,438 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 22:54:36,439 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 22:54:36,439 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 22:54:36,439 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 22:54:36,442 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 22:54:36,496 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 22:54:36,496 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 22:54:36,496 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 22:54:36,496 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 22:54:36,503 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 22:56:22,917 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 22:59:02,584 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 22:59:02,584 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 22:59:05,228 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 22:59:05,231 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 22:59:05,429 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 22:59:05,615 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 22:59:05,619 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 23:01:26,987 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 23:04:05,620 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 23:04:05,620 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 23:04:08,080 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 23:04:08,333 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 23:04:08,541 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 23:04:08,783 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 23:04:08,787 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 23:06:31,057 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 23:08:40,205 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 23:08:40,205 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 23:08:40,205 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 23:08:40,205 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 23:08:40,206 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 23:08:40,238 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 23:08:40,238 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 23:08:40,238 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 23:08:40,238 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 23:08:40,244 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 23:08:40,245 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 23:08:40,245 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 23:08:40,245 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 23:08:40,245 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 23:08:40,248 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 23:08:40,281 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 23:08:40,281 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 23:08:40,281 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 23:08:40,281 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 23:08:40,284 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-07 23:08:40,302 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 23:08:40,302 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 23:08:40,302 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 23:08:40,302 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 23:08:40,305 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 23:08:40,322 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 23:08:40,322 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 23:08:40,322 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 23:08:40,322 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 23:08:40,329 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 23:08:40,329 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 23:08:40,329 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 23:08:40,329 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 23:08:40,329 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 23:08:40,336 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 23:08:40,336 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 23:08:40,337 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 23:08:40,337 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 23:08:40,337 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 23:08:40,340 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 23:08:40,364 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 23:08:40,364 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 23:08:40,364 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 23:08:40,364 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 23:08:40,367 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 23:08:40,390 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 23:08:40,390 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 23:08:40,390 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 23:08:40,390 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 23:08:40,393 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 23:09:08,787 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 23:09:08,788 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 23:09:11,197 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 23:09:11,218 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 23:09:11,432 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 23:09:11,609 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 23:09:11,614 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 23:11:35,126 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 23:14:11,615 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 23:14:11,615 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 23:14:14,019 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 23:14:14,263 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 23:14:14,454 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 23:14:14,642 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 23:14:14,647 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 23:16:39,195 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 23:19:14,647 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 23:19:14,647 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 23:19:17,087 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 23:19:17,269 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 23:19:17,480 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 23:19:17,666 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 23:19:17,671 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 23:21:43,266 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 23:22:44,173 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-07 23:22:44,174 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-07 23:22:44,174 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-07 23:22:44,174 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-07 23:22:44,181 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-07 23:22:44,183 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 23:22:44,183 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 23:22:44,183 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 23:22:44,183 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 23:22:44,186 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 23:22:44,214 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 23:22:44,214 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 23:22:44,214 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 23:22:44,214 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 23:22:44,218 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 23:22:44,297 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 23:22:44,298 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 23:22:44,298 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 23:22:44,298 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 23:22:44,301 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 23:24:17,670 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 23:24:17,671 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 23:24:20,153 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 23:24:20,285 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 23:24:20,485 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 23:24:20,661 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 23:24:20,665 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 23:26:47,336 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 23:29:20,665 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 23:29:20,665 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 23:29:23,048 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 23:29:23,318 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 23:29:23,509 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 23:29:23,685 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 23:29:23,690 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 23:31:51,406 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 23:34:23,690 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 23:34:23,691 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 23:34:26,367 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 23:34:26,403 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 23:34:26,597 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 23:34:26,778 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 23:34:26,783 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 23:36:03,822 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 23:36:03,822 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 23:36:03,823 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 23:36:03,823 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 23:36:03,823 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 23:36:03,911 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-07 23:36:03,911 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-07 23:36:03,911 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-07 23:36:03,911 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-07 23:36:03,915 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-07 23:36:03,916 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 23:36:03,916 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 23:36:03,916 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 23:36:03,916 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 23:36:03,922 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 23:36:48,107 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 23:36:48,107 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 23:36:48,107 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 23:36:48,108 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 23:36:48,110 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 23:36:48,118 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 23:36:48,118 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 23:36:48,118 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 23:36:48,118 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 23:36:48,124 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 23:36:55,477 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 23:39:26,783 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 23:39:26,784 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 23:39:29,422 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 23:39:29,461 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 23:39:29,657 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 23:39:29,832 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 23:39:29,836 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 23:41:59,548 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 23:44:29,836 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 23:44:29,837 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 23:44:32,227 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 23:44:32,300 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 23:44:32,497 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 23:44:32,684 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 23:44:32,688 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 23:47:03,618 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 23:49:32,689 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 23:49:32,689 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 23:49:35,340 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 23:49:35,482 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 23:49:35,670 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 23:49:35,856 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 23:49:35,861 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 23:50:51,870 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-07 23:50:51,870 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-07 23:50:51,870 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-07 23:50:51,870 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-07 23:50:51,873 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-07 23:50:51,881 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-07 23:50:51,881 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-07 23:50:51,881 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-07 23:50:51,881 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-07 23:50:51,881 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-07 23:50:51,944 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-07 23:50:51,945 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-07 23:50:51,945 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-07 23:50:51,945 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-07 23:50:51,948 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-07 23:50:51,987 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-07 23:50:51,987 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-07 23:50:51,987 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-07 23:50:51,987 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-07 23:50:51,990 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-07 23:50:51,991 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-07 23:50:51,991 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-07 23:50:51,991 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-07 23:50:51,991 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-07 23:50:52,003 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-07 23:50:52,025 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-07 23:50:52,026 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-07 23:50:52,026 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-07 23:50:52,026 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-07 23:50:52,029 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-07 23:50:52,036 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-07 23:50:52,036 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-07 23:50:52,036 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-07 23:50:52,036 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-07 23:50:52,039 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-07 23:50:52,057 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-07 23:50:52,058 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-07 23:50:52,058 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-07 23:50:52,058 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-07 23:50:52,061 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-07 23:50:52,061 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-07 23:50:52,061 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-07 23:50:52,061 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 23:50:52,061 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-07 23:50:52,064 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-07 23:50:52,125 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-07 23:50:52,125 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-07 23:50:52,125 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-07 23:50:52,125 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-07 23:50:52,128 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-07 23:52:07,688 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 23:54:35,861 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 23:54:35,861 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 23:54:38,246 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 23:54:38,541 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 23:54:38,740 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 23:54:38,925 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 23:54:38,929 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 23:57:11,758 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-07 23:59:38,930 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-07 23:59:38,930 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-07 23:59:41,322 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-07 23:59:41,619 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-07 23:59:41,827 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-07 23:59:46,952 - app.services.esphome_client - WARNING - Timed out waiting for capabilities from ir-dc4516
2025-10-07 23:59:56,952 - aioesphomeapi.connection - ERROR - 192.168.101.146: disconnect request failed: Timeout waiting for DisconnectResponse after 10.0s
2025-10-07 23:59:56,953 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-07 23:59:56,956 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-07 23:59:58,785 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-07 23:59:58,785 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-07 23:59:58,786 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-07 23:59:58,786 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-07 23:59:58,786 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 00:02:15,828 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 00:04:55,799 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-08 00:04:55,799 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-08 00:04:55,799 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-08 00:04:55,799 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-08 00:04:55,802 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-08 00:04:55,802 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 00:04:55,803 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 00:04:55,803 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 00:04:55,803 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 00:04:55,814 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 00:04:55,875 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 00:04:55,875 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 00:04:55,875 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 00:04:55,875 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 00:04:55,881 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 00:04:55,902 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 00:04:55,902 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 00:04:55,902 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 00:04:55,902 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 00:04:55,908 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 00:04:56,957 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 00:04:56,957 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 00:04:59,349 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 00:04:59,399 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 00:04:59,608 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 00:04:59,789 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 00:04:59,794 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 00:07:19,898 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 00:09:47,391 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 00:09:47,391 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 00:09:47,391 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 00:09:47,391 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 00:09:47,394 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 00:09:47,415 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 00:09:47,415 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 00:09:47,415 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 00:09:47,415 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 00:09:47,418 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 00:09:59,794 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 00:09:59,794 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 00:10:02,250 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 00:10:02,415 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 00:10:02,608 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 00:10:02,797 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 00:10:02,802 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 00:10:23,942 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-08 00:10:23,942 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-08 00:10:23,942 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-08 00:10:23,942 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-08 00:10:23,943 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 00:10:24,005 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-08 00:10:24,005 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-08 00:10:24,005 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-08 00:10:24,005 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-08 00:10:24,009 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-08 00:10:24,026 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 00:10:24,026 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 00:10:24,026 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 00:10:24,026 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 00:10:24,029 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 00:10:24,075 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-08 00:10:24,076 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-08 00:10:24,076 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 00:10:24,076 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 00:10:24,079 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-08 00:10:24,093 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-08 00:10:24,094 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-08 00:10:24,094 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-08 00:10:24,094 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-08 00:10:24,097 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-08 00:10:24,178 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-08 00:10:24,179 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-08 00:10:24,179 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-08 00:10:24,179 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-08 00:10:24,182 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-08 00:10:25,651 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 00:10:25,651 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 00:10:25,651 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 00:10:25,651 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 00:10:25,652 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-08 00:10:28,079 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-08 00:10:28,079 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-08 00:10:28,079 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-08 00:10:28,079 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-08 00:10:28,085 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-08 00:12:23,969 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 00:15:02,803 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 00:15:02,803 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 00:15:05,212 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 00:15:05,440 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 00:15:05,637 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 00:15:05,823 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 00:15:05,827 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 00:17:28,040 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 00:20:05,827 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 00:20:05,828 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 00:20:08,197 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 00:20:08,203 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 00:20:08,372 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 00:20:08,559 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 00:20:08,564 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 00:22:32,111 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 00:24:26,959 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 00:24:26,959 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 00:24:26,959 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 00:24:26,959 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 00:24:26,962 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 00:24:26,986 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 00:24:26,986 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 00:24:26,986 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 00:24:26,986 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 00:24:26,990 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 00:25:08,564 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 00:25:08,564 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 00:25:11,226 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 00:25:18,564 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while finishing connection: Finishing connection cancelled
2025-10-08 00:25:18,564 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 00:25:18,564 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: Connection lost
2025-10-08 00:25:21,634 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 00:25:24,706 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 00:25:27,778 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 00:25:30,850 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 00:25:33,922 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 00:25:36,994 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 00:25:37,098 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 00:25:40,194 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 00:25:43,266 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 00:25:46,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 00:25:48,742 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 00:25:48,752 - app.services.device_health - INFO - Found device ir-dc4516 at new IP: 192.168.101.146
2025-10-08 00:25:48,932 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 00:25:49,137 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 00:25:49,142 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 00:27:36,181 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 00:30:49,142 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 00:30:49,142 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 00:30:51,827 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 00:30:51,853 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 00:30:52,046 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 00:30:57,184 - app.services.esphome_client - WARNING - Timed out waiting for capabilities from ir-dc4516
2025-10-08 00:31:07,185 - aioesphomeapi.connection - ERROR - 192.168.101.146: disconnect request failed: Timeout waiting for DisconnectResponse after 10.0s
2025-10-08 00:31:07,185 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 00:31:07,189 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 00:31:09,046 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 00:31:09,046 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 00:31:09,046 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 00:31:09,046 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 00:31:09,047 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 00:32:40,261 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 00:36:07,188 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 00:36:07,189 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 00:36:07,234 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.146', 6053): [Errno 111] Connect call failed ('192.168.101.146', 6053)
2025-10-08 00:36:07,234 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 00:36:09,858 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 00:36:10,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 00:36:13,410 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 00:36:16,482 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 00:36:19,554 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 00:36:22,626 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 00:36:25,698 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 00:36:25,813 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 00:36:28,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 00:36:31,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 00:36:35,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 00:36:37,676 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 00:36:37,694 - app.services.device_health - INFO - Found device ir-dc4516 at new IP: 192.168.101.146
2025-10-08 00:36:37,873 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 00:36:38,060 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 00:36:38,065 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 00:37:44,330 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 00:38:30,752 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-08 00:38:30,753 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-08 00:38:30,753 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-08 00:38:30,753 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-08 00:38:30,759 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-08 00:38:30,773 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 00:38:30,773 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 00:38:30,773 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 00:38:30,773 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 00:38:30,776 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 00:38:30,796 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 00:38:30,797 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 00:38:30,797 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 00:38:30,797 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 00:38:30,803 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 00:38:30,829 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 00:38:30,830 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 00:38:30,830 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 00:38:30,830 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 00:38:30,836 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 00:38:30,868 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-08 00:38:30,868 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-08 00:38:30,868 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-08 00:38:30,868 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-08 00:38:30,872 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-08 00:41:38,066 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 00:41:38,066 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 00:41:38,431 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 00:41:38,431 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 00:41:38,431 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 00:41:40,487 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 00:41:41,538 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 00:41:44,610 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 00:41:47,682 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 00:41:50,754 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 00:41:53,826 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 00:41:56,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 00:41:56,981 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 00:42:00,034 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 00:42:03,106 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 00:42:06,178 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 00:42:06,542 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 00:42:06,542 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 00:42:09,634 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 00:42:12,706 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 00:42:15,778 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 00:42:18,850 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 00:42:21,922 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 00:42:24,994 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 00:42:24,995 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 00:42:28,066 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 00:42:38,067 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 00:42:41,122 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 00:42:41,305 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 00:42:41,309 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 00:42:48,400 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 00:47:41,310 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 00:47:41,310 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 00:47:43,961 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 00:47:44,036 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 00:47:44,036 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 00:47:44,036 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 00:47:47,106 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 00:47:50,178 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 00:47:52,470 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 00:47:56,543 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 00:47:59,650 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 00:48:02,722 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 00:48:05,794 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 00:48:05,837 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 00:48:08,930 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 00:48:12,002 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 00:48:15,075 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 00:48:15,425 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 00:48:15,426 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 00:48:18,530 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 00:48:21,602 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 00:48:24,674 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 00:48:27,746 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 00:48:30,818 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 00:48:33,890 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 00:48:33,891 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 00:48:36,962 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 00:48:46,962 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 00:48:50,018 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 00:48:50,201 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 00:48:50,205 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 00:52:34,558 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-08 00:52:34,558 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-08 00:52:34,558 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-08 00:52:34,558 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-08 00:52:34,559 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 00:52:34,612 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 00:52:34,612 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 00:52:34,612 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 00:52:34,612 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 00:52:34,618 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 00:52:34,648 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 00:52:34,648 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 00:52:34,648 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 00:52:34,648 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 00:52:34,651 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 00:52:34,666 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-08 00:52:34,667 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-08 00:52:34,667 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-08 00:52:34,667 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-08 00:52:34,673 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-08 00:52:34,686 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 00:52:34,686 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 00:52:34,686 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 00:52:34,686 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 00:52:34,693 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 00:52:34,726 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-08 00:52:34,727 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-08 00:52:34,727 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-08 00:52:34,727 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-08 00:52:34,730 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-08 00:52:56,541 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 00:53:50,206 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 00:53:50,207 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 00:53:51,924 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 00:53:51,924 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 00:53:51,924 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 00:53:52,615 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 00:53:54,978 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 00:53:58,050 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 00:54:01,122 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 00:54:04,194 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 00:54:07,266 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 00:54:10,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 00:54:10,383 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 00:54:13,474 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 00:54:16,546 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 00:54:19,618 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 00:54:21,375 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 00:54:21,376 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 00:54:24,482 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 00:54:27,554 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 00:54:30,626 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 00:54:33,698 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 00:54:36,770 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 00:54:39,842 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 00:54:39,843 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 00:54:42,914 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 00:54:52,915 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 00:54:55,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 00:54:56,153 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 00:54:56,158 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 00:58:00,611 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 00:59:56,158 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 00:59:56,158 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 00:59:57,664 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 00:59:57,664 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 00:59:57,664 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 00:59:58,560 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 01:00:00,738 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 01:00:03,810 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 01:00:06,883 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 01:00:09,954 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 01:00:13,026 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 01:00:16,098 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 01:00:16,163 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 01:00:19,234 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 01:00:22,306 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 01:00:25,378 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 01:00:25,750 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:00:25,750 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:00:28,834 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 01:00:31,906 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 01:00:34,978 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 01:00:38,050 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 01:00:41,122 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 01:00:44,194 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 01:00:44,195 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 01:00:47,266 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 01:00:57,266 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 01:01:00,322 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 01:01:00,506 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 01:01:00,510 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 01:03:04,681 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 01:06:00,511 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 01:06:00,511 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 01:06:00,897 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:06:00,897 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:06:00,897 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 01:06:02,960 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 01:06:04,002 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 01:06:07,074 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 01:06:10,146 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 01:06:13,218 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 01:06:16,290 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 01:06:19,362 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 01:06:19,366 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 01:06:22,434 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 01:06:25,506 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 01:06:28,578 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 01:06:30,495 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:06:30,495 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:06:33,570 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 01:06:36,642 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 01:06:38,016 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-08 01:06:38,016 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-08 01:06:38,016 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-08 01:06:38,016 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-08 01:06:38,019 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-08 01:06:38,049 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 01:06:38,050 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 01:06:38,050 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 01:06:38,050 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 01:06:38,053 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 01:06:38,055 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 01:06:38,055 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 01:06:38,055 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 01:06:38,055 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 01:06:38,067 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 01:06:38,110 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 01:06:38,110 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 01:06:38,110 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 01:06:38,111 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 01:06:38,113 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 01:06:39,714 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 01:06:42,786 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 01:06:45,858 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 01:06:48,185 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-08 01:06:48,185 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-08 01:06:48,185 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-08 01:06:48,185 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-08 01:06:48,188 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-08 01:06:48,248 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-08 01:06:48,248 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-08 01:06:48,248 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 01:06:48,248 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 01:06:48,254 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-08 01:06:48,930 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 01:06:48,931 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 01:06:52,002 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 01:07:02,002 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 01:07:05,058 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 01:07:05,253 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 01:07:05,257 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 01:08:08,752 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 01:12:05,257 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 01:12:05,257 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 01:12:06,762 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:12:06,762 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:12:06,762 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 01:12:07,684 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 01:12:09,826 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 01:12:12,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 01:12:15,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 01:12:19,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 01:12:22,114 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 01:12:25,186 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 01:12:25,262 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 01:12:28,322 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 01:12:31,394 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 01:12:34,466 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 01:12:36,810 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:12:36,810 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:12:39,906 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 01:12:42,978 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 01:12:46,050 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 01:12:49,122 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 01:12:52,194 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 01:12:55,266 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 01:12:55,267 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 01:12:58,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 01:13:08,339 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 01:13:11,394 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 01:13:11,573 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 01:13:11,577 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 01:13:12,822 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 01:14:18,127 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 01:14:18,127 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 01:14:18,127 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 01:14:18,127 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 01:14:18,130 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 01:18:11,577 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 01:18:11,578 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 01:18:13,247 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:18:13,247 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:18:13,247 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 01:18:14,215 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 01:18:16,354 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 01:18:16,892 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 01:18:20,964 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 01:18:24,034 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 01:18:27,106 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 01:18:30,178 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 01:18:33,250 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 01:18:33,293 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 01:18:36,386 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 01:18:39,458 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 01:18:42,530 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 01:18:44,222 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:18:44,222 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:18:47,330 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 01:18:50,402 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 01:18:53,474 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 01:18:56,546 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 01:18:59,618 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 01:19:02,690 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 01:19:02,691 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 01:19:05,762 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 01:19:15,763 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 01:19:18,818 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 01:19:18,999 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 01:19:19,003 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 01:20:41,818 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 01:20:41,818 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 01:20:41,818 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 01:20:41,818 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 01:20:41,821 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 01:20:41,834 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 01:20:41,834 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 01:20:41,834 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 01:20:41,834 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 01:20:41,835 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 01:20:41,874 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-08 01:20:41,874 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-08 01:20:41,874 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-08 01:20:41,874 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-08 01:20:41,881 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-08 01:20:41,924 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 01:20:41,924 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 01:20:41,924 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 01:20:41,924 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 01:20:41,928 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 01:20:41,955 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 01:20:41,956 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 01:20:41,956 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 01:20:41,956 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 01:20:41,963 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 01:20:41,971 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-08 01:20:41,971 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-08 01:20:41,971 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-08 01:20:41,971 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-08 01:20:41,978 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-08 01:23:20,962 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 01:24:19,004 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 01:24:19,005 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 01:24:20,741 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:24:20,741 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:24:20,741 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 01:24:21,419 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 01:24:23,842 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 01:24:26,914 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 01:24:29,986 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 01:24:33,058 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 01:24:36,130 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 01:24:39,202 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 01:24:39,280 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 01:24:42,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 01:24:45,410 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 01:24:48,482 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 01:24:50,336 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:24:50,336 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:24:53,410 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 01:24:56,482 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 01:24:59,554 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 01:25:02,626 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 01:25:05,698 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 01:25:08,770 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 01:25:08,771 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 01:25:11,842 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 01:25:21,843 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 01:25:24,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 01:25:25,074 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 01:25:25,077 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 01:28:25,032 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 01:30:25,078 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 01:30:25,079 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 01:30:26,514 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:30:26,514 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:30:26,514 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 01:30:27,738 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 01:30:29,602 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 01:30:32,674 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 01:30:35,746 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 01:30:38,818 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 01:30:41,890 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 01:30:44,962 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 01:30:45,054 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 01:30:48,162 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 01:30:51,234 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 01:30:54,306 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 01:30:54,658 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:30:54,658 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:30:57,762 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 01:31:00,834 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 01:31:03,906 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 01:31:06,978 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 01:31:10,050 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 01:31:13,122 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 01:31:13,123 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 01:31:16,194 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 01:31:26,195 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 01:31:29,250 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 01:31:29,434 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 01:31:29,439 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 01:33:29,101 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 01:34:45,677 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-08 01:34:45,677 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-08 01:34:45,677 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-08 01:34:45,678 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-08 01:34:45,678 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 01:34:45,736 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 01:34:45,736 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 01:34:45,736 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 01:34:45,737 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 01:34:45,743 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 01:34:45,743 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 01:34:45,743 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 01:34:45,743 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 01:34:45,743 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 01:34:45,746 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 01:34:45,869 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-08 01:34:45,869 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-08 01:34:45,869 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-08 01:34:45,869 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-08 01:34:45,872 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-08 01:34:45,893 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-08 01:34:45,893 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-08 01:34:45,893 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-08 01:34:45,893 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-08 01:34:45,896 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-08 01:35:05,794 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 01:35:05,795 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 01:35:05,795 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 01:35:05,795 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 01:35:05,801 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 01:36:29,438 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 01:36:29,439 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 01:36:30,922 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:36:30,922 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:36:30,922 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 01:36:31,868 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 01:36:34,018 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 01:36:37,090 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 01:36:40,162 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 01:36:43,234 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 01:36:46,306 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 01:36:49,378 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 01:36:49,400 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 01:36:52,450 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 01:36:55,522 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 01:36:58,594 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 01:36:58,982 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:36:58,982 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:37:02,050 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 01:37:05,122 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 01:37:08,194 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 01:37:11,266 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 01:37:14,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 01:37:17,410 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 01:37:17,411 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 01:37:20,482 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 01:37:30,483 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 01:37:33,538 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 01:37:33,721 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 01:37:33,725 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 01:38:33,171 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 01:42:33,726 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 01:42:33,726 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 01:42:35,401 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:42:35,401 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:42:35,401 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 01:42:36,375 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 01:42:38,498 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 01:42:41,570 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 01:42:44,642 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 01:42:47,714 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 01:42:50,786 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 01:42:53,858 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 01:42:53,951 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 01:42:57,058 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 01:43:00,130 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 01:43:03,202 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 01:43:03,542 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:43:03,542 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:43:06,594 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 01:43:09,666 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 01:43:12,738 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 01:43:15,810 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 01:43:18,882 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 01:43:21,954 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 01:43:21,955 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 01:43:25,026 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 01:43:35,027 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 01:43:37,243 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 01:43:41,315 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 01:43:41,498 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 01:43:41,502 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 01:48:41,312 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 01:48:45,384 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 01:48:45,385 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 01:48:47,179 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:48:47,180 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:48:47,180 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 01:48:48,012 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 01:48:49,554 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 01:48:49,554 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 01:48:49,555 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 01:48:49,555 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 01:48:49,558 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 01:48:49,558 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-08 01:48:49,558 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-08 01:48:49,558 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-08 01:48:49,558 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-08 01:48:49,570 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-08 01:48:49,609 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 01:48:49,609 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 01:48:49,609 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 01:48:49,609 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 01:48:49,615 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 01:48:49,636 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 01:48:49,636 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 01:48:49,636 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 01:48:49,636 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 01:48:49,643 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 01:48:49,652 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-08 01:48:49,653 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-08 01:48:49,653 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-08 01:48:49,653 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-08 01:48:49,656 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-08 01:48:49,659 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-08 01:48:49,660 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-08 01:48:49,660 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 01:48:49,660 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 01:48:49,663 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-08 01:48:50,274 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 01:48:53,346 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 01:48:56,418 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 01:48:59,490 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 01:49:02,562 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 01:49:05,634 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 01:49:05,669 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 01:49:08,770 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 01:49:11,842 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 01:49:14,914 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 01:49:16,589 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:49:16,589 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:49:19,650 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 01:49:22,722 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 01:49:25,794 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 01:49:28,866 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 01:49:31,938 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 01:49:35,010 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 01:49:35,011 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 01:49:38,082 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 01:49:48,083 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 01:49:51,138 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 01:49:51,318 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 01:49:51,322 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 01:53:45,382 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 01:54:51,323 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 01:54:51,324 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 01:54:52,995 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:54:52,995 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:54:52,995 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 01:54:53,714 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 01:54:56,098 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 01:54:59,170 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 01:55:02,242 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 01:55:05,314 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 01:55:08,386 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 01:55:11,458 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 01:55:11,462 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 01:55:14,530 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 01:55:17,604 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 01:55:20,674 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 01:55:22,358 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 01:55:22,358 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 01:55:25,410 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 01:55:28,482 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 01:55:31,554 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 01:55:34,626 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 01:55:37,698 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 01:55:40,770 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 01:55:40,771 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 01:55:43,842 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 01:55:53,843 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 01:55:56,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 01:55:57,084 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 01:55:57,088 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 01:58:49,451 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 02:00:57,089 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 02:00:57,090 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 02:00:58,523 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:00:58,524 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:00:58,524 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 02:00:59,622 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 02:01:01,602 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 02:01:04,674 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 02:01:07,746 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 02:01:10,818 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 02:01:13,890 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 02:01:16,962 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 02:01:17,032 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 02:01:20,098 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 02:01:23,170 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 02:01:26,242 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 02:01:26,604 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:01:26,604 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:01:29,698 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 02:01:32,770 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 02:01:35,842 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 02:01:38,914 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 02:01:41,986 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 02:01:45,058 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 02:01:45,059 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 02:01:48,130 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 02:01:58,131 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 02:02:01,186 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 02:02:01,370 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 02:02:01,375 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 02:02:53,397 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 02:02:53,397 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 02:02:53,397 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 02:02:53,397 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 02:02:53,398 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 02:02:53,398 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-08 02:02:53,399 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-08 02:02:53,399 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-08 02:02:53,399 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-08 02:02:53,405 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-08 02:02:53,410 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 02:02:53,410 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 02:02:53,410 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 02:02:53,410 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 02:02:53,413 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 02:02:53,490 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 02:02:53,491 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 02:02:53,491 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 02:02:53,491 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 02:02:53,495 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 02:02:53,507 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-08 02:02:53,508 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-08 02:02:53,508 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-08 02:02:53,508 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-08 02:02:53,511 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-08 02:02:53,516 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 02:02:53,517 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 02:02:53,517 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 02:02:53,517 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 02:02:53,523 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 02:03:53,521 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 02:07:01,375 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 02:07:01,375 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 02:07:03,084 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:07:03,084 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:07:03,085 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 02:07:03,801 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 02:07:06,146 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 02:07:09,218 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 02:07:12,290 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 02:07:15,362 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 02:07:18,434 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 02:07:21,506 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 02:07:21,577 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 02:07:24,642 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 02:07:27,714 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 02:07:30,786 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 02:07:32,583 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:07:32,583 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:07:35,650 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 02:07:38,722 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 02:07:41,794 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 02:07:44,866 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 02:07:47,938 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 02:07:51,010 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 02:07:51,011 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 02:07:54,082 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 02:08:04,083 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 02:08:07,138 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 02:08:07,317 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 02:08:07,321 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 02:08:57,591 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 02:10:33,190 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 02:10:33,190 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 02:10:33,190 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 02:10:33,190 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 02:10:33,194 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 02:13:07,322 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 02:13:07,322 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 02:13:08,991 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:13:08,991 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:13:08,991 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 02:13:09,989 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 02:13:12,098 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 02:13:15,170 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 02:13:18,242 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 02:13:21,314 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 02:13:24,386 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 02:13:27,458 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 02:13:27,565 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 02:13:30,658 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 02:13:33,730 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 02:13:36,802 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 02:13:38,757 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:13:38,757 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:13:41,858 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 02:13:44,930 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 02:13:48,002 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 02:13:51,074 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 02:13:54,147 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 02:13:57,218 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 02:13:57,219 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 02:14:00,290 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 02:14:01,661 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 02:14:10,291 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 02:14:13,346 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 02:14:13,536 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 02:14:13,541 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 02:16:57,254 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-08 02:16:57,254 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-08 02:16:57,254 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-08 02:16:57,254 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-08 02:16:57,255 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 02:16:57,339 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-08 02:16:57,339 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-08 02:16:57,340 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-08 02:16:57,340 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-08 02:16:57,343 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-08 02:16:57,407 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 02:16:57,408 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 02:16:57,408 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 02:16:57,408 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 02:16:57,414 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 02:16:57,443 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 02:16:57,443 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 02:16:57,443 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 02:16:57,443 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 02:16:57,446 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 02:17:27,129 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 02:17:27,129 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 02:17:27,129 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 02:17:27,129 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 02:17:27,132 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 02:19:05,731 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 02:19:13,540 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 02:19:13,541 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 02:19:15,027 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:19:15,027 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:19:15,028 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 02:19:16,230 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 02:19:18,114 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 02:19:21,186 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 02:19:24,258 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 02:19:27,330 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 02:19:30,402 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 02:19:33,474 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 02:19:33,545 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 02:19:36,610 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 02:19:39,682 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 02:19:42,754 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 02:19:44,444 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:19:44,444 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:19:47,554 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 02:19:50,626 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 02:19:53,698 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 02:19:56,770 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 02:19:59,842 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 02:20:02,914 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 02:20:02,915 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 02:20:05,986 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 02:20:15,986 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 02:20:19,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 02:20:19,231 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 02:20:19,236 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 02:24:09,802 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 02:25:19,236 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 02:25:19,236 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 02:25:19,588 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:25:19,588 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:25:19,588 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 02:25:21,614 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 02:25:22,658 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 02:25:25,730 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 02:25:28,802 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 02:25:31,874 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 02:25:34,946 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 02:25:38,018 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 02:25:38,095 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 02:25:41,154 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 02:25:44,226 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 02:25:47,298 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 02:25:47,660 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:25:47,660 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:25:50,754 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 02:25:53,826 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 02:25:56,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 02:25:59,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 02:26:03,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 02:26:06,114 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 02:26:06,115 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 02:26:09,186 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 02:26:19,187 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 02:26:22,242 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 02:26:22,423 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 02:26:22,427 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 02:29:13,873 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 02:31:00,981 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-08 02:31:00,981 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-08 02:31:00,981 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-08 02:31:00,981 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-08 02:31:00,987 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-08 02:31:00,987 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 02:31:00,988 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 02:31:00,988 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 02:31:00,988 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 02:31:00,994 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 02:31:01,049 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 02:31:01,049 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 02:31:01,050 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 02:31:01,050 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 02:31:01,052 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 02:31:01,076 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 02:31:01,076 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 02:31:01,076 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 02:31:01,076 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 02:31:01,080 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 02:31:01,088 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-08 02:31:01,088 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-08 02:31:01,088 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 02:31:01,088 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 02:31:01,109 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-08 02:31:01,180 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-08 02:31:01,180 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-08 02:31:01,180 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-08 02:31:01,180 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-08 02:31:01,188 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-08 02:31:22,428 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 02:31:22,429 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 02:31:22,804 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:31:22,804 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:31:22,804 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 02:31:24,791 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 02:31:25,858 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 02:31:28,930 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 02:31:32,002 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 02:31:35,074 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 02:31:38,146 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 02:31:41,218 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 02:31:41,224 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 02:31:44,290 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 02:31:47,362 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 02:31:50,434 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 02:31:52,178 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:31:52,178 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:31:55,234 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 02:31:58,306 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 02:32:01,378 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 02:32:04,450 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 02:32:07,522 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 02:32:10,594 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 02:32:10,595 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 02:32:13,666 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 02:32:23,667 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 02:32:26,722 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 02:32:26,901 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 02:32:26,906 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 02:34:17,944 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 02:37:26,906 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 02:37:26,907 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 02:37:28,989 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:37:28,989 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:37:28,989 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 02:37:29,294 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 02:37:32,066 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 02:37:35,138 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 02:37:38,210 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 02:37:41,282 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 02:37:44,354 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 02:37:47,426 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 02:37:47,509 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 02:37:50,562 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 02:37:53,634 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 02:37:56,706 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 02:37:57,064 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:37:57,064 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:38:00,162 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 02:38:03,234 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 02:38:06,306 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 02:38:09,378 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 02:38:12,450 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 02:38:15,522 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 02:38:15,523 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 02:38:18,594 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 02:38:28,595 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 02:38:31,650 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 02:38:31,839 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 02:38:31,843 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 02:39:22,014 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 02:43:31,844 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 02:43:31,844 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 02:43:32,178 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:43:32,179 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:43:32,179 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 02:43:34,513 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 02:43:35,266 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 02:43:38,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 02:43:41,410 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 02:43:44,482 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 02:43:47,554 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 02:43:50,626 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 02:43:50,734 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 02:43:53,826 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 02:43:56,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 02:43:59,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 02:44:01,677 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:44:01,678 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:44:04,770 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 02:44:07,842 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 02:44:10,914 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 02:44:13,986 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 02:44:17,058 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 02:44:20,130 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 02:44:20,131 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 02:44:23,202 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 02:44:26,084 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 02:44:33,203 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 02:44:36,258 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 02:44:36,439 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 02:44:36,444 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 02:45:04,837 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 02:45:04,837 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 02:45:04,837 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 02:45:04,837 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 02:45:04,838 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 02:45:04,839 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 02:45:04,839 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 02:45:04,839 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 02:45:04,839 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 02:45:04,842 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 02:45:04,925 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-08 02:45:04,925 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-08 02:45:04,925 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-08 02:45:04,925 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-08 02:45:04,928 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-08 02:45:04,928 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-08 02:45:04,928 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-08 02:45:04,928 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-08 02:45:04,928 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-08 02:45:04,932 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-08 02:45:05,028 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 02:45:05,028 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 02:45:05,029 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 02:45:05,029 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 02:45:05,035 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 02:45:05,047 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 02:45:05,047 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 02:45:05,047 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 02:45:05,047 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 02:45:05,053 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 02:49:30,155 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 02:49:36,443 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 02:49:36,444 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 02:49:38,171 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:49:38,171 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:49:38,171 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 02:49:39,122 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 02:49:41,282 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 02:49:44,354 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 02:49:47,426 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 02:49:50,498 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 02:49:53,570 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 02:49:56,642 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 02:49:56,729 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 02:49:59,778 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 02:50:02,850 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 02:50:05,922 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 02:50:07,678 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:50:07,679 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:50:10,786 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 02:50:13,858 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 02:50:16,930 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 02:50:20,002 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 02:50:23,074 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 02:50:26,146 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 02:50:26,147 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 02:50:29,218 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 02:50:39,218 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 02:50:42,274 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 02:50:42,458 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 02:50:42,462 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 02:54:34,225 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 02:55:42,462 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 02:55:42,463 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 02:55:44,250 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:55:44,250 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:55:44,251 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 02:55:44,856 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 02:55:47,362 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 02:55:50,434 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 02:55:53,506 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 02:55:56,578 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 02:55:59,650 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 02:56:02,722 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 02:56:02,814 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 02:56:05,922 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 02:56:08,994 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 02:56:12,066 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 02:56:13,623 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 02:56:13,624 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 02:56:16,674 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 02:56:19,746 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 02:56:22,818 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 02:56:25,890 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 02:56:28,962 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 02:56:32,034 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 02:56:32,035 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 02:56:35,106 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 02:56:45,106 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 02:56:48,162 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 02:56:48,350 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 02:56:48,355 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 02:59:08,792 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-08 02:59:08,792 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-08 02:59:08,792 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-08 02:59:08,792 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-08 02:59:08,793 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 02:59:08,865 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-08 02:59:08,865 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-08 02:59:08,865 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-08 02:59:08,865 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-08 02:59:08,869 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-08 02:59:08,915 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 02:59:08,916 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 02:59:08,916 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 02:59:08,916 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 02:59:08,919 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 02:59:08,947 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 02:59:08,947 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 02:59:08,947 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 02:59:08,947 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 02:59:08,954 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 02:59:38,296 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 02:59:48,119 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 02:59:48,119 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 02:59:48,119 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 02:59:48,119 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 02:59:48,125 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 02:59:48,159 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 02:59:48,160 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 02:59:48,160 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 02:59:48,160 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 02:59:48,163 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 03:00:00,000 - app.services.history_cleanup - INFO - Starting history cleanup (retention: 7 days)
2025-10-08 03:00:00,003 - app.services.history_cleanup - INFO - History cleanup complete: 0 history entries deleted, 0 completed queue entries deleted
2025-10-08 03:00:00,003 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-09 03:00:00 (in 24.0 hours)
2025-10-08 03:01:48,355 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 03:01:48,355 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 03:01:50,753 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:01:50,754 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:01:50,754 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 03:01:50,978 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 03:01:53,826 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 03:01:56,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 03:01:59,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 03:02:03,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 03:02:06,114 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 03:02:09,186 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 03:02:09,208 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 03:02:12,258 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 03:02:15,330 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 03:02:18,402 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 03:02:19,854 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:02:19,854 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:02:22,946 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 03:02:26,018 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 03:02:29,090 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 03:02:32,162 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 03:02:35,234 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 03:02:38,306 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 03:02:38,307 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 03:02:41,378 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 03:02:51,379 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 03:02:54,434 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 03:02:54,618 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 03:02:54,623 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 03:04:42,366 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 03:07:54,623 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 03:07:54,623 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 03:07:54,992 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:07:54,993 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:07:54,993 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 03:07:57,340 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 03:07:58,050 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 03:08:01,122 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 03:08:04,194 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 03:08:07,266 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 03:08:10,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 03:08:13,410 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 03:08:13,452 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 03:08:16,546 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 03:08:19,618 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 03:08:22,690 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 03:08:24,132 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:08:24,132 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:08:27,234 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 03:08:30,306 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 03:08:33,378 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 03:08:36,450 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 03:08:39,522 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 03:08:42,594 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 03:08:42,595 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 03:08:45,666 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 03:08:55,667 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 03:08:58,722 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 03:08:58,890 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 03:08:58,893 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 03:09:46,436 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 03:13:12,716 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-08 03:13:12,717 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-08 03:13:12,717 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-08 03:13:12,717 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-08 03:13:12,720 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-08 03:13:12,758 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 03:13:12,759 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 03:13:12,759 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 03:13:12,759 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 03:13:12,762 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 03:13:12,785 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-08 03:13:12,786 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-08 03:13:12,786 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-08 03:13:12,786 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-08 03:13:12,789 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-08 03:13:12,824 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-08 03:13:12,824 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-08 03:13:12,824 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 03:13:12,824 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 03:13:12,828 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-08 03:13:12,828 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 03:13:12,828 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 03:13:12,829 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 03:13:12,829 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 03:13:12,840 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 03:13:12,840 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 03:13:12,840 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 03:13:12,840 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 03:13:12,840 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 03:13:12,846 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 03:13:58,894 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 03:13:58,894 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 03:13:59,241 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:13:59,241 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:13:59,241 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 03:14:01,303 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 03:14:02,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 03:14:05,410 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 03:14:08,482 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 03:14:11,554 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 03:14:14,626 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 03:14:17,698 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 03:14:17,800 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 03:14:20,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 03:14:23,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 03:14:27,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 03:14:28,842 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:14:28,843 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:14:31,906 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 03:14:34,980 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 03:14:38,050 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 03:14:41,122 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 03:14:44,194 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 03:14:47,266 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 03:14:47,267 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 03:14:50,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 03:14:50,507 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 03:15:00,339 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 03:15:03,394 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 03:15:03,572 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 03:15:03,577 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 03:19:54,578 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 03:20:03,577 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 03:20:03,577 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 03:20:05,008 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:20:05,008 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:20:05,008 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 03:20:06,231 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 03:20:08,098 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 03:20:11,170 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 03:20:14,242 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 03:20:17,314 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 03:20:20,386 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 03:20:23,458 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 03:20:23,478 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 03:20:26,530 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 03:20:29,602 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 03:20:32,674 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 03:20:33,034 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:20:33,035 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:20:36,130 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 03:20:39,202 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 03:20:42,274 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 03:20:45,346 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 03:20:48,418 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 03:20:51,490 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 03:20:51,491 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 03:20:54,562 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 03:21:04,563 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 03:21:07,618 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 03:21:07,804 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 03:21:07,808 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 03:24:58,649 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 03:26:07,809 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 03:26:07,809 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 03:26:08,235 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:26:08,236 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:26:08,236 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 03:26:10,478 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 03:26:11,298 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 03:26:14,370 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 03:26:17,442 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 03:26:20,514 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 03:26:23,586 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 03:26:26,658 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 03:26:26,701 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 03:26:29,794 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 03:26:32,866 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 03:26:35,938 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 03:26:38,031 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:26:38,031 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:26:41,122 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 03:26:44,194 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 03:26:47,266 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 03:26:50,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 03:26:53,410 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 03:26:56,482 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 03:26:56,483 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 03:26:59,554 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 03:27:09,555 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 03:27:12,610 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 03:27:12,794 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 03:27:12,798 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 03:27:16,594 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 03:27:16,594 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 03:27:16,594 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 03:27:16,594 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 03:27:16,594 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 03:27:16,653 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 03:27:16,653 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 03:27:16,653 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 03:27:16,654 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 03:27:16,660 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 03:27:16,660 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-08 03:27:16,660 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-08 03:27:16,660 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-08 03:27:16,660 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-08 03:27:16,666 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-08 03:27:16,700 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 03:27:16,701 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 03:27:16,701 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 03:27:16,701 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 03:27:16,707 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 03:27:16,707 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-08 03:27:16,707 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-08 03:27:16,707 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-08 03:27:16,707 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-08 03:27:16,710 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-08 03:27:16,762 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 03:27:16,762 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 03:27:16,762 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 03:27:16,762 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 03:27:16,768 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 03:30:02,719 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 03:32:12,798 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 03:32:12,799 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 03:32:14,275 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:32:14,275 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:32:14,276 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 03:32:15,458 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 03:32:17,378 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 03:32:20,450 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 03:32:23,522 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 03:32:26,594 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 03:32:29,666 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 03:32:32,738 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 03:32:32,792 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 03:32:35,874 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 03:32:38,946 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 03:32:42,018 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 03:32:44,748 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:32:44,749 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:32:47,842 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 03:32:50,914 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 03:32:53,986 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 03:32:57,058 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 03:33:00,130 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 03:33:03,202 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 03:33:03,203 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 03:33:06,274 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 03:33:16,275 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 03:33:19,330 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 03:33:19,511 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 03:33:19,515 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 03:35:06,790 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 03:38:19,514 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 03:38:19,515 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 03:38:21,477 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:38:21,477 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:38:21,477 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 03:38:21,957 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 03:38:24,546 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 03:38:27,618 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 03:38:30,690 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 03:38:33,762 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 03:38:36,834 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 03:38:39,906 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 03:38:40,011 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 03:38:43,106 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 03:38:46,178 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 03:38:49,250 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 03:38:49,616 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:38:49,617 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:38:52,706 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 03:38:55,778 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 03:38:58,850 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 03:39:01,922 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 03:39:04,994 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 03:39:08,066 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 03:39:08,067 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 03:39:11,138 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 03:39:21,139 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 03:39:24,194 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 03:39:24,382 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 03:39:24,386 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 03:40:10,861 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 03:41:19,941 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-08 03:41:19,941 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-08 03:41:19,941 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-08 03:41:19,941 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-08 03:41:19,942 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 03:41:20,084 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 03:41:20,084 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 03:41:20,084 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 03:41:20,084 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 03:41:20,091 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 03:41:20,091 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 03:41:20,091 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 03:41:20,091 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 03:41:20,091 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 03:41:20,095 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 03:41:20,095 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-08 03:41:20,095 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-08 03:41:20,095 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-08 03:41:20,095 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-08 03:41:20,098 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-08 03:41:20,110 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-08 03:41:20,110 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-08 03:41:20,110 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-08 03:41:20,110 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-08 03:41:20,116 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-08 03:41:49,981 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 03:41:49,982 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 03:41:49,982 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 03:41:49,982 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 03:41:49,985 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 03:44:24,387 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 03:44:24,387 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 03:44:26,671 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:44:26,671 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:44:26,671 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 03:44:26,815 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 03:44:29,730 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 03:44:32,802 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 03:44:35,875 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 03:44:38,946 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 03:44:42,018 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 03:44:45,090 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 03:44:45,179 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 03:44:48,290 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 03:44:51,362 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 03:44:54,434 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 03:44:56,222 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:44:56,222 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:44:59,298 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 03:45:02,370 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 03:45:05,442 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 03:45:08,514 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 03:45:11,586 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 03:45:14,658 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 03:45:14,659 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 03:45:14,931 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 03:45:19,004 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 03:45:29,004 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 03:45:32,066 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 03:45:32,245 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 03:45:32,249 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 03:50:19,001 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 03:50:32,249 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 03:50:32,250 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 03:50:33,955 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:50:33,955 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:50:33,956 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 03:50:34,894 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 03:50:37,026 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 03:50:40,098 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 03:50:43,170 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 03:50:46,242 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 03:50:49,314 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 03:50:52,386 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 03:50:52,503 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 03:50:55,586 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 03:50:58,658 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 03:51:01,730 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 03:51:04,163 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:51:04,164 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:51:07,234 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 03:51:10,306 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 03:51:13,378 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 03:51:16,450 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 03:51:19,522 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 03:51:22,594 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 03:51:22,595 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 03:51:25,666 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 03:51:35,667 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 03:51:38,722 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 03:51:38,902 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 03:51:38,907 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 03:55:23,071 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 03:55:27,141 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-08 03:55:27,144 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-08 03:55:27,144 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-08 03:55:27,144 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-08 03:55:27,146 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-08 03:55:27,146 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 03:55:27,147 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 03:55:27,147 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 03:55:27,147 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 03:55:27,150 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 03:55:27,150 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 03:55:27,150 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 03:55:27,150 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 03:55:27,150 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 03:55:27,153 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 03:55:27,153 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 03:55:27,153 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 03:55:27,154 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 03:55:27,154 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 03:55:27,156 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 03:55:27,156 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-08 03:55:27,157 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-08 03:55:27,157 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-08 03:55:27,157 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-08 03:55:27,159 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-08 03:55:27,159 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-08 03:55:27,160 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-08 03:55:27,160 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 03:55:27,160 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 03:55:27,162 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-08 03:56:38,907 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 03:56:38,908 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 03:56:40,700 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:56:40,700 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:56:40,700 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 03:56:41,315 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 03:56:43,810 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 03:56:46,882 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 03:56:49,954 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 03:56:53,026 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 03:56:56,098 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 03:56:59,170 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 03:56:59,200 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 03:57:02,307 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 03:57:05,378 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 03:57:08,450 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 03:57:10,217 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 03:57:10,218 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 03:57:13,314 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 03:57:16,386 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 03:57:19,458 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 03:57:22,530 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 03:57:25,602 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 03:57:28,674 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 03:57:28,675 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 03:57:31,746 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 03:57:41,747 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 03:57:44,802 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 03:57:44,984 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 03:57:44,988 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 04:00:27,141 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 04:02:44,988 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 04:02:44,989 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 04:02:45,341 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:02:45,342 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:02:45,342 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 04:02:47,380 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 04:02:48,418 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 04:02:51,490 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 04:02:54,562 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 04:02:57,634 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 04:03:00,706 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 04:03:03,778 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 04:03:03,856 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 04:03:06,914 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 04:03:09,986 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 04:03:13,058 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 04:03:13,410 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:03:13,410 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:03:16,514 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 04:03:19,586 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 04:03:22,658 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 04:03:25,730 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 04:03:28,802 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 04:03:31,874 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 04:03:31,875 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 04:03:33,285 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 04:03:33,285 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 04:03:33,286 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 04:03:33,286 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 04:03:33,292 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 04:03:34,946 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 04:03:44,946 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 04:03:48,002 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 04:03:48,188 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 04:03:48,192 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 04:05:31,213 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 04:08:48,192 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 04:08:48,193 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 04:08:48,827 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:08:48,827 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:08:48,827 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 04:08:50,706 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 04:08:51,938 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 04:08:55,010 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 04:08:58,082 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 04:09:01,154 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 04:09:04,226 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 04:09:07,298 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 04:09:07,387 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 04:09:10,498 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 04:09:13,570 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 04:09:16,642 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 04:09:18,368 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:09:18,368 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:09:21,442 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 04:09:24,514 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 04:09:27,586 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 04:09:27,757 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 04:09:27,757 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 04:09:27,757 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 04:09:27,757 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 04:09:27,758 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 04:09:27,784 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 04:09:27,784 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 04:09:27,784 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 04:09:27,784 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 04:09:27,787 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 04:09:27,859 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-08 04:09:27,859 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-08 04:09:27,859 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-08 04:09:27,859 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-08 04:09:27,862 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-08 04:09:27,939 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-08 04:09:27,939 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-08 04:09:27,939 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-08 04:09:27,939 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-08 04:09:27,945 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-08 04:09:27,956 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 04:09:27,956 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 04:09:27,957 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 04:09:27,957 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 04:09:27,960 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 04:09:30,658 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 04:09:31,033 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 04:09:31,033 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 04:09:31,033 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 04:09:31,033 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 04:09:31,039 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 04:09:33,730 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 04:09:36,802 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 04:09:36,803 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 04:09:39,874 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 04:09:49,875 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 04:09:52,930 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 04:09:53,113 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 04:09:53,118 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 04:10:35,283 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 04:14:53,118 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 04:14:53,119 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 04:14:55,001 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:14:55,001 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:14:55,001 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 04:14:55,518 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 04:14:58,082 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 04:15:01,154 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 04:15:04,226 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 04:15:07,298 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 04:15:10,370 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 04:15:13,442 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 04:15:13,472 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 04:15:16,578 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 04:15:19,650 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 04:15:22,722 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 04:15:24,443 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:15:24,443 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:15:27,522 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 04:15:30,594 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 04:15:33,666 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 04:15:36,738 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 04:15:39,354 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 04:15:43,426 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 04:15:46,530 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 04:15:46,531 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 04:15:49,602 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 04:15:59,603 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 04:16:02,658 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 04:16:02,846 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 04:16:02,850 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 04:20:43,424 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 04:21:02,850 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 04:21:02,850 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 04:21:04,608 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:21:04,608 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:21:04,609 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 04:21:05,379 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 04:21:07,682 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 04:21:10,754 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 04:21:13,826 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 04:21:16,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 04:21:19,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 04:21:23,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 04:21:23,142 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 04:21:26,242 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 04:21:29,314 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 04:21:32,386 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 04:21:33,809 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:21:33,809 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:21:36,866 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 04:21:39,938 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 04:21:43,010 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 04:21:46,082 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 04:21:49,154 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 04:21:52,226 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 04:21:52,227 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 04:21:55,298 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 04:22:05,299 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 04:22:08,354 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 04:22:08,553 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 04:22:08,557 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 04:23:31,719 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-08 04:23:31,719 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-08 04:23:31,719 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-08 04:23:31,720 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-08 04:23:31,720 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 04:23:31,879 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 04:23:31,879 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 04:23:31,879 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 04:23:31,879 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 04:23:31,882 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 04:23:31,898 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 04:23:31,899 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 04:23:31,899 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 04:23:31,899 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 04:23:31,902 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 04:23:31,918 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-08 04:23:31,918 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-08 04:23:31,918 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-08 04:23:31,918 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-08 04:23:31,921 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-08 04:24:11,133 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 04:24:11,133 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 04:24:11,133 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 04:24:11,133 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 04:24:11,139 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 04:25:47,494 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 04:27:08,556 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 04:27:08,557 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 04:27:10,330 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:27:10,330 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:27:10,330 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 04:27:11,214 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 04:27:13,442 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 04:27:16,514 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 04:27:19,586 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 04:27:22,658 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 04:27:25,730 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 04:27:28,802 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 04:27:28,918 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 04:27:32,002 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 04:27:35,074 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 04:27:38,146 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 04:27:40,916 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:27:40,916 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:27:43,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 04:27:47,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 04:27:50,114 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 04:27:53,186 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 04:27:56,258 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 04:27:59,330 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 04:27:59,331 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 04:28:02,402 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 04:28:12,403 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 04:28:15,458 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 04:28:15,640 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 04:28:15,644 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 04:30:51,563 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 04:33:15,645 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 04:33:15,645 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 04:33:17,130 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:33:17,130 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:33:17,130 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 04:33:18,115 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 04:33:20,226 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 04:33:23,298 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 04:33:26,370 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 04:33:29,442 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 04:33:32,514 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 04:33:35,586 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 04:33:35,619 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 04:33:38,722 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 04:33:41,794 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 04:33:44,866 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 04:33:45,236 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:33:45,237 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:33:48,322 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 04:33:51,394 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 04:33:54,466 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 04:33:57,538 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 04:34:00,610 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 04:34:03,682 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 04:34:03,683 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 04:34:06,754 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 04:34:16,755 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 04:34:19,810 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 04:34:19,991 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 04:34:19,996 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 04:35:55,634 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 04:37:35,239 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-08 04:37:35,239 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-08 04:37:35,239 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-08 04:37:35,239 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-08 04:37:35,245 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-08 04:37:35,246 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 04:37:35,246 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 04:37:35,246 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 04:37:35,246 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 04:37:35,249 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 04:37:35,250 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-08 04:37:35,251 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-08 04:37:35,251 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-08 04:37:35,251 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-08 04:37:35,254 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-08 04:37:35,284 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 04:37:35,285 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 04:37:35,285 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 04:37:35,285 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 04:37:35,288 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 04:37:35,319 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-08 04:37:35,319 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-08 04:37:35,319 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 04:37:35,319 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 04:37:35,323 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-08 04:37:35,323 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-08 04:37:35,323 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-08 04:37:35,323 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-08 04:37:35,323 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-08 04:37:35,329 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-08 04:37:35,366 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 04:37:35,366 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 04:37:35,366 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 04:37:35,366 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 04:37:35,373 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 04:39:19,995 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 04:39:19,996 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 04:39:22,388 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 04:39:22,519 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:39:22,519 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:39:22,519 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 04:39:25,602 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 04:39:28,674 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 04:39:31,746 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 04:39:34,818 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 04:39:37,890 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 04:39:40,962 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 04:39:40,989 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 04:39:44,098 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 04:39:47,170 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 04:39:50,242 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 04:39:52,535 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:39:52,535 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:39:55,618 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 04:39:58,690 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 04:40:01,762 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 04:40:04,834 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 04:40:07,906 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 04:40:10,978 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 04:40:10,979 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 04:40:14,050 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 04:40:24,050 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 04:40:27,106 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 04:40:27,289 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 04:40:27,294 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 04:40:59,705 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 04:45:27,294 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 04:45:27,294 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 04:45:28,761 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:45:28,762 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:45:28,762 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 04:45:29,697 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 04:45:31,810 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 04:45:34,882 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 04:45:37,954 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 04:45:41,026 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 04:45:44,098 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 04:45:47,170 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 04:45:47,283 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 04:45:50,370 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 04:45:53,442 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 04:45:56,514 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 04:45:58,175 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:45:58,175 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:46:01,250 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 04:46:03,776 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 04:46:07,849 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 04:46:10,914 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 04:46:13,986 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 04:46:17,058 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 04:46:20,130 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 04:46:20,131 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 04:46:23,202 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 04:46:33,203 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 04:46:36,258 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 04:46:36,443 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 04:46:36,447 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 04:51:07,848 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 04:51:36,448 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 04:51:36,448 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 04:51:38,135 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:51:38,135 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:51:38,135 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 04:51:39,054 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 04:51:39,054 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 04:51:39,054 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 04:51:39,054 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 04:51:39,055 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 04:51:39,069 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-08 04:51:39,069 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-08 04:51:39,069 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-08 04:51:39,069 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-08 04:51:39,075 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-08 04:51:39,107 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 04:51:39,108 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 04:51:39,108 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 04:51:39,108 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 04:51:39,108 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 04:51:39,115 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 04:51:39,115 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 04:51:39,115 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 04:51:39,115 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 04:51:39,115 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 04:51:39,118 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 04:51:39,137 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 04:51:39,138 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 04:51:39,138 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 04:51:39,138 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 04:51:39,144 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 04:51:39,181 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-08 04:51:39,181 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-08 04:51:39,181 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-08 04:51:39,181 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-08 04:51:39,188 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-08 04:51:41,218 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 04:51:44,290 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 04:51:47,362 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 04:51:50,434 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 04:51:53,506 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 04:51:56,578 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 04:51:56,649 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 04:51:59,714 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 04:52:02,786 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 04:52:05,858 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 04:52:07,315 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:52:07,315 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:52:10,402 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 04:52:13,474 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 04:52:16,546 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 04:52:19,618 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 04:52:22,690 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 04:52:25,762 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 04:52:25,763 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 04:52:28,502 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 04:52:28,502 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 04:52:28,502 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 04:52:28,502 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 04:52:28,509 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 04:52:28,834 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 04:52:38,835 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 04:52:41,890 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 04:52:42,076 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 04:52:42,080 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 04:56:11,917 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 04:57:42,080 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 04:57:42,081 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 04:57:43,765 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:57:43,765 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:57:43,765 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 04:57:44,721 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 04:57:46,850 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 04:57:49,922 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 04:57:52,994 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 04:57:56,066 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 04:57:59,138 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 04:58:02,210 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 04:58:02,328 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 04:58:05,410 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 04:58:08,482 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 04:58:11,554 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 04:58:13,282 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 04:58:13,282 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 04:58:16,354 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 04:58:19,426 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 04:58:22,498 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 04:58:25,570 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 04:58:28,642 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 04:58:31,714 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 04:58:31,715 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 04:58:34,786 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 04:58:44,787 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 04:58:47,842 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 04:58:48,032 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 04:58:48,036 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 05:01:15,987 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 05:03:48,037 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 05:03:48,038 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 05:03:48,375 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:03:48,376 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:03:48,376 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 05:03:50,474 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 05:03:51,458 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 05:03:54,530 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 05:03:57,602 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 05:04:00,674 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 05:04:03,746 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 05:04:06,818 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 05:04:06,880 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 05:04:09,954 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 05:04:13,026 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 05:04:16,098 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 05:04:17,817 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:04:17,817 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:04:20,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 05:04:23,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 05:04:27,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 05:04:30,114 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 05:04:33,186 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 05:04:36,258 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 05:04:36,259 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 05:04:39,330 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 05:04:49,330 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 05:04:52,386 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 05:04:52,571 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 05:04:52,575 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 05:05:42,877 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-08 05:05:42,877 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-08 05:05:42,877 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-08 05:05:42,877 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-08 05:05:42,877 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 05:05:42,950 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 05:05:42,950 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 05:05:42,950 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 05:05:42,950 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 05:05:42,953 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 05:05:43,027 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 05:05:43,027 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 05:05:43,028 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 05:05:43,028 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 05:05:43,031 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 05:05:43,037 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-08 05:05:43,037 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-08 05:05:43,038 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-08 05:05:43,038 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-08 05:05:43,040 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-08 05:06:20,057 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 05:06:32,375 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 05:06:32,375 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 05:06:32,375 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 05:06:32,375 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 05:06:32,378 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 05:09:52,574 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 05:09:52,575 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 05:09:54,021 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:09:54,021 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:09:54,022 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 05:09:55,226 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 05:09:57,090 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 05:10:00,162 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 05:10:03,234 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 05:10:06,306 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 05:10:09,378 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 05:10:12,450 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 05:10:12,553 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 05:10:15,650 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 05:10:18,722 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 05:10:21,794 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 05:10:23,515 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:10:23,515 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:10:26,594 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 05:10:29,666 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 05:10:32,738 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 05:10:35,810 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 05:10:38,882 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 05:10:41,954 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 05:10:41,955 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 05:10:45,026 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 05:10:55,027 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 05:10:58,082 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 05:10:58,269 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 05:10:58,274 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 05:11:24,127 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 05:15:58,274 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 05:15:58,274 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 05:15:58,628 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:15:58,628 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:15:58,628 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 05:16:00,695 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 05:16:01,698 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 05:16:04,770 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 05:16:07,842 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 05:16:10,914 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 05:16:13,986 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 05:16:17,058 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 05:16:17,104 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 05:16:20,194 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 05:16:23,266 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 05:16:26,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 05:16:28,198 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 05:16:32,325 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:16:32,325 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:16:35,426 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 05:16:38,498 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 05:16:41,570 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 05:16:44,642 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 05:16:47,714 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 05:16:50,786 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 05:16:50,787 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 05:16:53,858 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 05:17:03,859 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 05:17:06,914 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 05:17:07,088 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 05:17:07,092 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 05:19:46,769 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-08 05:19:46,769 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-08 05:19:46,769 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-08 05:19:46,769 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-08 05:19:46,772 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-08 05:19:46,772 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 05:19:46,773 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 05:19:46,773 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 05:19:46,773 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 05:19:46,784 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 05:19:46,797 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-08 05:19:46,797 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-08 05:19:46,797 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-08 05:19:46,797 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-08 05:19:46,803 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-08 05:19:46,818 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 05:19:46,818 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 05:19:46,818 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 05:19:46,818 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 05:19:46,821 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 05:19:46,834 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 05:19:46,834 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 05:19:46,834 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 05:19:46,834 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 05:19:46,841 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 05:19:46,848 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-08 05:19:46,848 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-08 05:19:46,848 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 05:19:46,848 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 05:19:46,851 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-08 05:19:46,871 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-08 05:19:46,871 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-08 05:19:46,872 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-08 05:19:46,872 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-08 05:19:46,875 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-08 05:21:32,268 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 05:22:07,093 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 05:22:07,094 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 05:22:08,565 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:22:08,565 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:22:08,565 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 05:22:09,748 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 05:22:11,618 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 05:22:14,690 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 05:22:17,762 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 05:22:20,834 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 05:22:23,906 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 05:22:26,978 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 05:22:27,081 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 05:22:30,178 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 05:22:33,250 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 05:22:36,322 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 05:22:38,040 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:22:38,040 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:22:41,122 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 05:22:44,194 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 05:22:47,266 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 05:22:50,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 05:22:53,410 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 05:22:56,482 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 05:22:56,483 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 05:22:59,554 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 05:23:09,555 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 05:23:12,610 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 05:23:12,790 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 05:23:12,795 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 05:26:36,338 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 05:28:12,795 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 05:28:12,795 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 05:28:14,491 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:28:14,491 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:28:14,491 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 05:28:15,265 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 05:28:17,570 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 05:28:20,642 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 05:28:23,714 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 05:28:26,786 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 05:28:29,858 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 05:28:32,930 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 05:28:32,963 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 05:28:36,066 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 05:28:39,138 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 05:28:42,210 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 05:28:43,622 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:28:43,622 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:28:46,690 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 05:28:49,762 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 05:28:52,834 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 05:28:55,906 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 05:28:58,978 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 05:29:02,050 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 05:29:02,051 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 05:29:05,122 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 05:29:15,123 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 05:29:18,178 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 05:29:18,360 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 05:29:18,364 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 05:31:40,409 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 05:33:50,585 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 05:33:50,585 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 05:33:50,585 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 05:33:50,585 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 05:33:50,585 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 05:33:50,604 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-08 05:33:50,604 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-08 05:33:50,604 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-08 05:33:50,604 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-08 05:33:50,607 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-08 05:33:50,629 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 05:33:50,629 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 05:33:50,629 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 05:33:50,629 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 05:33:50,632 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 05:33:50,632 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 05:33:50,632 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 05:33:50,632 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 05:33:50,632 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 05:33:50,635 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 05:33:50,636 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 05:33:50,636 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 05:33:50,636 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 05:33:50,636 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 05:33:50,638 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 05:33:50,713 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-08 05:33:50,713 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-08 05:33:50,713 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-08 05:33:50,713 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-08 05:33:50,716 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-08 05:34:18,363 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 05:34:18,364 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 05:34:19,869 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:34:19,869 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:34:19,869 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 05:34:20,808 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 05:34:22,946 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 05:34:26,018 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 05:34:29,090 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 05:34:32,162 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 05:34:35,234 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 05:34:38,306 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 05:34:38,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 05:34:40,134 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 05:34:40,134 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 05:34:40,134 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 05:34:40,134 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 05:34:40,138 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 05:34:41,442 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 05:34:44,514 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 05:34:47,586 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 05:34:50,462 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:34:50,463 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:34:53,538 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 05:34:56,610 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 05:34:59,682 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 05:35:02,754 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 05:35:05,827 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 05:35:08,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 05:35:08,899 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 05:35:11,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 05:35:21,971 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 05:35:25,026 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 05:35:25,208 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 05:35:25,212 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 05:36:44,479 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 05:40:25,212 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 05:40:25,212 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 05:40:26,614 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:40:26,614 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:40:26,614 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 05:40:27,858 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 05:40:29,666 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 05:40:32,738 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 05:40:35,810 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 05:40:38,882 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 05:40:41,954 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 05:40:45,026 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 05:40:45,143 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 05:40:48,226 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 05:40:51,298 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 05:40:54,370 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 05:40:55,795 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:40:55,795 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:40:58,850 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 05:41:01,922 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 05:41:04,994 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 05:41:08,066 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 05:41:11,138 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 05:41:14,210 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 05:41:14,211 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 05:41:17,282 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 05:41:27,283 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 05:41:30,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 05:41:30,525 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 05:41:30,529 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 05:41:48,549 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 05:46:30,529 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 05:46:30,530 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 05:46:32,268 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:46:32,268 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:46:32,268 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 05:46:32,957 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 05:46:35,362 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 05:46:38,434 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 05:46:41,506 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 05:46:44,578 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 05:46:47,650 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 05:46:50,722 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 05:46:50,819 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 05:46:52,620 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 05:46:56,693 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 05:46:59,746 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 05:47:02,818 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 05:47:03,201 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:47:03,201 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:47:06,274 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 05:47:09,346 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 05:47:12,418 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 05:47:15,490 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 05:47:18,562 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 05:47:21,634 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 05:47:21,635 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 05:47:24,706 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 05:47:34,707 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 05:47:37,762 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 05:47:37,942 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 05:47:37,946 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 05:47:54,397 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-08 05:47:54,397 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-08 05:47:54,397 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-08 05:47:54,398 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-08 05:47:54,398 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 05:47:54,471 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-08 05:47:54,471 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-08 05:47:54,471 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-08 05:47:54,471 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-08 05:47:54,478 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-08 05:47:54,500 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 05:47:54,500 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 05:47:54,500 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 05:47:54,500 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 05:47:54,503 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 05:47:54,572 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 05:47:54,572 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 05:47:54,573 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 05:47:54,573 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 05:47:54,580 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 05:48:43,642 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 05:48:43,642 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 05:48:43,643 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 05:48:43,643 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 05:48:43,646 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 05:48:43,662 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 05:48:43,663 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 05:48:43,663 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 05:48:43,663 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 05:48:43,663 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-08 05:51:56,691 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 05:52:37,947 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 05:52:37,947 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 05:52:39,436 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:52:39,436 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:52:39,436 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 05:52:40,356 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 05:52:42,530 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 05:52:45,602 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 05:52:48,674 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 05:52:51,746 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 05:52:54,818 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 05:52:57,890 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 05:52:57,929 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 05:53:01,026 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 05:53:04,098 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 05:53:07,170 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 05:53:07,526 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:53:07,526 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:53:10,626 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 05:53:13,698 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 05:53:16,770 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 05:53:19,842 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 05:53:22,914 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 05:53:25,986 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 05:53:25,987 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 05:53:29,058 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 05:53:39,058 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 05:53:42,114 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 05:53:42,301 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 05:53:42,305 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 05:57:00,761 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 05:58:42,306 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 05:58:42,306 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 05:58:42,644 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:58:42,644 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:58:42,644 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 05:58:45,077 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 05:58:45,730 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 05:58:48,802 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 05:58:51,874 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 05:58:54,946 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 05:58:58,018 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 05:59:01,090 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 05:59:01,147 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 05:59:04,226 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 05:59:07,298 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 05:59:10,370 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 05:59:10,732 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 05:59:10,732 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 05:59:13,826 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 05:59:16,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 05:59:19,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 05:59:23,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 05:59:26,114 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 05:59:29,186 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 05:59:29,187 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 05:59:32,258 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 05:59:42,259 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 05:59:45,314 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 05:59:45,501 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 05:59:45,506 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 06:01:58,275 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-08 06:01:58,275 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-08 06:01:58,276 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-08 06:01:58,276 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-08 06:01:58,282 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-08 06:01:58,325 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 06:01:58,325 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 06:01:58,325 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 06:01:58,326 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 06:01:58,329 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 06:01:58,333 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-08 06:01:58,333 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-08 06:01:58,334 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-08 06:01:58,334 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-08 06:01:58,336 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-08 06:01:58,366 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-08 06:01:58,366 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-08 06:01:58,367 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 06:01:58,367 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 06:01:58,370 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-08 06:01:58,384 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 06:01:58,384 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 06:01:58,384 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 06:01:58,384 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 06:01:58,391 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 06:01:58,468 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-08 06:01:58,469 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-08 06:01:58,469 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-08 06:01:58,469 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-08 06:01:58,475 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-08 06:02:04,831 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 06:04:45,506 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 06:04:45,507 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 06:04:47,235 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:04:47,235 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:04:47,236 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 06:04:48,180 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 06:04:50,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 06:04:53,410 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 06:04:56,482 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 06:04:59,554 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 06:05:02,626 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 06:05:05,698 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 06:05:05,797 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 06:05:08,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 06:05:11,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 06:05:15,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 06:05:17,550 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:05:17,550 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:05:20,610 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 06:05:23,682 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 06:05:26,754 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 06:05:29,826 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 06:05:32,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 06:05:35,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 06:05:35,971 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 06:05:39,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 06:05:49,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 06:05:52,098 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 06:05:52,281 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 06:05:52,285 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 06:07:08,901 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 06:10:52,285 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 06:10:52,286 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 06:10:54,747 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:10:54,748 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:10:54,748 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 06:10:54,905 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 06:10:57,826 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 06:11:00,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 06:11:03,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 06:11:07,042 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 06:11:10,114 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 06:11:13,186 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 06:11:13,212 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 06:11:16,322 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 06:11:19,394 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 06:11:22,466 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 06:11:23,011 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:11:23,011 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:11:26,114 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 06:11:29,186 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 06:11:32,258 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 06:11:35,330 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 06:11:38,402 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 06:11:41,474 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 06:11:41,475 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 06:11:44,546 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 06:11:54,547 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 06:11:57,602 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 06:11:57,779 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 06:11:57,783 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 06:12:12,970 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 06:16:01,778 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 06:16:01,779 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 06:16:01,779 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 06:16:01,779 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 06:16:01,785 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 06:16:01,785 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 06:16:01,785 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 06:16:01,785 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 06:16:01,785 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 06:16:01,786 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 06:16:01,835 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-08 06:16:01,835 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-08 06:16:01,835 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-08 06:16:01,835 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-08 06:16:01,838 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-08 06:16:01,884 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 06:16:01,884 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 06:16:01,884 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 06:16:01,884 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 06:16:01,887 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 06:16:01,887 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 06:16:01,887 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 06:16:01,887 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 06:16:01,887 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 06:16:01,898 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 06:16:01,924 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 06:16:01,928 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 06:16:01,928 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 06:16:01,928 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 06:16:01,932 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 06:16:01,956 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-08 06:16:01,957 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-08 06:16:01,957 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-08 06:16:01,957 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-08 06:16:01,960 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-08 06:16:57,783 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 06:16:57,783 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 06:16:59,574 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:16:59,574 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:16:59,575 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 06:17:00,458 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 06:17:02,626 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 06:17:05,698 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 06:17:08,770 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 06:17:11,842 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 06:17:14,914 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 06:17:17,041 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 06:17:21,114 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 06:17:21,145 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 06:17:24,194 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 06:17:27,266 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 06:17:30,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 06:17:32,083 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:17:32,083 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:17:35,138 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 06:17:38,210 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 06:17:41,282 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 06:17:44,354 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 06:17:47,426 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 06:17:50,498 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 06:17:50,499 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 06:17:53,570 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 06:18:03,571 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 06:18:06,626 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 06:18:06,812 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 06:18:06,816 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 06:22:21,111 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 06:23:06,817 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 06:23:06,817 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 06:23:09,015 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:23:09,015 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:23:09,015 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 06:23:09,235 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 06:23:12,098 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 06:23:15,170 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 06:23:18,242 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 06:23:21,314 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 06:23:24,386 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 06:23:27,458 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 06:23:27,539 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 06:23:30,594 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 06:23:33,666 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 06:23:36,738 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 06:23:38,437 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:23:38,437 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:23:41,538 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 06:23:44,610 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 06:23:47,682 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 06:23:50,754 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 06:23:53,827 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 06:23:56,898 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 06:23:56,899 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 06:23:59,970 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 06:24:09,971 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 06:24:13,026 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 06:24:13,222 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 06:24:13,227 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 06:27:25,181 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 06:29:13,228 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 06:29:13,228 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 06:29:14,703 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:29:14,703 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:29:14,703 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 06:29:15,645 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 06:29:17,794 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 06:29:20,866 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 06:29:23,938 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 06:29:27,010 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 06:29:30,082 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 06:29:33,154 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 06:29:33,213 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 06:29:36,290 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 06:29:39,362 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 06:29:42,434 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 06:29:44,102 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:29:44,102 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:29:47,170 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 06:29:50,242 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 06:29:53,314 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 06:29:56,386 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 06:29:59,458 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 06:30:02,530 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 06:30:02,531 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 06:30:05,602 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 06:30:05,648 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-08 06:30:05,648 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-08 06:30:05,648 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-08 06:30:05,648 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-08 06:30:05,649 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 06:30:05,733 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 06:30:05,733 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 06:30:05,733 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 06:30:05,733 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 06:30:05,736 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 06:30:05,738 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 06:30:05,738 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 06:30:05,738 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 06:30:05,738 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 06:30:05,747 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 06:30:05,880 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-08 06:30:05,881 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-08 06:30:05,881 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-08 06:30:05,881 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-08 06:30:05,884 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-08 06:30:15,603 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 06:30:18,658 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 06:30:18,837 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 06:30:18,842 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 06:30:55,426 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 06:30:55,426 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 06:30:55,426 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 06:30:55,426 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 06:30:55,433 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 06:32:29,251 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 06:35:18,843 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 06:35:18,843 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 06:35:19,206 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:35:19,207 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:35:19,207 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 06:35:21,516 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 06:35:22,274 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 06:35:25,346 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 06:35:28,418 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 06:35:31,490 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 06:35:34,562 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 06:35:37,634 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 06:35:37,658 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 06:35:40,706 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 06:35:43,778 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 06:35:46,850 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 06:35:48,290 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:35:48,290 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:35:51,394 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 06:35:54,466 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 06:35:57,538 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 06:36:00,610 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 06:36:03,682 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 06:36:06,754 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 06:36:06,755 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 06:36:09,826 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 06:36:19,826 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 06:36:22,882 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 06:36:23,067 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 06:36:23,072 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 06:37:33,321 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 06:41:23,072 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 06:41:23,072 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 06:41:24,987 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:41:24,987 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:41:24,987 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 06:41:25,492 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 06:41:28,098 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 06:41:31,170 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 06:41:34,242 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 06:41:37,314 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 06:41:40,386 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 06:41:43,458 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 06:41:43,537 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 06:41:46,594 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 06:41:49,666 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 06:41:52,738 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 06:41:53,094 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:41:53,095 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:41:56,194 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 06:41:59,266 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 06:42:02,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 06:42:05,410 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 06:42:08,482 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 06:42:11,554 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 06:42:11,555 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 06:42:14,626 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 06:42:24,627 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 06:42:27,682 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 06:42:27,872 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 06:42:27,877 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 06:42:37,390 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 06:44:09,582 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-08 06:44:09,582 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-08 06:44:09,582 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-08 06:44:09,582 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-08 06:44:09,589 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-08 06:44:09,611 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-08 06:44:09,611 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-08 06:44:09,611 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-08 06:44:09,611 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-08 06:44:09,614 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-08 06:44:09,681 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 06:44:09,681 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 06:44:09,682 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 06:44:09,682 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 06:44:09,685 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 06:44:09,705 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 06:44:09,705 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 06:44:09,705 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 06:44:09,705 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 06:44:09,708 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 06:44:09,712 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-08 06:44:09,712 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-08 06:44:09,712 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 06:44:09,712 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 06:44:09,715 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-08 06:44:09,812 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-08 06:44:09,812 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-08 06:44:09,812 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-08 06:44:09,812 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-08 06:44:09,816 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-08 06:44:58,863 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 06:44:58,863 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 06:44:58,863 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 06:44:58,863 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 06:44:58,864 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 06:47:27,877 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 06:47:27,878 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 06:47:30,317 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 06:47:30,727 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:47:30,727 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:47:30,727 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 06:47:33,794 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 06:47:36,866 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 06:47:39,938 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 06:47:41,460 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 06:47:45,532 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 06:47:48,642 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 06:47:51,714 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 06:47:51,771 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 06:47:54,850 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 06:47:57,922 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 06:48:00,994 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 06:48:02,717 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:48:02,717 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:48:05,794 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 06:48:08,866 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 06:48:11,938 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 06:48:15,010 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 06:48:18,082 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 06:48:21,154 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 06:48:21,155 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 06:48:24,226 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 06:48:34,227 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 06:48:37,282 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 06:48:37,467 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 06:48:37,471 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 06:52:45,529 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 06:52:45,538 - app.services.device_status_checker - INFO - Device nw-9cf332 status changed: online=True, power=on
2025-10-08 06:53:37,471 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 06:53:37,472 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 06:53:39,148 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:53:39,148 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:53:39,148 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 06:53:39,904 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 06:53:42,242 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 06:53:45,314 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 06:53:48,386 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 06:53:51,458 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 06:53:54,530 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 06:53:57,602 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 06:53:57,655 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 06:54:00,738 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 06:54:03,810 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 06:54:06,882 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 06:54:07,265 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:54:07,265 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:54:10,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 06:54:13,410 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 06:54:16,482 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 06:54:19,554 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 06:54:22,626 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 06:54:25,698 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 06:54:25,699 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 06:54:28,770 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 06:54:38,771 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 06:54:41,826 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 06:54:42,007 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 06:54:42,011 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 06:57:48,592 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 06:58:13,454 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 06:58:13,455 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 06:58:13,455 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 06:58:13,455 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 06:58:13,455 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 06:58:13,483 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 06:58:13,484 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 06:58:13,484 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 06:58:13,484 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 06:58:13,490 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 06:58:13,545 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-08 06:58:13,545 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-08 06:58:13,545 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-08 06:58:13,545 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-08 06:58:13,567 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-08 06:58:13,608 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 06:58:13,609 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 06:58:13,609 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 06:58:13,609 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 06:58:13,630 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 06:58:13,630 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 06:58:13,630 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 06:58:13,630 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 06:58:13,630 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 06:58:13,633 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 06:59:02,684 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 06:59:02,685 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 06:59:02,685 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 06:59:02,685 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 06:59:02,688 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 06:59:42,011 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 06:59:42,011 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 06:59:43,471 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 06:59:43,471 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 06:59:43,471 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 06:59:44,445 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 06:59:46,530 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 06:59:49,602 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 06:59:52,674 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 06:59:55,746 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 06:59:58,818 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 07:00:01,890 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 07:00:02,005 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 07:00:05,090 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 07:00:08,162 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 07:00:11,234 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 07:00:14,032 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 07:00:14,033 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 07:00:17,122 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 07:00:20,194 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 07:00:23,266 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 07:00:26,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 07:00:29,410 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 07:00:32,482 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 07:00:32,483 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 07:00:35,554 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 07:00:45,554 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 07:00:48,610 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 07:00:48,791 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 07:00:48,796 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 07:02:51,654 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 07:05:48,797 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 07:05:48,797 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 07:05:50,548 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 07:05:50,548 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 07:05:50,549 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 07:05:51,204 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 07:05:53,634 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 07:05:56,706 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 07:05:59,778 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 07:06:02,850 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 07:06:05,922 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 07:06:08,994 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 07:06:09,112 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 07:06:12,194 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 07:06:15,266 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 07:06:18,338 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 07:06:18,741 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: EOF received
2025-10-08 07:06:18,742 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: EOF received
2025-10-08 07:06:21,794 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.147', 6053): [Errno 113] Connect call failed ('192.168.101.147', 6053)
2025-10-08 07:06:24,866 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.148', 6053): [Errno 113] Connect call failed ('192.168.101.148', 6053)
2025-10-08 07:06:27,938 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.149', 6053): [Errno 113] Connect call failed ('192.168.101.149', 6053)
2025-10-08 07:06:31,010 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.150', 6053): [Errno 113] Connect call failed ('192.168.101.150', 6053)
2025-10-08 07:06:34,082 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.151', 6053): [Errno 113] Connect call failed ('192.168.101.151', 6053)
2025-10-08 07:06:37,154 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.152', 6053): [Errno 113] Connect call failed ('192.168.101.152', 6053)
2025-10-08 07:06:37,155 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.153', 6053): [Errno 111] Connect call failed ('192.168.101.153', 6053)
2025-10-08 07:06:40,226 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.154', 6053): [Errno 113] Connect call failed ('192.168.101.154', 6053)
2025-10-08 07:06:50,227 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 07:06:53,282 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.156', 6053): [Errno 113] Connect call failed ('192.168.101.156', 6053)
2025-10-08 07:06:53,462 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 07:06:53,467 - app.services.device_health - INFO - Health check complete: 1/2 devices online
2025-10-08 07:07:54,716 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 07:11:33,144 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-08 07:11:33,144 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-08 07:11:33,145 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-08 07:11:33,145 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-08 07:11:33,145 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 07:11:33,155 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 07:11:33,155 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 07:11:33,155 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 07:11:33,155 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 07:11:33,155 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-08 07:11:33,192 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 07:11:33,193 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 07:11:33,193 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 07:11:33,193 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 07:11:33,196 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 07:11:33,827 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 07:11:33,828 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 07:11:33,828 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 07:11:33,828 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 07:11:33,831 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 07:11:53,466 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 07:11:53,467 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 07:11:56,359 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 07:11:57,554 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 07:11:57,755 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 07:11:57,934 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 07:11:57,940 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 07:12:17,028 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 07:12:17,028 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 07:12:17,028 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 07:12:17,028 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 07:12:17,035 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 07:12:17,064 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-08 07:12:17,064 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-08 07:12:17,064 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-08 07:12:17,065 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-08 07:12:17,067 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-08 07:12:17,114 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 07:12:17,114 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 07:12:17,114 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 07:12:17,114 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 07:12:17,117 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 07:12:17,118 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-08 07:12:17,118 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-08 07:12:17,118 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-08 07:12:17,118 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-08 07:12:17,127 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-08 07:12:57,775 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 07:12:58,791 - app.services.device_status_checker - INFO - Device nw-9cf332 status changed: online=False, power=off
2025-10-08 07:12:58,794 - app.services.device_status_checker - INFO - Device nw-f5a756 status changed: online=True, power=on
2025-10-08 07:16:57,940 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 07:16:57,940 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 07:17:00,330 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 07:17:00,836 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 07:17:01,032 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 07:17:01,219 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 07:17:01,223 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 07:18:00,831 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 07:22:01,223 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 07:22:01,224 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 07:22:03,630 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 07:22:03,862 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 07:22:04,062 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 07:22:04,245 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 07:22:04,249 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 07:23:03,889 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 07:26:20,811 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-08 07:26:20,811 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-08 07:26:20,812 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-08 07:26:20,812 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-08 07:26:20,815 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-08 07:26:20,861 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 07:26:20,861 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 07:26:20,862 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 07:26:20,862 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 07:26:20,865 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 07:26:20,896 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 07:26:20,897 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 07:26:20,897 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 07:26:20,897 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 07:26:20,900 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 07:27:04,249 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 07:27:04,250 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 07:27:06,628 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 07:27:06,686 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 07:27:06,886 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 07:27:07,071 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 07:27:07,076 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 07:28:06,945 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 07:32:07,076 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 07:32:07,076 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 07:32:09,743 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 07:32:09,753 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 07:32:09,960 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 07:32:10,145 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 07:32:10,149 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 07:33:09,999 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 07:37:10,150 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 07:37:10,151 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 07:37:12,659 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 07:37:12,833 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 07:37:13,027 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 07:37:13,223 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 07:37:13,227 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 07:38:13,054 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 07:40:24,651 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-08 07:40:24,651 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-08 07:40:24,651 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-08 07:40:24,651 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-08 07:40:24,657 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-08 07:40:24,680 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 07:40:24,680 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 07:40:24,680 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 07:40:24,680 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 07:40:24,687 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 07:40:24,701 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 07:40:24,701 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 07:40:24,701 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 07:40:24,702 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 07:40:24,708 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 07:40:24,766 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 07:40:24,767 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 07:40:24,767 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 07:40:24,767 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 07:40:24,770 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 07:40:34,750 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-08 07:40:34,750 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-08 07:40:34,750 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-08 07:40:34,750 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-08 07:40:34,753 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-08 07:42:13,228 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 07:42:13,229 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 07:42:15,634 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 07:42:15,640 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 07:42:15,850 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 07:42:16,052 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 07:42:16,056 - app.services.device_health - INFO - Health check complete: 2/2 devices online
INFO:     100.98.57.42:65121 - "GET /api/v1/commands/queue/metrics HTTP/1.1" 200 OK
INFO:     100.98.57.42:65121 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:65121 - "GET /api/v1/commands/queue/metrics HTTP/1.1" 200 OK
INFO:     100.98.57.42:65121 - "GET /api/v1/commands/queue/metrics HTTP/1.1" 200 OK
INFO:     100.98.57.42:65121 - "GET /api/v1/commands/queue/metrics HTTP/1.1" 200 OK
INFO:     100.98.57.42:65121 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:65121 - "GET /api/v1/commands/queue/metrics HTTP/1.1" 200 OK
INFO:     100.98.57.42:65121 - "GET /api/v1/commands/queue/metrics HTTP/1.1" 200 OK
INFO:     100.98.57.42:65121 - "GET /api/v1/commands/queue/metrics HTTP/1.1" 200 OK
INFO:     100.98.57.42:65121 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:65121 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:63830 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     100.98.57.42:63830 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:65121 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63641 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:60136 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60820 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63830 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56327 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:56327 - "GET /api/v1/ir-codes/libraries/1799/commands HTTP/1.1" 200 OK
INFO:     100.98.57.42:60918 - "GET /api/v1/settings/app?include_private=true HTTP/1.1" 200 OK
INFO:     100.98.57.42:53415 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     100.98.57.42:59588 - "GET /api/v1/management/available-channels HTTP/1.1" 200 OK
2025-10-08 07:43:16,110 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 07:43:18,143 - app.services.device_status_checker - INFO - Device nw-f5a756 status changed: online=False, power=off
INFO:     100.98.57.42:54243 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:64732 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:52710 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:52766 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:62784 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:62784 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:55021 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:51475 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:62784 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64055 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:51369 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56075 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:61370 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:52552 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:55397 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:58737 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:60973 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:60973 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:61733 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:62951 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62951 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61733 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60973 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:35696 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:50487 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55880 - "GET /api/virtual-controllers/ HTTP/1.1" 200 OK
INFO:     100.98.57.42:57581 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60960 - "GET /api/virtual-controllers/9 HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:51059 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38220 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:61904 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:61198 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
INFO:     100.98.57.42:51229 - "GET /api/v1/commands/queue/all?limit=1000 HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app/routers/virtual_controllers.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-08 07:46:03,004 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-08 07:46:03,004 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-08 07:46:03,004 - app.main - INFO - TV status polling service stopped
2025-10-08 07:46:03,004 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-08 07:46:03,004 - app.main - INFO - Device status monitoring stopped
2025-10-08 07:46:03,004 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-08 07:46:03,004 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-08 07:46:03,004 - app.main - INFO - Schedule processor stopped
2025-10-08 07:46:03,004 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-08 07:46:03,004 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-08 07:46:03,004 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-08 07:46:03,004 - app.main - INFO - History cleanup service stopped
2025-10-08 07:46:03,004 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-08 07:46:03,004 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-08 07:46:03,004 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-08 07:46:03,004 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-08 07:46:03,004 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-08 07:46:03,004 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-08 07:46:03,004 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-08 07:46:03,004 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-08 07:46:03,004 - app.main - INFO - Command queue processor stopped
2025-10-08 07:46:03,004 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-08 07:46:03,005 - app.main - INFO - Device health monitoring stopped
2025-10-08 07:46:03,005 - app.services.discovery - INFO - Stopping device discovery...
2025-10-08 07:46:03,005 - app.services.discovery - INFO - Device discovery stopped
2025-10-08 07:46:03,005 - app.main - INFO - Device discovery stopped
INFO:     Application shutdown complete.
INFO:     Finished server process [596060]
/home/coastal/smartvenue/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [601559]
INFO:     Waiting for application startup.
2025-10-08 07:46:05,350 - app.main - INFO - Starting SmartVenue backend...
2025-10-08 07:46:05,358 - app.main - INFO - Database tables created
2025-10-08 07:46:05,390 - app.main - INFO - Database initialized with seed data
2025-10-08 07:46:05,390 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-08 07:46:05,392 - app.services.discovery - INFO - Device discovery started
2025-10-08 07:46:05,392 - app.main - INFO - Device discovery started
2025-10-08 07:46:05,392 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-08 07:46:05,392 - app.main - INFO - Device health monitoring started
2025-10-08 07:46:05,392 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-08 07:46:05,392 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-08 07:46:05,392 - app.main - INFO - Command queue processor started
2025-10-08 07:46:05,392 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-08 07:46:05,392 - app.main - INFO - History cleanup service started
2025-10-08 07:46:05,392 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-08 07:46:05,394 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-08 07:46:05,396 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-08 07:46:05,396 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-08 07:46:05,396 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-08 07:46:05,396 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-08 07:46:05,397 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-08 07:46:05,397 - apscheduler.scheduler - INFO - Scheduler started
2025-10-08 07:46:05,397 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-08 07:46:05,397 - app.main - INFO - Schedule processor started
2025-10-08 07:46:05,397 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-08 07:46:05,397 - app.main - INFO - Device status monitoring started
2025-10-08 07:46:05,397 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-08 07:46:05,397 - app.main - INFO - TV status polling service started
2025-10-08 07:46:05,398 - app.services.queue_processor - INFO - Worker 0 started
2025-10-08 07:46:05,404 - app.services.queue_processor - INFO - Worker 1 started
2025-10-08 07:46:05,405 - app.services.queue_processor - INFO - Worker 2 started
2025-10-08 07:46:05,406 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-09 03:00:00 (in 19.2 hours)
2025-10-08 07:46:05,414 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     Application startup complete.
Template seeding complete; using dynamic IR library system.
INFO:     100.98.57.42:57763 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:60644 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
2025-10-08 07:46:09,526 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
INFO:     127.0.0.1:49934 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:63976 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56981 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
2025-10-08 07:46:09,531 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
INFO:     100.98.57.42:61727 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
2025-10-08 07:46:09,531 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
INFO:     100.98.57.42:62906 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
2025-10-08 07:46:09,531 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-08 07:46:09,541 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 07:46:09,542 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-08 07:46:09,543 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-08 07:46:09,543 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-08 07:46:09,543 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-08 07:46:09,546 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-08 07:46:09,548 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 07:46:09,548 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 07:46:09,549 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 07:46:09,549 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 07:46:09,553 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 07:46:09,566 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 07:46:09,567 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 07:46:09,567 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 07:46:09,567 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 07:46:09,573 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 07:46:09,598 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 07:46:09,598 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 07:46:09,598 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 07:46:09,598 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 07:46:09,605 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 07:46:09,609 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-08 07:46:09,609 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-08 07:46:09,609 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-08 07:46:09,609 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-08 07:46:09,612 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-08 07:46:09,748 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-08 07:46:09,748 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-08 07:46:09,748 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-08 07:46:09,748 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-08 07:46:09,751 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-08 07:46:09,753 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-08 07:46:09,753 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-08 07:46:09,753 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-08 07:46:09,753 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-08 07:46:09,756 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-08 07:46:09,756 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-08 07:46:09,757 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-08 07:46:09,757 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 07:46:09,757 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 07:46:09,760 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-08 07:46:10,569 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 07:46:10,569 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 07:46:10,569 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 07:46:10,569 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 07:46:10,570 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-08 07:46:10,572 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-08 07:46:10,572 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-08 07:46:10,572 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-08 07:46:10,572 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-08 07:46:10,575 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-08 07:46:10,588 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 07:46:10,588 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 07:46:10,588 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 07:46:10,588 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 07:46:10,591 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
INFO:     100.98.57.42:60614 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:62260 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:59047 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60614 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:54251 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54106 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64844 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62260 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     127.0.0.1:43018 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:43030 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:43030 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:62282 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     127.0.0.1:45582 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:45584 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:42524 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:62565 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55090 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57387 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:51290 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:42532 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:35538 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:35544 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:64783 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:58542 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58824 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:52229 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:51982 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63084 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64783 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52229 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:51982 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:58542 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58824 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63084 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     127.0.0.1:46602 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46614 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:40942 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:63764 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64901 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49446 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50371 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53024 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63393 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63764 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64901 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:40950 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:43722 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:43726 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:60282 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:64171 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:61163 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:59861 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63366 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54690 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57799 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61163 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64171 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59861 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54690 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60298 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:57482 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:57484 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:56344 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:56350 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:41400 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:41408 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:52564 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:52578 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46258 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46270 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:55010 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:62308 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:55531 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56084 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62034 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59696 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62308 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55010 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55531 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56084 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:38856 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:38872 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:41240 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:41246 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:39472 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:39480 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:60966 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:60976 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:56824 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:56830 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:60932 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:60938 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:55336 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:57984 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:53752 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58605 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55336 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:51997 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64366 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57984 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53752 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58605 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:52648 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:52650 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:55664 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:55678 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:57890 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:57892 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:33850 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:33856 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:37078 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:37082 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:38080 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 07:51:05,397 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 07:51:05,398 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 07:51:08,014 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 07:51:08,063 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 07:51:08,280 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 07:51:08,461 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 07:51:08,467 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 07:51:09,504 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     127.0.0.1:38080 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:57162 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:65486 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:58231 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50362 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53875 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54059 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57162 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:65486 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58231 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54059 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:38084 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:51134 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:51136 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:33180 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:33186 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:39000 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:39006 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:48754 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:48760 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:54572 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:54582 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:49555 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:49292 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:49555 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49292 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62424 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60154 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49555 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49292 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49953 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61289 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:52434 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:52446 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:47226 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:47228 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:39692 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:39698 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:56310 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:56312 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46534 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46540 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:58226 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:58232 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:52932 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:53274 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:52932 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53274 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53274 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52932 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53592 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54036 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59933 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61787 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50640 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:50656 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:53384 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:53396 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:34292 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:34298 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:56234 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:56244 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:50682 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:50698 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:41718 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:53879 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:49520 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:58824 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62287 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62287 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58824 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49520 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53879 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62174 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49213 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:41734 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:44750 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:44764 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:41332 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:41336 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:41988 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:38934 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:48996 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:49006 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:54918 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:54930 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:48580 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:64574 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:50916 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:49954 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55447 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49954 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55447 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64574 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50916 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64574 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55447 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:48588 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:40274 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:40276 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 07:55:31,826 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-08 07:55:31,826 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-08 07:55:31,826 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-08 07:55:31,826 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-08 07:55:31,827 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 07:55:31,869 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 07:55:31,869 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 07:55:31,869 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 07:55:31,869 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 07:55:31,875 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
INFO:     127.0.0.1:58832 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:58836 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:60230 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:60240 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:51344 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:51348 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:50110 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 07:56:08,468 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 07:56:08,469 - app.services.device_health - INFO - Checking health of 2 managed devices
INFO:     127.0.0.1:50116 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 07:56:11,370 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 07:56:11,391 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 07:56:11,619 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 07:56:11,811 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 07:56:11,816 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 07:56:13,574 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     127.0.0.1:50116 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:54605 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:57692 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:62816 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52288 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60166 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62886 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57692 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54605 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62816 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60166 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:45562 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:45572 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:53872 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:53874 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:42220 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:42230 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:35198 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:35202 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:49284 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:49298 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:51360 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:62213 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:62213 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:63859 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52240 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57132 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61971 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62213 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63859 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59605 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52240 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:51366 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:36418 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:36426 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:56602 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:56606 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:57098 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:57106 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:40172 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:40182 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:59678 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:59694 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:42750 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:56240 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:59912 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:59912 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56240 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60196 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61767 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59912 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54257 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62247 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56240 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:42756 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46770 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46774 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:38608 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:38610 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:52938 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:52952 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:55962 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:55970 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:35934 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:35936 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:50362 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:62392 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:62392 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50362 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61327 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61327 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50362 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62392 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59186 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54505 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:43986 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:43990 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:39384 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:39390 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:58062 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:58078 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:35526 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:35534 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:00:00,000 - apscheduler.executors.default - INFO - Running job "Test Update2 (trigger: cron[month='*', day='*', day_of_week='mon-fri', hour='8', minute='0'], next run at: 2025-10-09 08:00:00 AEDT)" (scheduled at 2025-10-08 08:00:00+11:00)
2025-10-08 08:00:00,001 - app.services.schedule_processor - INFO - ‚è∞ Executing schedule: Test Update2 (ID: 1)
2025-10-08 08:00:00,003 - app.services.schedule_processor - INFO -   üìç Found 4 target devices
2025-10-08 08:00:00,003 - app.services.schedule_processor - INFO -   üé¨ Action 1/1: power_on
2025-10-08 08:00:00,040 - app.services.schedule_processor - INFO -   ‚úÖ Queued 4 commands in batch sched_1_c5ff0163
2025-10-08 08:00:00,049 - app.services.schedule_processor - INFO - ‚úÖ Schedule execution completed: Test Update2
2025-10-08 08:00:00,049 - app.services.schedule_processor - INFO -   Next run: 2025-10-09 08:00:00
2025-10-08 08:00:00,049 - apscheduler.executors.default - INFO - Job "Test Update2 (trigger: cron[month='*', day='*', day_of_week='mon-fri', hour='8', minute='0'], next run at: 2025-10-09 08:00:00 AEDT)" executed successfully
2025-10-08 08:00:00,062 - app.services.queue_processor - INFO - Worker 0 executing command 26: power_on on ir-dc4516 port 2 (attempt 1)
2025-10-08 08:00:00,069 - app.services.queue_processor - INFO - Worker 1 executing command 25: power_on on ir-dc4516 port 2 (attempt 1)
2025-10-08 08:00:00,076 - app.services.queue_processor - INFO - Worker 2 executing command 24: power_on on ir-dc4516 port 1 (attempt 1)
INFO:     127.0.0.1:33146 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:00:02,809 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 08:00:02,809 - app.services.esphome_client - ERROR - Error calling service 'tv_power_on' on ir-dc4516: Authenticated connection not ready yet for 192.168.101.146; current state is ConnectionState.SOCKET_OPENED!
2025-10-08 08:00:02,813 - app.services.queue_processor - WARNING - ‚úó Worker 1 failed command 25: Command execution failed (attempt 1)
2025-10-08 08:00:02,818 - app.services.queue_processor - INFO - Worker 1 executing command 19: power_on on ir-dca09e port 1 (attempt 1)
2025-10-08 08:00:02,819 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 08:00:02,819 - app.services.esphome_client - ERROR - Error calling service 'tv_power_on' on ir-dc4516: Authenticated connection not ready yet for 192.168.101.146; current state is ConnectionState.SOCKET_OPENED!
2025-10-08 08:00:02,822 - app.services.queue_processor - WARNING - ‚úó Worker 0 failed command 26: Command execution failed (attempt 1)
2025-10-08 08:00:02,837 - aioesphomeapi.connection - WARNING - 192.168.101.132: Connection error occurred: 192.168.101.132: The connection dropped immediately after encrypted hello; Try enabling encryption on the device or turning off encryption on the client (aioesphomeapi).
2025-10-08 08:00:02,837 - app.services.esphome_client - ERROR - Failed to connect to ir-dca09e: 192.168.101.132: Connection closed
2025-10-08 08:00:02,840 - app.services.queue_processor - WARNING - ‚úó Worker 1 failed command 19: Command execution failed (attempt 1)
2025-10-08 08:00:03,351 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 08:00:03,519 - app.services.esphome_client - INFO - Called service 'tv_power_on' on ir-dc4516 with data: {'port': 1}
2025-10-08 08:00:03,527 - app.services.queue_processor - INFO - ‚úì Worker 2 completed command 24 in 3443ms
2025-10-08 08:00:03,531 - app.services.queue_processor - INFO - Worker 2 executing command 23: power_on on ir-dc4516 port 1 (attempt 2)
2025-10-08 08:00:03,735 - app.services.esphome_client - INFO - Called service 'tv_power_on' on ir-dc4516 with data: {'port': 1}
2025-10-08 08:00:03,741 - app.services.queue_processor - INFO - ‚úì Worker 2 completed command 23 in 203ms
2025-10-08 08:00:04,828 - app.services.queue_processor - INFO - Worker 0 executing command 26: power_on on ir-dc4516 port 2 (attempt 2)
2025-10-08 08:00:04,847 - app.services.queue_processor - INFO - Worker 1 executing command 25: power_on on ir-dc4516 port 2 (attempt 2)
2025-10-08 08:00:04,972 - app.services.esphome_client - INFO - Called service 'tv_power_on' on ir-dc4516 with data: {'port': 2}
2025-10-08 08:00:04,977 - app.services.queue_processor - INFO - ‚úì Worker 0 completed command 26 in 143ms
2025-10-08 08:00:04,978 - app.services.esphome_client - INFO - Called service 'tv_power_on' on ir-dc4516 with data: {'port': 2}
2025-10-08 08:00:04,983 - app.services.queue_processor - INFO - ‚úì Worker 1 completed command 25 in 130ms
2025-10-08 08:00:05,482 - app.services.queue_processor - INFO - Worker 0 executing command 21: power_on on ir-dca09e port 2 (attempt 2)
INFO:     127.0.0.1:33148 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:00:08,192 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 08:00:08,327 - app.services.esphome_client - INFO - Called service 'tv_power_on' on ir-dca09e with data: {'port': 2}
2025-10-08 08:00:08,332 - app.services.queue_processor - INFO - ‚úì Worker 0 completed command 21 in 2845ms
INFO:     127.0.0.1:50070 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:00:13,397 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-08 08:00:13,397 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-08 08:00:13,397 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-08 08:00:13,397 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-08 08:00:13,404 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-08 08:00:13,472 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 08:00:13,473 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 08:00:13,473 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 08:00:13,473 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 08:00:13,476 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 08:00:13,490 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 08:00:13,490 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 08:00:13,490 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 08:00:13,490 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 08:00:13,493 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
INFO:     127.0.0.1:36140 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:59974 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:56222 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:49617 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55477 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55439 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54610 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59974 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56222 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49617 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55439 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:33326 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:33332 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:43024 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:00:36,196 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: [Errno 104] Connection reset by peer
2025-10-08 08:00:36,647 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: [Errno 104] Connection reset by peer
INFO:     127.0.0.1:43040 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:50868 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:00:43,363 - aioesphomeapi.connection - WARNING - ir-dc4516 @ 192.168.101.146: Connection error occurred: [Errno 104] Connection reset by peer
INFO:     127.0.0.1:50878 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:40068 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:40080 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:54988 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:54990 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:01:11,816 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 08:01:11,817 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 08:01:11,817 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,817 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 08:01:11,817 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,817 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,817 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,817 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,817 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,817 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,817 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,817 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,817 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,817 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,817 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,817 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,817 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,818 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,818 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,818 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,818 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,818 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,818 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,818 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:11,818 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:01:12,025 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 08:01:12,030 - app.services.device_health - INFO - Health check complete: 1/2 devices online
INFO:     127.0.0.1:44732 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:01:17,644 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     127.0.0.1:44732 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:50361 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:61600 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:50405 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60937 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62614 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60116 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50361 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61600 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60116 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62614 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:44740 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46144 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46148 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:45170 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:45172 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46780 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46792 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:47810 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:47812 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:41824 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:41840 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:63182 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:58555 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:63182 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58555 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52775 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64939 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59331 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63182 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52325 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58555 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58555 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:52325 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     100.98.57.42:63182 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:58555 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:52325 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59331 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52775 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64939 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:33178 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:52775 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64939 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63182 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59331 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59331 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     100.98.57.42:63182 - "GET /api/v1/settings/app?include_private=true HTTP/1.1" 200 OK
INFO:     100.98.57.42:64939 - "GET /api/v1/management/available-channels HTTP/1.1" 200 OK
INFO:     127.0.0.1:33180 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:55654 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:55658 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:47972 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:47988 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:58606 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:58612 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:37574 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:37580 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:45878 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:45882 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:64174 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:52293 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:64740 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50366 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57400 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54263 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57400 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64740 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50366 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54263 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:44304 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:44318 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:39326 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:60457 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63485 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:51711 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:51051 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53845 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52469 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60457 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:51711 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:39330 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:54116 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:58036 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54876 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49959 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58416 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60001 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50443 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49959 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58036 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:54128 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:35102 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:64955 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:59442 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:49714 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60079 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64955 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53677 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64414 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59442 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60079 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49714 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:35104 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:55590 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:64413 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63949 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63090 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62183 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55589 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58157 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63949 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63090 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:64413 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55596 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:37196 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:53444 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60972 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:65044 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64610 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50527 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57969 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53444 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60972 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:37200 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:64293 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64324 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60552 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57789 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57604 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61382 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64293 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60552 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:33466 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:61701 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:64154 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63175 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:63541 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61701 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49952 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61782 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63541 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64154 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63175 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:33474 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:50334 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:50334 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:62681 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     127.0.0.1:50342 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:59048 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:59058 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:59258 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:59272 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:52228 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:52232 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:38590 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:38596 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:37402 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:53325 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:61682 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61682 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:53325 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62761 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52684 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61682 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53325 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55374 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50639 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:37412 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46180 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46192 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:64106 - "GET /api/v1/commands/queue/metrics HTTP/1.1" 200 OK
INFO:     100.98.57.42:64106 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:64348 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:64106 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:58627 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57453 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56082 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:65197 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64348 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     127.0.0.1:60852 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:64348 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:65197 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57453 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56082 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60858 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:49234 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:49248 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:06:12,030 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 08:06:12,030 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 08:06:12,030 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,030 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 08:06:12,030 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,031 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
2025-10-08 08:06:12,032 - app.services.esphome_client - ERROR - Error getting device info from ir-dc4516: Not connected to ir-dc4516 @ 192.168.101.146!
INFO:     127.0.0.1:33242 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:06:14,447 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 08:06:14,655 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 08:06:14,660 - app.services.device_health - INFO - Health check complete: 1/2 devices online
INFO:     127.0.0.1:33250 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:06:20,702 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     127.0.0.1:33250 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:59962 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:59974 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:06:34,848 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 08:06:34,848 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 08:06:34,848 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 08:06:34,849 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 08:06:34,849 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
INFO:     127.0.0.1:59974 - "OPTIONS /api/hybrid-devices/9/link-ir-fallback HTTP/1.1" 200 OK
INFO:     127.0.0.1:59974 - "POST /api/hybrid-devices/9/link-ir-fallback HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:42134 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:64674 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:53850 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:52767 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52767 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53850 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64674 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64674 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52767 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53850 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64303 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55594 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:55606 - "POST /api/hybrid-devices/9/link-ir-fallback HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55600 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:53022 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:53036 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:35428 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:35430 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app/api/hybrid_devices.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-08 08:07:22,471 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-08 08:07:22,471 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-08 08:07:22,471 - app.main - INFO - TV status polling service stopped
2025-10-08 08:07:22,471 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-08 08:07:22,471 - app.main - INFO - Device status monitoring stopped
2025-10-08 08:07:22,471 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-08 08:07:22,471 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-08 08:07:22,471 - app.main - INFO - Schedule processor stopped
2025-10-08 08:07:22,471 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-08 08:07:22,471 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-08 08:07:22,471 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-08 08:07:22,471 - app.main - INFO - History cleanup service stopped
2025-10-08 08:07:22,471 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-08 08:07:22,471 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-08 08:07:22,471 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-08 08:07:22,471 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-08 08:07:22,471 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-08 08:07:22,471 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-08 08:07:22,471 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-08 08:07:22,472 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-08 08:07:22,472 - app.main - INFO - Command queue processor stopped
2025-10-08 08:07:22,472 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-08 08:07:22,472 - app.main - INFO - Device health monitoring stopped
2025-10-08 08:07:22,472 - app.services.discovery - INFO - Stopping device discovery...
2025-10-08 08:07:22,472 - app.services.discovery - INFO - Device discovery stopped
2025-10-08 08:07:22,472 - app.main - INFO - Device discovery stopped
INFO:     Application shutdown complete.
INFO:     Finished server process [601559]
/home/coastal/smartvenue/backend/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [602106]
INFO:     Waiting for application startup.
2025-10-08 08:07:24,795 - app.main - INFO - Starting SmartVenue backend...
2025-10-08 08:07:24,803 - app.main - INFO - Database tables created
2025-10-08 08:07:24,835 - app.main - INFO - Database initialized with seed data
2025-10-08 08:07:24,835 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-08 08:07:24,837 - app.services.discovery - INFO - Device discovery started
2025-10-08 08:07:24,837 - app.main - INFO - Device discovery started
2025-10-08 08:07:24,837 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-08 08:07:24,837 - app.main - INFO - Device health monitoring started
2025-10-08 08:07:24,837 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-08 08:07:24,837 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-08 08:07:24,837 - app.main - INFO - Command queue processor started
2025-10-08 08:07:24,837 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-08 08:07:24,837 - app.main - INFO - History cleanup service started
2025-10-08 08:07:24,837 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-08 08:07:24,839 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-08 08:07:24,841 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-08 08:07:24,841 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-08 08:07:24,842 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-08 08:07:24,842 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-08 08:07:24,842 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-08 08:07:24,842 - apscheduler.scheduler - INFO - Scheduler started
2025-10-08 08:07:24,842 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-08 08:07:24,842 - app.main - INFO - Schedule processor started
2025-10-08 08:07:24,842 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-08 08:07:24,842 - app.main - INFO - Device status monitoring started
2025-10-08 08:07:24,843 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-08 08:07:24,843 - app.main - INFO - TV status polling service started
2025-10-08 08:07:24,843 - app.services.queue_processor - INFO - Worker 0 started
2025-10-08 08:07:24,849 - app.services.queue_processor - INFO - Worker 1 started
2025-10-08 08:07:24,850 - app.services.queue_processor - INFO - Worker 2 started
2025-10-08 08:07:24,851 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-09 03:00:00 (in 18.9 hours)
2025-10-08 08:07:24,859 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     Application startup complete.
Template seeding complete; using dynamic IR library system.
INFO:     127.0.0.1:39864 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:07:28,003 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 08:07:28,004 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 08:07:28,004 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 08:07:28,004 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 08:07:28,010 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 08:07:28,024 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 08:07:28,024 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 08:07:28,024 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 08:07:28,024 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 08:07:28,028 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 08:07:28,104 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-08 08:07:28,104 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-08 08:07:28,104 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-08 08:07:28,104 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-08 08:07:28,108 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-08 08:07:28,110 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-08 08:07:28,110 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-08 08:07:28,110 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-08 08:07:28,110 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-08 08:07:28,117 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-08 08:07:28,173 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 08:07:28,173 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 08:07:28,173 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 08:07:28,173 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 08:07:28,179 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 08:07:28,195 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 08:07:28,196 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 08:07:28,196 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 08:07:28,196 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 08:07:28,202 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 08:07:29,004 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-08 08:07:29,004 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-08 08:07:29,004 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-08 08:07:29,004 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-08 08:07:29,005 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-08 08:07:29,119 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-08 08:07:29,120 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-08 08:07:29,120 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-08 08:07:29,120 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-08 08:07:29,123 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-08 08:07:29,133 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 08:07:29,133 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 08:07:29,133 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 08:07:29,133 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 08:07:29,137 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 08:07:29,187 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-08 08:07:29,188 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-08 08:07:29,188 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-08 08:07:29,188 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-08 08:07:29,191 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-08 08:07:29,191 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-08 08:07:29,191 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-08 08:07:29,191 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-08 08:07:29,192 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-08 08:07:29,194 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-08 08:07:29,231 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-08 08:07:29,231 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-08 08:07:29,231 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-08 08:07:29,231 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-08 08:07:29,234 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-08 08:07:29,300 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-08 08:07:29,300 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-08 08:07:29,300 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 08:07:29,300 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 08:07:29,304 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
INFO:     127.0.0.1:39896 - "POST /api/v1/hybrid-devices/9/link-ir-fallback HTTP/1.1" 200 OK
INFO:     127.0.0.1:39880 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:56822 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:63192 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     127.0.0.1:56838 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:63192 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     127.0.0.1:45408 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:64360 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:58529 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:58529 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64360 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54723 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62972 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54723 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62972 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58529 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64360 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:45420 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:34014 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:34028 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:40616 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:40622 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:53644 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:53660 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:50512 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:50514 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:48900 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:48904 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:48904 - "OPTIONS /api/v1/hybrid-devices/9/link-ir-fallback HTTP/1.1" 200 OK
INFO:     127.0.0.1:48904 - "POST /api/v1/hybrid-devices/9/link-ir-fallback HTTP/1.1" 200 OK
INFO:     127.0.0.1:48904 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:56416 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:56416 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:53045 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:53045 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56416 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56416 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53045 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56416 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53045 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52879 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50889 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:51516 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:39042 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:39046 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:39120 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:54800 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:55504 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:55520 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46670 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46672 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:50636 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:50652 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:57040 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:50362 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:50362 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57040 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60458 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63975 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63975 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63975 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57040 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60458 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:39236 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:39252 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:48750 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:48758 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:42932 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:42936 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:48578 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:48590 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:42596 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:42606 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:54922 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:54924 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:63840 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:55343 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:63840 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55343 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55407 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56932 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56932 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56932 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55343 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55407 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:44406 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:44412 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:45176 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:45180 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:59306 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:59320 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:51456 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:51472 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:47954 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:40584 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:54173 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:50361 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:40600 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:59761 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50366 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50361 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54173 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50361 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50361 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54173 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59761 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:37358 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:37372 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:39650 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:39662 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:32808 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:32822 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:12:24,843 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 08:12:24,844 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 08:12:27,335 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 08:12:27,346 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 08:12:27,533 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 08:12:27,724 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 08:12:27,730 - app.services.device_health - INFO - Health check complete: 2/2 devices online
INFO:     127.0.0.1:58384 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:12:27,939 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     127.0.0.1:58392 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:37198 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:37208 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:38898 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:52623 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:58922 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:63287 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64713 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53895 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49245 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49245 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63287 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64713 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53895 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:38912 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:41498 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:41506 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46852 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46858 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:34926 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:34938 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:35716 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:59695 - "GET /api/v1/settings/app?include_private=true HTTP/1.1" 200 OK
INFO:     100.98.57.42:62249 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     100.98.57.42:50978 - "GET /api/v1/management/available-channels HTTP/1.1" 200 OK
INFO:     100.98.57.42:53960 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     127.0.0.1:35724 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:43378 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:43388 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:43398 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:51288 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:60622 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:56330 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:50608 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63396 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:51111 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63556 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:51111 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63556 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63396 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50608 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:51296 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:59814 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:47972 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:53578 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:53584 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:56294 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:56300 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:52482 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:52484 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:54082 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:54098 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:51688 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:49568 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:54296 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63471 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62984 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59031 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63471 - "GET /api/v1/commands/nw-b85a97-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54296 - "GET /api/v1/commands/nw-f5a756-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62984 - "GET /api/v1/commands/nw-9cf332-1/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59031 - "GET /api/v1/commands/nw-bb2229-1/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55348 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:55354 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:17:27,731 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 08:17:27,732 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 08:17:30,141 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 08:17:30,418 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 08:17:30,613 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 08:17:30,810 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 08:17:30,814 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 08:17:30,997 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     100.98.57.42:56190 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:58369 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:58201 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56190 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:63071 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58369 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     100.98.57.42:52552 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61772 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58369 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:61772 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:52552 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56190 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58369 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:58201 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63071 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61772 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     100.98.57.42:50900 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:55168 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:58070 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55168 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55168 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58070 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62119 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:62119 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:54751 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59508 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59508 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54751 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
2025-10-08 08:21:32,093 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 08:21:32,093 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 08:21:32,093 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 08:21:32,093 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 08:21:32,100 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 08:21:32,100 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 08:21:32,100 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 08:21:32,100 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 08:21:32,100 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 08:21:32,106 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
INFO:     100.98.57.42:49398 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:53758 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:49429 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64406 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49429 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64406 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
2025-10-08 08:22:30,815 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 08:22:30,816 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 08:22:33,222 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 08:22:33,297 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 08:22:33,492 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 08:22:33,687 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 08:22:33,691 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 08:22:34,055 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     100.98.57.42:53838 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:49337 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:64097 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56916 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56916 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64097 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56636 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:50365 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:52331 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54217 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63583 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56909 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55558 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     100.98.57.42:50530 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:50530 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:55558 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53339 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:62127 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60224 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50530 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62859 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:60359 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49632 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:52212 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62859 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:65309 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:65309 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     127.0.0.1:46916 - "GET /api/network-tv/discover HTTP/1.1" 200 OK
INFO:     127.0.0.1:46922 - "GET /api/virtual-controllers/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:46938 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46916 - "GET /api/network-tv/discover HTTP/1.1" 200 OK
INFO:     127.0.0.1:46938 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46922 - "GET /api/virtual-controllers/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:46944 - "GET /api/network-tv/discover HTTP/1.1" 200 OK
INFO:     127.0.0.1:46944 - "GET /api/virtual-controllers/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:46944 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:46944 - "GET /api/network-tv/discover HTTP/1.1" 200 OK
INFO:     127.0.0.1:46944 - "GET /api/virtual-controllers/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:46944 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:63452 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:61233 - "GET /api/v1/settings/app?include_private=true HTTP/1.1" 200 OK
INFO:     100.98.57.42:62251 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     100.98.57.42:62219 - "GET /api/v1/management/available-channels HTTP/1.1" 200 OK
INFO:     100.98.57.42:63924 - "GET /api/v1/ir-codes/libraries/1799/commands HTTP/1.1" 200 OK
INFO:     100.98.57.42:61920 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     100.98.57.42:60312 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
2025-10-08 08:27:33,692 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 08:27:33,692 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 08:27:36,108 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 08:27:37,114 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 08:27:43,692 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while finishing connection: Finishing connection cancelled
2025-10-08 08:27:43,693 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 08:27:43,693 - aioesphomeapi.connection - WARNING - 192.168.101.146: Connection error occurred: 192.168.101.146: Connection lost
2025-10-08 08:27:46,786 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 08:27:49,858 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 08:27:52,930 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 08:27:56,002 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 08:27:59,074 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 08:28:02,146 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 08:28:02,262 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 08:28:05,346 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 08:28:08,418 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 08:28:11,490 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 08:28:13,895 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 08:28:13,903 - app.services.device_health - INFO - Found device ir-dc4516 at new IP: 192.168.101.146
2025-10-08 08:28:14,081 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 08:28:14,299 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 08:28:14,304 - app.services.device_health - INFO - Health check complete: 2/2 devices online
INFO:     100.98.57.42:58376 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:55590 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:57279 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52407 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60846 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58532 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50362 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59363 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61352 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52341 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:47004 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:47012 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:59026 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49369 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53026 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:58287 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56930 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:64834 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:63004 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64090 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56283 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:56930 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:64834 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     100.98.57.42:61151 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56320 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:60458 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     127.0.0.1:56328 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:55472 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:60669 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:57324 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55472 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     100.98.57.42:59815 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63028 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50363 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60888 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:60894 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:37254 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:55557 - "GET /api/v1/settings/app?include_private=true HTTP/1.1" 200 OK
INFO:     100.98.57.42:55246 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     100.98.57.42:53594 - "GET /api/v1/management/available-channels HTTP/1.1" 200 OK
INFO:     100.98.57.42:56231 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:51615 - "GET /api/v1/ir-codes/libraries/1799/commands HTTP/1.1" 200 OK
INFO:     127.0.0.1:37258 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:34038 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:34048 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:37894 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:37900 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:51708 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:51722 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:52157 - "OPTIONS /api/v1/management/managed/4 HTTP/1.1" 200 OK
INFO:     100.98.57.42:52157 - "PUT /api/v1/management/managed/4 HTTP/1.1" 200 OK
INFO:     100.98.57.42:52157 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:55182 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     100.98.57.42:52157 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:52157 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:44904 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:52157 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:52157 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53163 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55182 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:65171 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:44910 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:55422 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:56519 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     100.98.57.42:56519 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:56499 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     127.0.0.1:44910 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:55422 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:59513 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55709 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53200 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:41014 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:41022 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:50046 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:50054 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:44784 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:44792 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:57082 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:57088 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:52756 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:52770 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:48532 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:56647 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:58186 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:61603 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52969 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55423 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57432 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:48538 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:36958 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:53484 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     127.0.0.1:36960 - "GET /api/network-tv/discover HTTP/1.1" 200 OK
INFO:     127.0.0.1:36960 - "GET /api/virtual-controllers/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:36960 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:36960 - "GET /api/network-tv/discover HTTP/1.1" 200 OK
INFO:     127.0.0.1:36960 - "GET /api/virtual-controllers/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:36960 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:32:40,173 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 08:33:14,305 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 08:33:14,305 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 08:33:16,988 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 08:33:17,001 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 08:33:17,216 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 08:33:22,335 - app.services.esphome_client - WARNING - Timed out waiting for capabilities from ir-dc4516
INFO:     100.98.57.42:50375 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:57748 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:62455 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54674 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:62085 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:50545 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:42726 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
2025-10-08 08:33:32,335 - aioesphomeapi.connection - ERROR - 192.168.101.146: disconnect request failed: Timeout waiting for DisconnectResponse after 10.0s
2025-10-08 08:33:32,335 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 08:33:32,339 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 08:33:34,358 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 08:33:34,358 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 08:33:34,358 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 08:33:34,358 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 08:33:34,359 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
INFO:     127.0.0.1:42736 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:52181 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52587 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49723 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49952 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:64162 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:52505 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:61341 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:53158 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:39952 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:39954 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:63193 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:63544 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:49397 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:60642 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54791 - "GET /api/v1/commands/ir-dca09e/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:54583 - "GET /api/v1/commands/nw-b85a97/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57593 - "GET /api/v1/commands/ir-dc4516/port-status HTTP/1.1" 200 OK
INFO:     100.98.57.42:51303 - "GET /api/v1/commands/nw-9cf332/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:54791 - "GET /api/v1/management/managed HTTP/1.1" 200 OK
INFO:     100.98.57.42:60358 - "GET /api/v1/commands/nw-f5a756/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:55950 - "GET /api/v1/commands/nw-bb2229/port-status HTTP/1.1" 404 Not Found
INFO:     100.98.57.42:57593 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     127.0.0.1:38046 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:38058 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:40554 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     100.98.57.42:64201 - "GET /api/v1/settings/app?include_private=true HTTP/1.1" 200 OK
INFO:     100.98.57.42:63921 - "GET /api/v1/settings/tags HTTP/1.1" 200 OK
INFO:     100.98.57.42:55448 - "GET /api/v1/ir-codes/libraries/1799/commands HTTP/1.1" 200 OK
INFO:     100.98.57.42:51297 - "GET /api/v1/management/available-channels HTTP/1.1" 200 OK
INFO:     127.0.0.1:40562 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:57038 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
INFO:     127.0.0.1:57046 - "GET /api/virtual-controllers/devices/all HTTP/1.1" 200 OK
r occurred: 192.168.101.146: The connection dropped immediately after encrypted hello; Try enabling encryption on the device or turning off encryption on the client (aioesphomeapi).
2025-10-08 08:00:01,463 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: 192.168.101.146: Connection closed
2025-10-08 08:00:01,467 - app.services.queue_processor - WARNING - ‚úó Worker 2 failed command 23: Command execution failed (attempt 1)
2025-10-08 08:00:01,471 - app.services.queue_processor - INFO - Worker 2 executing command 20: power_on on ir-dca09e port 1 (attempt 1)
2025-10-08 08:00:03,389 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 08:00:03,390 - app.services.esphome_client - ERROR - Error calling service 'tv_power_on' on ir-dca09e: Authenticated connection not ready yet for 192.168.101.132; current state is ConnectionState.SOCKET_OPENED!
2025-10-08 08:00:03,394 - app.services.queue_processor - WARNING - ‚úó Worker 1 failed command 21: Command execution failed (attempt 1)
2025-10-08 08:00:03,395 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 08:00:03,395 - app.services.esphome_client - ERROR - Error calling service 'tv_power_on' on ir-dca09e: Authenticated connection not ready yet for 192.168.101.132; current state is ConnectionState.SOCKET_OPENED!
2025-10-08 08:00:03,398 - app.services.queue_processor - WARNING - ‚úó Worker 0 failed command 22: Command execution failed (attempt 1)
2025-10-08 08:00:03,917 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 08:00:04,053 - app.services.esphome_client - INFO - Called service 'tv_power_on' on ir-dca09e with data: {'port': 1}
2025-10-08 08:00:04,062 - app.services.queue_processor - INFO - ‚úì Worker 2 completed command 20 in 2581ms
2025-10-08 08:00:04,901 - app.services.queue_processor - INFO - Worker 1 executing command 19: power_on on ir-dca09e port 1 (attempt 2)
2025-10-08 08:00:05,049 - app.services.esphome_client - INFO - Called service 'tv_power_on' on ir-dca09e with data: {'port': 1}
2025-10-08 08:00:05,055 - app.services.queue_processor - INFO - ‚úì Worker 1 completed command 19 in 147ms
2025-10-08 08:00:05,408 - app.services.queue_processor - INFO - Worker 0 executing command 22: power_on on ir-dca09e port 2 (attempt 2)
2025-10-08 08:00:05,789 - app.services.esphome_client - INFO - Called service 'tv_power_on' on ir-dca09e with data: {'port': 2}
2025-10-08 08:00:05,794 - app.services.queue_processor - INFO - ‚úì Worker 0 completed command 22 in 380ms
2025-10-08 08:00:13,397 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-08 08:00:13,397 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-08 08:00:13,397 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-08 08:00:13,397 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-08 08:00:13,401 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-08 08:00:13,472 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 08:00:13,473 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 08:00:13,473 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 08:00:13,473 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 08:00:13,479 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 08:00:13,490 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 08:00:13,490 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 08:00:13,490 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 08:00:13,490 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 08:00:13,497 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 08:01:11,860 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 08:01:11,860 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 08:01:14,311 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 08:01:14,518 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 08:01:14,777 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 08:01:14,781 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 08:01:17,559 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 08:01:20,613 - app.services.device_status_checker - INFO - Device nw-b85a97 status changed: online=True, power=on
2025-10-08 08:06:14,782 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 08:06:14,782 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 08:06:17,168 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 08:06:17,456 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 08:06:17,671 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 08:06:20,618 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 08:06:23,678 - app.services.esphome_client - WARNING - Timed out waiting for capabilities from ir-dc4516
2025-10-08 08:06:33,678 - aioesphomeapi.connection - ERROR - 192.168.101.146: disconnect request failed: Timeout waiting for DisconnectResponse after 10.0s
2025-10-08 08:06:33,678 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 08:06:33,682 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 08:06:34,848 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 08:06:34,848 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 08:06:34,848 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 08:06:34,849 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 08:06:34,849 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
WARNING:  WatchFiles detected changes in 'app/api/hybrid_devices.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-10-08 08:07:22,591 - app.main - INFO - Shutting down SmartVenue backend...
2025-10-08 08:07:22,591 - app.services.tv_status_poller - INFO - ‚èπÔ∏è  Stopping TV status polling service
2025-10-08 08:07:22,591 - app.main - INFO - TV status polling service stopped
2025-10-08 08:07:22,591 - app.services.device_status_checker - INFO - Device status monitoring stopped
2025-10-08 08:07:22,591 - app.main - INFO - Device status monitoring stopped
2025-10-08 08:07:22,591 - app.services.schedule_processor - INFO - Stopping schedule processor...
2025-10-08 08:07:22,591 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor stopped
2025-10-08 08:07:22,591 - app.main - INFO - Schedule processor stopped
2025-10-08 08:07:22,591 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-10-08 08:07:22,591 - app.services.history_cleanup - INFO - History cleanup loop cancelled
2025-10-08 08:07:22,592 - app.services.history_cleanup - INFO - History cleanup service stopped
2025-10-08 08:07:22,592 - app.main - INFO - History cleanup service stopped
2025-10-08 08:07:22,592 - app.services.queue_processor - INFO - Stopping queue processor...
2025-10-08 08:07:22,592 - app.services.queue_processor - INFO - Worker 0 cancelled
2025-10-08 08:07:22,592 - app.services.queue_processor - INFO - Worker 0 stopped
2025-10-08 08:07:22,592 - app.services.queue_processor - INFO - Worker 1 cancelled
2025-10-08 08:07:22,592 - app.services.queue_processor - INFO - Worker 1 stopped
2025-10-08 08:07:22,592 - app.services.queue_processor - INFO - Worker 2 cancelled
2025-10-08 08:07:22,592 - app.services.queue_processor - INFO - Worker 2 stopped
2025-10-08 08:07:22,592 - app.services.queue_processor - INFO - ‚úì Queue processor stopped
2025-10-08 08:07:22,592 - app.main - INFO - Command queue processor stopped
2025-10-08 08:07:22,592 - app.services.device_health - INFO - Stopping device health monitoring service
2025-10-08 08:07:22,592 - app.main - INFO - Device health monitoring stopped
2025-10-08 08:07:22,592 - app.services.discovery - INFO - Stopping device discovery...
2025-10-08 08:07:22,592 - app.services.discovery - INFO - Device discovery stopped
2025-10-08 08:07:22,592 - app.main - INFO - Device discovery stopped
INFO:     Application shutdown complete.
INFO:     Finished server process [601558]
Template seeding complete; using dynamic IR library system.
/home/coastal/smartvenue/venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:149: UserWarning: Field "model_info" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
INFO:     Started server process [602107]
INFO:     Waiting for application startup.
2025-10-08 08:07:24,858 - app.main - INFO - Starting SmartVenue backend...
2025-10-08 08:07:24,866 - app.main - INFO - Database tables created
2025-10-08 08:07:24,897 - app.main - INFO - Database initialized with seed data
2025-10-08 08:07:24,898 - app.services.discovery - INFO - Starting ESPHome device discovery...
2025-10-08 08:07:24,899 - app.services.discovery - INFO - Device discovery started
2025-10-08 08:07:24,899 - app.main - INFO - Device discovery started
2025-10-08 08:07:24,899 - app.services.device_health - INFO - Starting device health monitoring service
2025-10-08 08:07:24,899 - app.main - INFO - Device health monitoring started
2025-10-08 08:07:24,899 - app.services.queue_processor - INFO - Starting queue processor with 3 workers...
2025-10-08 08:07:24,899 - app.services.queue_processor - INFO - ‚úì Queue processor started with 3 workers
2025-10-08 08:07:24,899 - app.main - INFO - Command queue processor started
2025-10-08 08:07:24,899 - app.services.history_cleanup - INFO - History cleanup service started (retention: 7 days, cleanup time: 03:00:00)
2025-10-08 08:07:24,899 - app.main - INFO - History cleanup service started
2025-10-08 08:07:24,899 - app.services.schedule_processor - INFO - Starting schedule processor...
2025-10-08 08:07:24,901 - tzlocal - WARNING - /etc/timezone is deprecated in some distros, and no longer reliable. tzlocal is ignoring it, and you can likely delete it.
2025-10-08 08:07:24,903 - app.services.schedule_processor - INFO - Loading 1 active schedules...
2025-10-08 08:07:24,903 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-08 08:07:24,903 - app.services.schedule_processor - INFO -   ‚úì Loaded schedule: Test Update2 (ID: 1)
2025-10-08 08:07:24,903 - app.services.schedule_processor - INFO - ‚úÖ Loaded 1 schedules
2025-10-08 08:07:24,904 - apscheduler.scheduler - INFO - Added job "Test Update2" to job store "default"
2025-10-08 08:07:24,904 - apscheduler.scheduler - INFO - Scheduler started
2025-10-08 08:07:24,904 - app.services.schedule_processor - INFO - ‚úÖ Schedule processor started successfully
2025-10-08 08:07:24,904 - app.main - INFO - Schedule processor started
2025-10-08 08:07:24,904 - app.services.device_status_checker - INFO - Device status monitoring started
2025-10-08 08:07:24,904 - app.main - INFO - Device status monitoring started
2025-10-08 08:07:24,904 - app.services.tv_status_poller - INFO - üîÑ Starting TV status polling service
2025-10-08 08:07:24,904 - app.main - INFO - TV status polling service started
2025-10-08 08:07:24,905 - app.services.queue_processor - INFO - Worker 0 started
2025-10-08 08:07:24,911 - app.services.queue_processor - INFO - Worker 1 started
2025-10-08 08:07:24,912 - app.services.queue_processor - INFO - Worker 2 started
2025-10-08 08:07:24,913 - app.services.history_cleanup - INFO - Next history cleanup scheduled for 2025-10-09 03:00:00 (in 18.9 hours)
2025-10-08 08:07:24,921 - app.services.device_status_checker - INFO - Checking status of 4 devices
INFO:     Application startup complete.
2025-10-08 08:07:28,002 - app.services.discovery - INFO - mDNS service discovered: ir-dca09e._esphomelib._tcp.local.
2025-10-08 08:07:28,002 - app.services.discovery - INFO - Processing mDNS device: ir-dca09e at 192.168.101.132:6053
2025-10-08 08:07:28,002 - app.services.discovery - INFO - Discovered ESPHome device: ir-dca09e (192.168.101.132)
2025-10-08 08:07:28,002 - app.main - INFO - New device discovered: ir-dca09e (192.168.101.132)
2025-10-08 08:07:28,009 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 08:07:28,092 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-office._esphomelib._tcp.local.
2025-10-08 08:07:28,092 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-office at 192.168.101.34:6053
2025-10-08 08:07:28,092 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-office (192.168.101.34)
2025-10-08 08:07:28,092 - app.main - INFO - New device discovered: bt-proxy-office (192.168.101.34)
2025-10-08 08:07:28,097 - app.main - INFO - Saved bt-proxy-office to DeviceDiscovery table
2025-10-08 08:07:28,106 - app.services.discovery - INFO - mDNS service discovered: kitchen-fan._esphomelib._tcp.local.
2025-10-08 08:07:28,106 - app.services.discovery - INFO - Processing mDNS device: kitchen-fan at 192.168.101.29:6053
2025-10-08 08:07:28,106 - app.services.discovery - INFO - Discovered ESPHome device: kitchen-fan (192.168.101.29)
2025-10-08 08:07:28,106 - app.main - INFO - New device discovered: kitchen-fan (192.168.101.29)
2025-10-08 08:07:28,113 - app.main - INFO - Saved kitchen-fan to DeviceDiscovery table
2025-10-08 08:07:28,115 - app.services.discovery - INFO - mDNS service discovered: mainpowermonitor._esphomelib._tcp.local.
2025-10-08 08:07:28,115 - app.services.discovery - INFO - Processing mDNS device: mainpowermonitor at 192.168.101.43:6053
2025-10-08 08:07:28,115 - app.services.discovery - INFO - Discovered ESPHome device: mainpowermonitor (192.168.101.43)
2025-10-08 08:07:28,115 - app.main - INFO - New device discovered: mainpowermonitor (192.168.101.43)
2025-10-08 08:07:28,121 - app.main - INFO - Saved mainpowermonitor to DeviceDiscovery table
2025-10-08 08:07:28,173 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 08:07:28,173 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 08:07:28,173 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 08:07:28,173 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 08:07:28,176 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 08:07:28,195 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 08:07:28,196 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 08:07:28,196 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 08:07:28,196 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 08:07:28,199 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 08:07:28,213 - app.services.discovery - INFO - mDNS service discovered: esp32-bluetooth-proxy-f32ccc._esphomelib._tcp.local.
2025-10-08 08:07:28,214 - app.services.discovery - INFO - Processing mDNS device: esp32-bluetooth-proxy-f32ccc at 192.168.101.37:6053
2025-10-08 08:07:28,214 - app.services.discovery - INFO - Discovered ESPHome device: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 08:07:28,214 - app.main - INFO - New device discovered: esp32-bluetooth-proxy-f32ccc (192.168.101.37)
2025-10-08 08:07:28,217 - app.main - INFO - Saved esp32-bluetooth-proxy-f32ccc to DeviceDiscovery table
2025-10-08 08:07:28,223 - app.services.discovery - INFO - mDNS service discovered: waterheater._esphomelib._tcp.local.
2025-10-08 08:07:28,223 - app.services.discovery - INFO - Processing mDNS device: waterheater at 192.168.101.73:6053
2025-10-08 08:07:28,223 - app.services.discovery - INFO - Discovered ESPHome device: waterheater (192.168.101.73)
2025-10-08 08:07:28,223 - app.main - INFO - New device discovered: waterheater (192.168.101.73)
2025-10-08 08:07:28,226 - app.main - INFO - Saved waterheater to DeviceDiscovery table
2025-10-08 08:07:28,315 - app.services.discovery - INFO - mDNS service discovered: bt-proxy-garage._esphomelib._tcp.local.
2025-10-08 08:07:28,315 - app.services.discovery - INFO - Processing mDNS device: bt-proxy-garage at 192.168.101.38:6053
2025-10-08 08:07:28,315 - app.services.discovery - INFO - Discovered ESPHome device: bt-proxy-garage (192.168.101.38)
2025-10-08 08:07:28,315 - app.main - INFO - New device discovered: bt-proxy-garage (192.168.101.38)
2025-10-08 08:07:28,318 - app.main - INFO - Saved bt-proxy-garage to DeviceDiscovery table
2025-10-08 08:07:29,045 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 08:07:29,045 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 08:07:29,045 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 08:07:29,045 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 08:07:29,046 - app.main - ERROR - Error saving discovered device to database: no running event loop
2025-10-08 08:07:29,125 - app.services.discovery - INFO - mDNS service discovered: loungefan._esphomelib._tcp.local.
2025-10-08 08:07:29,126 - app.services.discovery - INFO - Processing mDNS device: loungefan at 192.168.101.39:6053
2025-10-08 08:07:29,126 - app.services.discovery - INFO - Discovered ESPHome device: loungefan (192.168.101.39)
2025-10-08 08:07:29,126 - app.main - INFO - New device discovered: loungefan (192.168.101.39)
2025-10-08 08:07:29,129 - app.main - INFO - Saved loungefan to DeviceDiscovery table
2025-10-08 08:07:29,134 - app.services.discovery - INFO - mDNS service discovered: rearpowerboardmonitor._esphomelib._tcp.local.
2025-10-08 08:07:29,134 - app.services.discovery - INFO - Processing mDNS device: rearpowerboardmonitor at 192.168.101.27:6053
2025-10-08 08:07:29,134 - app.services.discovery - INFO - Discovered ESPHome device: rearpowerboardmonitor (192.168.101.27)
2025-10-08 08:07:29,134 - app.main - INFO - New device discovered: rearpowerboardmonitor (192.168.101.27)
2025-10-08 08:07:29,141 - app.main - INFO - Saved rearpowerboardmonitor to DeviceDiscovery table
2025-10-08 08:07:42,281 - app.services.discovery - INFO - mDNS service discovered: presence-garage._esphomelib._tcp.local.
2025-10-08 08:07:42,281 - app.services.discovery - INFO - Processing mDNS device: presence-garage at 192.168.101.21:6053
2025-10-08 08:07:42,281 - app.services.discovery - INFO - Discovered ESPHome device: presence-garage (192.168.101.21)
2025-10-08 08:07:42,281 - app.main - INFO - New device discovered: presence-garage (192.168.101.21)
2025-10-08 08:07:42,285 - app.main - INFO - Saved presence-garage to DeviceDiscovery table
2025-10-08 08:12:24,904 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 08:12:24,906 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 08:12:27,840 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 08:12:27,899 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 08:12:27,998 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 08:12:31,107 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 08:12:31,300 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 08:12:31,305 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 08:17:31,055 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 08:17:34,115 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 08:17:34,116 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 08:17:36,843 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 08:17:44,116 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 08:17:44,116 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 08:17:47,170 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 08:17:50,242 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 08:17:53,314 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 08:17:56,386 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 08:17:59,458 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 08:18:02,530 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 08:18:02,598 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 08:18:05,666 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 08:18:08,738 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 08:18:11,810 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 08:18:14,479 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 08:18:14,495 - app.services.device_health - INFO - Found device ir-dc4516 at new IP: 192.168.101.146
2025-10-08 08:18:14,686 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 08:18:15,093 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 08:18:15,097 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 08:21:32,093 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-right._esphomelib._tcp.local.
2025-10-08 08:21:32,093 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-right at 192.168.101.96:6053
2025-10-08 08:21:32,093 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-right (192.168.101.96)
2025-10-08 08:21:32,093 - app.main - INFO - New device discovered: light-kitchen-right (192.168.101.96)
2025-10-08 08:21:32,096 - app.main - INFO - Saved light-kitchen-right to DeviceDiscovery table
2025-10-08 08:21:32,096 - app.services.discovery - INFO - mDNS service discovered: light-kitchen-left._esphomelib._tcp.local.
2025-10-08 08:21:32,097 - app.services.discovery - INFO - Processing mDNS device: light-kitchen-left at 192.168.101.114:6053
2025-10-08 08:21:32,097 - app.services.discovery - INFO - Discovered ESPHome device: light-kitchen-left (192.168.101.114)
2025-10-08 08:21:32,097 - app.main - INFO - New device discovered: light-kitchen-left (192.168.101.114)
2025-10-08 08:21:32,103 - app.main - INFO - Saved light-kitchen-left to DeviceDiscovery table
2025-10-08 08:22:34,113 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 08:23:15,096 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 08:23:15,097 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 08:23:17,713 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 08:23:18,265 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 08:23:18,461 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 08:23:18,780 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 08:23:18,785 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 08:27:37,172 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 08:28:18,786 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 08:28:18,787 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 08:28:21,193 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 08:28:21,205 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 08:28:21,400 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 08:28:21,600 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 08:28:21,605 - app.services.device_health - INFO - Health check complete: 2/2 devices online
2025-10-08 08:32:40,230 - app.services.device_status_checker - INFO - Checking status of 4 devices
2025-10-08 08:33:21,605 - app.services.device_health - INFO - Starting scheduled device health check
2025-10-08 08:33:21,606 - app.services.device_health - INFO - Checking health of 2 managed devices
2025-10-08 08:33:24,246 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dca09e
2025-10-08 08:33:31,607 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error while starting connection: Starting connection cancelled
2025-10-08 08:33:31,608 - app.services.device_health - INFO - Scanning 21 IPs for device ir-dc4516
2025-10-08 08:33:34,358 - app.services.discovery - INFO - mDNS service discovered: ir-dc4516._esphomelib._tcp.local.
2025-10-08 08:33:34,358 - app.services.discovery - INFO - Processing mDNS device: ir-dc4516 at 192.168.101.146:6053
2025-10-08 08:33:34,358 - app.services.discovery - INFO - Discovered ESPHome device: ir-dc4516 (192.168.101.146)
2025-10-08 08:33:34,358 - app.main - INFO - New device discovered: ir-dc4516 (192.168.101.146)
2025-10-08 08:33:34,359 - app.main - ERROR - Error saving discovered device to database: no running event loop
/home/coastal/smartvenue/backend/app/main.py:200: RuntimeWarning: coroutine 'on_device_discovered.<locals>.fetch_caps' was never awaited
  db.rollback()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-10-08 08:33:34,690 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.136', 6053): [Errno 113] Connect call failed ('192.168.101.136', 6053)
2025-10-08 08:33:37,762 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.137', 6053): [Errno 113] Connect call failed ('192.168.101.137', 6053)
2025-10-08 08:33:40,834 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.138', 6053): [Errno 113] Connect call failed ('192.168.101.138', 6053)
2025-10-08 08:33:43,906 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.139', 6053): [Errno 113] Connect call failed ('192.168.101.139', 6053)
2025-10-08 08:33:46,978 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.140', 6053): [Errno 113] Connect call failed ('192.168.101.140', 6053)
2025-10-08 08:33:50,050 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.141', 6053): [Errno 113] Connect call failed ('192.168.101.141', 6053)
2025-10-08 08:33:50,117 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.142', 6053): [Errno 111] Connect call failed ('192.168.101.142', 6053)
2025-10-08 08:33:53,186 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.143', 6053): [Errno 113] Connect call failed ('192.168.101.143', 6053)
2025-10-08 08:33:56,258 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.144', 6053): [Errno 113] Connect call failed ('192.168.101.144', 6053)
2025-10-08 08:33:59,330 - app.services.esphome_client - ERROR - Failed to connect to ir-dc4516: Error connecting to ('192.168.101.145', 6053): [Errno 113] Connect call failed ('192.168.101.145', 6053)
2025-10-08 08:34:01,759 - app.services.esphome_client - INFO - Connected to ESPHome device: ir-dc4516
2025-10-08 08:34:01,801 - app.services.device_health - INFO - Found device ir-dc4516 at new IP: 192.168.101.146
2025-10-08 08:34:01,994 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dca09e
2025-10-08 08:34:02,192 - app.services.esphome_client - INFO - Disconnected from ESPHome device: ir-dc4516
2025-10-08 08:34:02,197 - app.services.device_health - INFO - Health check complete: 2/2 devices online
